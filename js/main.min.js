!function(){"use strict";function t(t,e,n){t.otherwise("/"),n.state("login",{url:"",views:{"content@":{templateUrl:"html/login/login.index.html",controller:"LoginController",controllerAs:"login"}}}).state("app",{url:"/content",views:{menu:{templateUrl:"html/menu/menu.index.html",controller:"MenuController",controllerAs:"menuData"},"content@":{templateUrl:"html/content/content.index.html",controller:"Contentcontroller",controllerAs:"content"}}})}angular.module("app",[]);angular.module("app",["ui.router","ngAnimate","ngResource","app.api","app.global","app.menu","app.login","app.main","app.utility","app.alltodo","app.next","app.today","app.content","app.archive"]).constant("sitename","applocal").constant("apibase","http://localhost:3000").constant("apiversion","/v1.0").config(t),t.$inject=["$urlRouterProvider","$httpProvider","$stateProvider"]}(),function(){"use strict";function t(t,e){return t(e+"/userlogin",{},{get:{method:"GET",isArray:!0}})}function e(){return{isError:function(t){return 1==t?!0:!1}}}function n(){var t;return{get:function(){return t=localStorage.getItem("id_token")},set:function(e){return localStorage.setItem("id_token",e),t=e}}}function o(t,e){return t(e+"/userlogin")}function a(t,e){return t(e+"/mainmenu",{},{get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:!0},"delete":{method:"DELETE"}})}function l(t,e){return t(e+"/project",{},{get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:!0},"delete":{method:"DELETE"}})}function r(t,e){return t(e+"/labels",{},{get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:!0},"delete":{method:"DELETE"}})}function i(t,e){return t(e+"/filters",{},{get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:!0},"delete":{method:"DELETE"}})}function u(t,e){var n=function(t){return t=angular.fromJson(t),t.dateNum=new Date(t.dateNum),t};return t(e+"/task/:id",{id:"@id"},{get:{method:"GET",transformResponse:n},save:{method:"POST"},update:{method:"PUT"},query:{method:"GET",isArray:!0},remove:{method:"DELETE"},"delete":{method:"DELETE"}})}function s(){var t=[],e=function(e){t.push(e)},n=function(){return t};return{addIdData:e,getIdData:n}}angular.module("app.api",[]),angular.module("app.api").factory("Login",t),t.$inject=["$resource","apibase"],angular.module("app.api").factory("Statuscode",e),angular.module("app.api").factory("Token",n),angular.module("app.api").factory("User",o),o.$inject=["$resource","apibase"],angular.module("app.api").factory("Menulist",a),a.$inject=["$resource","apibase"],angular.module("app.api").factory("Projectlist",l),l.$inject=["$resource","apibase"],angular.module("app.api").factory("Projectlabel",r),r.$inject=["$resource","apibase"],angular.module("app.api").factory("Projectfilter",i),i.$inject=["$resource","apibase"],angular.module("app.api").factory("Alltasks",u),u.$inject=["$resource","apibase"],angular.module("app.api").service("isId",s)}(),function(){"use strict";angular.module("app.global",[]).filter("pagination",function(){return function(t,e){return e=+e,t.slice(e)}})}(),function(){"use strict";function t(t){}function e(){function t(t,e,n){e.on("click",function(){$(".wrapper").toggleClass("panelAnimates"),e.find("span").html("Open"==$(".closeBtn span").text()?"Close":"Open")})}var e={link:t,restrict:"A"};return e}angular.module("app.content",[]).controller("Contentcontroller",t).directive("toggleElm",e),t.$inject=["$scope"]}(),function(){"use strict";function t(t,e){var n=this;n.submitted=!1,n.submitLogin=function(){n.userlogin={},n.userlogin={email:n.email,pass:n.pass};var o=[];o=e.get(n.userlogin,function(){"undefined"==typeof n.userlogin.email?l():a()});var a=function(){t.go("app")},l=function(){$(".errorLogin").css({display:"block"})};$("input").val("")}}angular.module("app.login",[]).controller("LoginController",t),t.$inject=["$state","Login"]}(),function(){"use strict";function t(){}angular.module("app.main",[]).controller("MainController",t)}(),function(){"use strict";function t(t,e,n,o,a){var l=this;l.menuList=t.query(),l.projectList=e.query(),l.projectLabel=n.query(),l.projectFilter=o.query()}function e(){function t(t,e,n){e.on("click",function(){var t=$(".content .closeBtn").find("span");$(".wrapper").toggleClass("panelAnimates"),t.html("Close"==t.text()?"Open":"Close")})}var e={link:t,restrict:"A"};return e}angular.module("app.menu",[]).controller("MenuController",t).directive("elmPanel",e),t.$inject=["Menulist","Projectlist","Projectlabel","Projectfilter","$stateParams"]}(),function(){"use strict";function t(){var t=this;t.time=new Date}angular.module("app.utility",[]).controller("UtilitiesController",t)}(),function(){"use strict";function t(t){t.state("app.all",{url:"/alltask/:id",views:{"utilities@app":{templateUrl:"html/utilities/utilities.index.html",controller:"UtilitiesController",controllerAs:"utilities"},"main@app":{params:["id"],templateUrl:"html/main/main.all/all.index.html",controller:"AlltaskController",controllerAs:"todo"}}})}function e(t,e,n){var o=this;o.numberCurrent=0,o.pageSize=3,o.allTasks=t.query(),o.numberOfPages=function(){return Math.ceil(o.allTasks.length/o.pageSize)},o.removeTask=function(e){t["delete"]({},{id:e.id},function(){o.allTasks=t.query()})},o.editTask=function(t){n.addIdData(t.id),e.go("app.edit")}}angular.module("app.alltodo",["app.alltodo.create","app.alltodo.edit"]).config(t).controller("AlltaskController",e),t.$inject=["$stateProvider"],e.$inject=["Alltasks","$state","isId"]}(),function(){"use strict";function t(t,e){t.state("app.archive",{url:"/archive",views:{"utilities@app":{templateUrl:"html/utilities/utilities.index.html",controller:"UtilitiesController",controllerAs:"utilities"},"main@app":{templateUrl:"html/main/main.archived/archived.index.html",controller:"controllerArchive",controllerAs:"archived"}}})}function e(){}angular.module("app.archive",[]).config(t).controller("controllerArchive",e),t.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){"use strict";function t(t,e){t.state("app.next",{url:"/next/:id",views:{"utilities@app":{templateUrl:"html/utilities/utilities.index.html",controller:"UtilitiesController",controllerAs:"utilities"},"main@app":{templateUrl:"html/main/main.taskSeven/seven.index.html",controller:"controllerNextDays",controllerAs:"nextSeven"}}})}function e(t,e){var n=this;n.todayDate=moment().format("L"),n.weekDate=moment().weekday(7).format("L"),console.log(n.todayDate),console.log(n.weekDate),n.nextSevenEvents=t.query({},function(){var t=[];angular.forEach(n.nextSevenEvents,function(e,o){moment(e.dateNum).format("L")>=n.todayDate&&moment(e.dateNum).format("L")<=n.weekDate&&t.push(e)}),n.nextSevenEvents=t})}angular.module("app.next",[]).config(t).controller("controllerNextDays",e),t.$inject=["$stateProvider","$urlRouterProvider"],e.$inject=["Alltasks","$state"]}(),function(){"use strict";function t(t,e){t.state("app.today",{url:"/today",views:{"utilities@app":{templateUrl:"html/utilities/utilities.index.html",controller:"UtilitiesController",controllerAs:"utilities"},"main@app":{templateUrl:"html/main/main.today/today.index.html",controller:"TodayController",controllerAs:"today"}}})}function e(t,e){var n=this;n.todayDate=moment().format("L"),n.todoTasks=t.query({},function(){var t=[];angular.forEach(n.todoTasks,function(e,o){n.todayDate==moment(e.dateNum).format("L")&&t.push(e)}),n.todoTasks=t})}angular.module("app.today",[]).config(t).controller("TodayController",e),t.$inject=["$stateProvider","$urlRouterProvider"],e.$inject=["Alltasks","$state"]}(),function(){"use strict";function t(t){t.state("app.create",{url:"/alltask/create",views:{"overlay@":{templateUrl:"/html/main/main.all/create.all/create.all.html",controller:"CreatetodoController",controllerAs:"createTodo"},"main@app":{templateUrl:"html/main/main.all/all.index.html",controller:"AlltaskController",controllerAs:"todo"}}})}function e(t,e,n){var o=this;o.submitted=!1,o.priority=e.query(),o.user=n.query({},function(){var t=[];angular.forEach(o.user,function(e,n){t.push(o.user[n].name)}),o.user=t}),o.createTask=function(){o.formAddTasks.$valid?(o.data={},o.data={project:o.project,label:o.label,name:o.name,dateNum:o.dateNum,headerComment:o.headerComment,comment:o.comment,done:"false"},t.save(o.data),$("form").find("input").val(""),$("p.msg-error").removeClass("msg-error")):($("form").find("p").addClass("msg-error"),o.submitted=!0)},o.resetVal=function(){$("form").find("input").val("")}}angular.module("app.alltodo.create",["app.alltodo"]).config(t).controller("CreatetodoController",e),t.$inject=["$stateProvider"],e.$inject=["Alltasks","Projectlabel","User"]}(),function(){"use strict";function t(t){t.state("app.edit",{url:"/alltask/edit",views:{"overlay@":{templateUrl:"/html/main/main.all/edit.all/edit.all.html",controller:"EdittodoController",controllerAs:"editTodo"},"main@app":{templateUrl:"html/main/main.all/all.index.html",controller:"AlltaskController",controllerAs:"todo"}}})}function e(t,e,n){var o=this,a=t.getIdData();o.idEdit=a[0],o.task=e.get({},{id:a[0]}),o.editTask=function(){o.newTask={id:a[0],project:o.task.project,label:o.task.label,name:o.task.name,dateNum:o.task.dateNum,headerComment:o.task.headerComment,comment:o.task.comment},o.newTask.dateNum=new Date(o.task.dateNum),e.update(o.newTask),n.go("app.all")},o.cancelEdit=function(){n.go("app.all")}}angular.module("app.alltodo.edit",["app.alltodo"]).config(t).controller("EdittodoController",e),t.$inject=["$stateProvider"],e.$inject=["isId","Alltasks","$state"]}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJnbG9iYWwuanMiLCJmaWx0ZXJzLmpzIiwiY29udGVudC9jb250ZW50Q29udHJvbGxlci5qcyIsImxvZ2luL2xvZ2luQ29udHJvbGxlci5qcyIsIm1haW4vbWFpbkNvbnRyb2xsZXIuanMiLCJtZW51L21lbnVDb250cm9sbGVyLmpzIiwidXRpbGl0aWVzL3V0aWxpdGllc0NvbnRyb2xsZXIuanMiLCJtYWluL21haW4uYWxsL2FsbENvbnRyb2xsZXIuanMiLCJtYWluL21haW4uYXJjaGl2ZWQvYXJjaGl2ZWRDb250cm9sbGVyLmpzIiwibWFpbi9tYWluLnRhc2tTZXZlbi9zZXZlbkNvbnRyb2xsZXIuanMiLCJtYWluL21haW4udG9kYXkvdG9kYXlDb250cm9sbGVyLmpzIiwibWFpbi9tYWluLmFsbC9jcmVhdGUuYWxsL2NyZWF0ZWFsbENvbnRyb2xsZXIuanMiLCJtYWluL21haW4uYWxsL2VkaXQuYWxsL2VkaXRhbGxDb250cm9sbGVyLmpzIl0sIm5hbWVzIjpbImNvbmZpZyIsIiR1cmxSb3V0ZXJQcm92aWRlciIsIiRodHRwUHJvdmlkZXIiLCIkc3RhdGVQcm92aWRlciIsIm90aGVyd2lzZSIsInN0YXRlIiwidXJsIiwidmlld3MiLCJjb250ZW50QCIsInRlbXBsYXRlVXJsIiwiY29udHJvbGxlciIsImNvbnRyb2xsZXJBcyIsIm1lbnUiLCJhbmd1bGFyIiwibW9kdWxlIiwiY29uc3RhbnQiLCIkaW5qZWN0IiwiTG9naW4iLCIkcmVzb3VyY2UiLCJhcGliYXNlIiwiZ2V0IiwibWV0aG9kIiwiaXNBcnJheSIsIlN0YXR1c2NvZGUiLCJpc0Vycm9yIiwidmFsdWUiLCJUb2tlbiIsImtleSIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJzZXQiLCJ2YWwiLCJzZXRJdGVtIiwiVXNlciIsIk1lbnVsaXN0Iiwic2F2ZSIsInF1ZXJ5IiwiZGVsZXRlIiwiUHJvamVjdGxpc3QiLCJQcm9qZWN0bGFiZWwiLCJQcm9qZWN0ZmlsdGVyIiwiQWxsdGFza3MiLCJkYXRlSnNvbiIsImZyb21Kc29uIiwiZGF0ZU51bSIsIkRhdGUiLCJpZCIsInRyYW5zZm9ybVJlc3BvbnNlIiwidXBkYXRlIiwicmVtb3ZlIiwiaXNJZCIsImlzSWRzIiwiYWRkSWREYXRhIiwibmV3SUQiLCJwdXNoIiwiZ2V0SWREYXRhIiwiZmFjdG9yeSIsInNlcnZpY2UiLCJmaWx0ZXIiLCJpbnB1dCIsInN0YXJ0Iiwic2xpY2UiLCJDb250ZW50Y29udHJvbGxlciIsIiRzY29wZSIsInRvZ2dsZUVsbSIsImxpbmsiLCJzY29wZSIsImVsZW0iLCJhdHRycyIsIm9uIiwiJCIsInRvZ2dsZUNsYXNzIiwiZmluZCIsImh0bWwiLCJ0ZXh0IiwiZGlyZWN0aXZlIiwicmVzdHJpY3QiLCJMb2dpbkNvbnRyb2xsZXIiLCIkc3RhdGUiLCJ0aGlzIiwic3VibWl0dGVkIiwic3VibWl0TG9naW4iLCJ1c2VybG9naW4iLCJlbWFpbCIsInBhc3MiLCJsb2dpblJlc3VsdCIsImlzTm90VmFsaWQiLCJpc1ZhbGlkIiwiZ28iLCJjc3MiLCJkaXNwbGF5IiwiTWFpbkNvbnRyb2xsZXIiLCJNZW51Q29udHJvbGxlciIsIiRzdGF0ZVBhcmFtcyIsIm1lbnVMaXN0IiwicHJvamVjdExpc3QiLCJwcm9qZWN0TGFiZWwiLCJwcm9qZWN0RmlsdGVyIiwiZWxtUGFuZWwiLCIkdGV4dFRhcmdldCIsIlV0aWxpdGllc0NvbnRyb2xsZXIiLCJ0aW1lIiwidXRpbGl0aWVzQGFwcCIsIm1haW5AYXBwIiwicGFyYW1zIiwiQWxsdGFza0NvbnRyb2xsZXIiLCJudW1iZXJDdXJyZW50IiwicGFnZVNpemUiLCJhbGxUYXNrcyIsIm51bWJlck9mUGFnZXMiLCJNYXRoIiwiY2VpbCIsImxlbmd0aCIsInJlbW92ZVRhc2siLCJ0YXNrIiwiZWRpdFRhc2siLCJjb250cm9sbGVyQXJjaGl2ZSIsImNvbnRyb2xsZXJOZXh0RGF5cyIsInRvZGF5RGF0ZSIsIm1vbWVudCIsImZvcm1hdCIsIndlZWtEYXRlIiwid2Vla2RheSIsImNvbnNvbGUiLCJsb2ciLCJuZXh0U2V2ZW5FdmVudHMiLCJhcnJheVBvcyIsImZvckVhY2giLCJUb2RheUNvbnRyb2xsZXIiLCJ0b2RvVGFza3MiLCJvdmVybGF5QCIsIkNyZWF0ZXRvZG9Db250cm9sbGVyIiwicHJpb3JpdHkiLCJ1c2VyIiwidXNlckRhdGEiLCJuYW1lIiwiY3JlYXRlVGFzayIsImZvcm1BZGRUYXNrcyIsIiR2YWxpZCIsImRhdGEiLCJwcm9qZWN0IiwibGFiZWwiLCJoZWFkZXJDb21tZW50IiwiY29tbWVudCIsImRvbmUiLCJyZW1vdmVDbGFzcyIsImFkZENsYXNzIiwicmVzZXRWYWwiLCJFZGl0dG9kb0NvbnRyb2xsZXIiLCJlZGl0SWQiLCJpZEVkaXQiLCJuZXdUYXNrIiwiY2FuY2VsRWRpdCJdLCJtYXBwaW5ncyI6IkNBQUEsV0FFQSxZQTBCQSxTQUFBQSxHQUFBQyxFQUFBQyxFQUFBQyxHQUVBRixFQUFBRyxVQUFBLEtBRUFELEVBQ0FFLE1BQUEsU0FDQUMsSUFBQSxHQUNBQyxPQUNBQyxZQUNBQyxZQUFBLDhCQUNBQyxXQUFBLGtCQUNBQyxhQUFBLFlBSUFOLE1BQUEsT0FDQUMsSUFBQSxXQUNBQyxPQUNBSyxNQUNBSCxZQUFBLDRCQUNBQyxXQUFBLGlCQUNBQyxhQUFBLFlBRUFILFlBQ0FDLFlBQUEsa0NBQ0FDLFdBQUEsb0JBQ0FDLGFBQUEsY0FsREFFLFFBQUFDLE9BQUEsU0FDQUQsU0FBQUMsT0FBQSxPQUNBLFlBQ0EsWUFDQSxhQUNBLFVBQ0EsYUFDQSxXQUNBLFlBQ0EsV0FDQSxjQUNBLGNBQ0EsV0FDQSxZQUNBLGNBQ0EsZ0JBR0FDLFNBQUEsV0FBQSxZQUNBQSxTQUFBLFVBQUEseUJBQ0FBLFNBQUEsYUFBQSxTQUVBZixPQUFBQSxHQXFDQ0EsRUFBT2dCLFNBQVcscUJBQXNCLGdCQUFpQixxQkMvRDFELFdBRUEsWUFLQSxTQUFBQyxHQUFBQyxFQUFBQyxHQUNBLE1BQUFELEdBQUFDLEVBQUEsaUJBRUFDLEtBQUFDLE9BQUEsTUFBQUMsU0FBQSxLQUtBLFFBQUFDLEtBQ0EsT0FD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QUFBakMsU0FBQSxXQUVBaUMsRUFBQUcsU0FFQXpHLEdBQUF1RyxFQUFBLEdBQ0FULFFBQUFRLEVBQUFsQyxLQUFBMEIsUUFDQUMsTUFBQU8sRUFBQWxDLEtBQUEyQixNQUNBTixLQUFBYSxFQUFBbEMsS0FBQXFCLEtBQ0EzRixRQUFBd0csRUFBQWxDLEtBQUF0RSxRQUNBa0csY0FBQU0sRUFBQWxDLEtBQUE0QixjQUNBQyxRQUFBSyxFQUFBbEMsS0FBQTZCLFNBSUFLLEVBQUFHLFFBQUEzRyxRQUFBLEdBQUFDLE1BQUF1RyxFQUFBbEMsS0FBQXRFLFNBQ0FILEVBQUFPLE9BQUFvRyxFQUFBRyxTQUNBekUsRUFBQVUsR0FBQSxZQUlBNEQsRUFBQUksV0FBQSxXQUNBMUUsRUFBQVUsR0FBQSxZQTNEQTNFLFFBQUFDLE9BQUEsb0JBQ0EsZ0JBRUFkLE9BQUFBLEdBQ0FVLFdBQUEscUJBQUEwSSxHYm9zQkNwSixFQUFPZ0IsU0FBVyxrQkFtQ2xCb0ksRUFBbUJwSSxTQUFXLE9BQVEsV0FBWSIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uICgpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cblx0dmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdhcHAnLCBbXSk7XG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAnLFtcblx0XHQndWkucm91dGVyJyxcblx0XHQnbmdBbmltYXRlJyxcblx0XHQnbmdSZXNvdXJjZScsXG5cdFx0J2FwcC5hcGknLFxuXHRcdCdhcHAuZ2xvYmFsJyxcblx0XHQnYXBwLm1lbnUnLFxuXHRcdCdhcHAubG9naW4nLFxuXHRcdCdhcHAubWFpbicsXG5cdFx0J2FwcC51dGlsaXR5Jyxcblx0XHQnYXBwLmFsbHRvZG8nLFxuXHRcdCdhcHAubmV4dCcsXG5cdFx0J2FwcC50b2RheScsXG5cdFx0J2FwcC5jb250ZW50Jyxcblx0XHQnYXBwLmFyY2hpdmUnXG5cdF0pXG5cblx0LmNvbnN0YW50KCdzaXRlbmFtZScsICdhcHBsb2NhbCcpXG5cdC5jb25zdGFudCgnYXBpYmFzZScsICdodHRwOi8vbG9jYWxob3N0OjMwMDAnKVxuXHQuY29uc3RhbnQoJ2FwaXZlcnNpb24nLCAnL3YxLjAnKVxuXG5cdC5jb25maWcoY29uZmlnKTtcblxuXHRmdW5jdGlvbiBjb25maWcoJHVybFJvdXRlclByb3ZpZGVyLCAkaHR0cFByb3ZpZGVyLCAkc3RhdGVQcm92aWRlcikge1xuXG5cdFx0JHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZSgnLycpO1xuXG5cdFx0JHN0YXRlUHJvdmlkZXJcblx0XHRcdC5zdGF0ZSgnbG9naW4nLCB7XG5cdFx0XHRcdHVybDonJyxcblx0XHRcdFx0dmlld3M6IHtcblx0XHRcdFx0XHQnY29udGVudEAnOiB7XG5cdFx0XHRcdFx0XHR0ZW1wbGF0ZVVybDogJ2h0bWwvbG9naW4vbG9naW4uaW5kZXguaHRtbCcsXG5cdFx0XHRcdFx0XHRjb250cm9sbGVyOiAnTG9naW5Db250cm9sbGVyJyxcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXJBczogJ2xvZ2luJ1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSlcblx0XHRcdC5zdGF0ZSgnYXBwJywge1xuXHRcdFx0XHR1cmw6ICcvY29udGVudCcsXG5cdFx0XHRcdHZpZXdzOiB7XG5cdFx0XHRcdFx0J21lbnUnOiB7XG5cdFx0XHRcdFx0XHR0ZW1wbGF0ZVVybDogJ2h0bWwvbWVudS9tZW51LmluZGV4Lmh0bWwnLFxuXHRcdFx0XHRcdFx0Y29udHJvbGxlcjogJ01lbnVDb250cm9sbGVyJyxcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXJBczogJ21lbnVEYXRhJ1xuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0J2NvbnRlbnRAJzoge1xuXHRcdFx0XHRcdFx0dGVtcGxhdGVVcmw6ICdodG1sL2NvbnRlbnQvY29udGVudC5pbmRleC5odG1sJyxcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXI6ICdDb250ZW50Y29udHJvbGxlcicsXG5cdFx0XHRcdFx0XHRjb250cm9sbGVyQXM6ICdjb250ZW50J1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cblx0XHQvL2p3dEludGVyY2VwdG9yUHJvdmlkZXIudG9rZW5HZXR0ZXIucHVzaCgnand0SW50ZXJjZXB0b3InKTtcblx0XHQvLyRodHRwUHJvdmlkZXIuaW50ZXJjZXB0b3JzLnB1c2goJ2F1dGhJbnRlcmNlcHRvcicpO1xuXG5cdH1cblxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuXG5cdCd1c2Ugc3RyaWN0JztcblxuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLmFwaScsIFtdKTtcblxuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLmFwaScpLmZhY3RvcnkoJ0xvZ2luJywgTG9naW4pO1xuXHRmdW5jdGlvbiBMb2dpbigkcmVzb3VyY2UsIGFwaWJhc2UpIHtcblx0XHRyZXR1cm4gJHJlc291cmNlKGFwaWJhc2UgKyAnL3VzZXJsb2dpbicsIHt9LFxuXHRcdHtcblx0XHRcdCdnZXQnOiB7bWV0aG9kOidHRVQnLCBpc0FycmF5OiB0cnVlfVxuXHRcdH0pO1xuXHR9XG5cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5hcGknKS5mYWN0b3J5KCdTdGF0dXNjb2RlJywgU3RhdHVzY29kZSk7XG5cdGZ1bmN0aW9uIFN0YXR1c2NvZGUoKSB7XG5cdFx0cmV0dXJuIHtcblx0XHRcdGlzRXJyb3I6IGZ1bmN0aW9uKHZhbHVlKSB7IFxuXHRcdFx0XHRyZXR1cm4gKHZhbHVlID09IDEpID8gdHJ1ZSA6IGZhbHNlO1xuXHRcdFx0fVxuXHRcdH07XG5cdH1cblxuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLmFwaScpLmZhY3RvcnkoJ1Rva2VuJywgVG9rZW4pO1xuXHRmdW5jdGlvbiBUb2tlbigpIHtcblx0XHR2YXIga2V5O1xuXHRcdHJldHVybiB7XG5cdFx0XHRnZXQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRrZXkgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnaWRfdG9rZW4nKTtcblx0XHRcdFx0cmV0dXJuIGtleTtcblx0XHRcdH0sXG5cdFx0XHRzZXQ6IGZ1bmN0aW9uKHZhbCkge1xuXHRcdFx0XHRsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnaWRfdG9rZW4nLCB2YWwpO1xuXHRcdFx0XHRrZXkgPSB2YWw7XG5cdFx0XHRcdHJldHVybiBrZXk7XG5cdFx0XHR9XG5cdFx0fTtcblx0fVxuXG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAuYXBpJykuZmFjdG9yeSgnVXNlcicsIFVzZXIpO1xuXHRmdW5jdGlvbiBVc2VyKCAkcmVzb3VyY2UsIGFwaWJhc2UgKSB7XG5cdFx0cmV0dXJuICRyZXNvdXJjZShhcGliYXNlICsgJy91c2VybG9naW4nKTtcblx0fSBcblxuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLmFwaScpLmZhY3RvcnkoJ01lbnVsaXN0JywgTWVudWxpc3QpO1xuXHRmdW5jdGlvbiBNZW51bGlzdCgkcmVzb3VyY2UsIGFwaWJhc2UpIHtcblx0XHRyZXR1cm4gJHJlc291cmNlKGFwaWJhc2UgKyAnL21haW5tZW51Jywge30sIFxuXHRcdHtcblx0XHRcdFxuXHRcdFx0J2dldCc6ICAgIHttZXRob2Q6J0dFVCd9LFxuICBcdFx0XHQnc2F2ZSc6ICAge21ldGhvZDonUE9TVCd9LFxuICBcdFx0XHQncXVlcnknOiAge21ldGhvZDonR0VUJywgaXNBcnJheTp0cnVlfSxcbiAgXHRcdFx0J2RlbGV0ZSc6IHttZXRob2Q6J0RFTEVURSd9XG5cblx0XHR9KTtcblx0fVxuXG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAuYXBpJykuZmFjdG9yeSgnUHJvamVjdGxpc3QnLCBQcm9qZWN0bGlzdCk7XG5cdGZ1bmN0aW9uIFByb2plY3RsaXN0KCRyZXNvdXJjZSwgYXBpYmFzZSkge1xuXHRcdHJldHVybiAkcmVzb3VyY2UoYXBpYmFzZSArICcvcHJvamVjdCcsIHt9LCBcblx0XHR7XG5cdFx0XHRcblx0XHRcdCdnZXQnOiAgICB7bWV0aG9kOidHRVQnfSxcbiAgXHRcdFx0J3NhdmUnOiAgIHttZXRob2Q6J1BPU1QnfSxcbiAgXHRcdFx0J3F1ZXJ5JzogIHttZXRob2Q6J0dFVCcsIGlzQXJyYXk6dHJ1ZX0sXG4gIFx0XHRcdCdkZWxldGUnOiB7bWV0aG9kOidERUxFVEUnfVxuXG5cdFx0fSk7XG5cdH1cblxuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLmFwaScpLmZhY3RvcnkoJ1Byb2plY3RsYWJlbCcsIFByb2plY3RsYWJlbCk7XG5cdGZ1bmN0aW9uIFByb2plY3RsYWJlbCgkcmVzb3VyY2UsIGFwaWJhc2UpIHtcblx0XHRyZXR1cm4gJHJlc291cmNlKGFwaWJhc2UgKyAnL2xhYmVscycsIHt9LCBcblx0XHR7XG5cdFx0XHRcblx0XHRcdCdnZXQnOiAgICB7bWV0aG9kOidHRVQnfSxcbiAgXHRcdFx0J3NhdmUnOiAgIHttZXRob2Q6J1BPU1QnfSxcbiAgXHRcdFx0J3F1ZXJ5JzogIHttZXRob2Q6J0dFVCcsIGlzQXJyYXk6dHJ1ZX0sXG4gIFx0XHRcdCdkZWxldGUnOiB7bWV0aG9kOidERUxFVEUnfVxuXG5cdFx0fSk7XG5cdH1cblxuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLmFwaScpLmZhY3RvcnkoJ1Byb2plY3RmaWx0ZXInLCBQcm9qZWN0ZmlsdGVyKTtcblx0ZnVuY3Rpb24gUHJvamVjdGZpbHRlcigkcmVzb3VyY2UsIGFwaWJhc2UpIHtcblx0XHRyZXR1cm4gJHJlc291cmNlKGFwaWJhc2UgKyAnL2ZpbHRlcnMnLCB7fSwgXG5cdFx0e1xuXHRcdFx0XG5cdFx0XHQnZ2V0JzogICAge21ldGhvZDonR0VUJ30sXG4gIFx0XHRcdCdzYXZlJzogICB7bWV0aG9kOidQT1NUJ30sXG4gIFx0XHRcdCdxdWVyeSc6ICB7bWV0aG9kOidHRVQnLCBpc0FycmF5OnRydWV9LFxuICBcdFx0XHQnZGVsZXRlJzoge21ldGhvZDonREVMRVRFJ31cblxuXHRcdH0pO1xuXHR9XG5cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5hcGknKS5mYWN0b3J5KCdBbGx0YXNrcycsIEFsbHRhc2tzKTtcblx0ZnVuY3Rpb24gQWxsdGFza3MoJHJlc291cmNlLCBhcGliYXNlKSB7XG5cblx0XHR2YXIgZGF0ZUpzb24gPSBmdW5jdGlvbiAoIEFsbHRhc2tzICkge1xuXHRcdFx0QWxsdGFza3MgPSBhbmd1bGFyLmZyb21Kc29uKEFsbHRhc2tzKTtcblx0XHRcdEFsbHRhc2tzLmRhdGVOdW0gPSBuZXcgRGF0ZSAoQWxsdGFza3MuZGF0ZU51bSk7XG5cdFx0XHRyZXR1cm4gQWxsdGFza3M7XHRcblx0XHR9O1xuXG5cdFx0cmV0dXJuICRyZXNvdXJjZShhcGliYXNlICsgJy90YXNrLzppZCcsIHtpZDonQGlkJ30sIFxuXHRcdHtcblx0XHRcdFxuXHRcdFx0J2dldCc6ICAgIHttZXRob2Q6J0dFVCcsIHRyYW5zZm9ybVJlc3BvbnNlOiBkYXRlSnNvbiB9LFxuICBcdFx0XHQnc2F2ZSc6ICAge21ldGhvZDonUE9TVCd9LFxuICBcdFx0XHQndXBkYXRlJzoge21ldGhvZDonUFVUJyB9LFxuICBcdFx0XHQncXVlcnknOiAge21ldGhvZDonR0VUJywgaXNBcnJheTp0cnVlfSxcbiAgXHRcdFx0J3JlbW92ZSc6IHttZXRob2Q6J0RFTEVURSd9LFxuICBcdFx0XHQnZGVsZXRlJzoge21ldGhvZDonREVMRVRFJ31cblxuXHRcdH0pO1xuXHR9XG5cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5hcGknKS5zZXJ2aWNlKCdpc0lkJywgaXNJZCk7XG5cdGZ1bmN0aW9uIGlzSWQgKCkge1xuXG5cdFx0dmFyIGlzSWRzID0gW107XG5cblx0XHR2YXIgYWRkSWREYXRhID0gZnVuY3Rpb24gKG5ld0lEKSB7XG5cdFx0XHRpc0lkcy5wdXNoKG5ld0lEKTtcblx0XHR9O1xuXG5cdFx0dmFyIGdldElkRGF0YSA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdHJldHVybiBpc0lkcztcblx0XHR9O1xuXG5cdFx0cmV0dXJuIHtcblx0XHRcdGFkZElkRGF0YTogYWRkSWREYXRhLFxuXHRcdFx0Z2V0SWREYXRhOiBnZXRJZERhdGFcblxuXHRcdH07XG5cblx0fVxuXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuXG5cdCd1c2Ugc3RyaWN0JztcblxuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLmdsb2JhbCcsW10pXG5cblx0XHQuZmlsdGVyKCdwYWdpbmF0aW9uJywgZnVuY3Rpb24gKCkge1xuXG5cdFx0XHRyZXR1cm4gZnVuY3Rpb24gKCBpbnB1dCwgc3RhcnQgKSB7XG5cblx0XHRcdFx0c3RhcnQgPSArc3RhcnQ7XG5cdFx0XHRcdHJldHVybiBpbnB1dC5zbGljZShzdGFydCk7XG5cblx0XHRcdH07XG5cdFx0fSk7XG5cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5jb250ZW50JywgW10pXG5cdC5jb250cm9sbGVyKCdDb250ZW50Y29udHJvbGxlcicsIENvbnRlbnRjb250cm9sbGVyKVxuXHQuZGlyZWN0aXZlKCd0b2dnbGVFbG0nLCB0b2dnbGVFbG0pO1xuXG5cdGZ1bmN0aW9uIENvbnRlbnRjb250cm9sbGVyICggJHNjb3BlICkge31cblxuXHRmdW5jdGlvbiB0b2dnbGVFbG0gKCkge1xuXG5cdFx0dmFyIGRpcmVjdGl2ZSA9IHtcblx0XHRcdGxpbms6IGxpbmssXG5cdFx0XHRyZXN0cmljdDogJ0EnXG5cdFx0fVxuXG5cdFx0cmV0dXJuIGRpcmVjdGl2ZTtcblxuXHRcdGZ1bmN0aW9uIGxpbmsoc2NvcGUsIGVsZW0sIGF0dHJzKSB7XG5cblx0XHRcdGVsZW0ub24oXCJjbGlja1wiLCBmdW5jdGlvbigpIHtcblxuXHQgICAgICAgICAgICAkKCcud3JhcHBlcicpLnRvZ2dsZUNsYXNzKCdwYW5lbEFuaW1hdGVzJyk7XG5cdCAgICAgICAgICAgIGVsZW0uZmluZCgnc3BhbicpLmh0bWwoJCgnLmNsb3NlQnRuIHNwYW4nKS50ZXh0KCkgPT0gJ09wZW4nID8gJ0Nsb3NlJyA6ICdPcGVuJyk7XG5cblx0ICAgICAgICB9KTtcblxuXHRcdH1cblxuXHR9XG5cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5sb2dpbicsW10pXG5cdC5jb250cm9sbGVyKCdMb2dpbkNvbnRyb2xsZXInLCBMb2dpbkNvbnRyb2xsZXIpO1xuXG5cdGZ1bmN0aW9uIExvZ2luQ29udHJvbGxlciAoICRzdGF0ZSwgTG9naW4gKSB7XG5cblx0XHR2YXIgTG9naW5Db250cm9sbGVyID0gdGhpcztcblx0XHRMb2dpbkNvbnRyb2xsZXIuc3VibWl0dGVkID0gZmFsc2U7XG5cblx0XHRMb2dpbkNvbnRyb2xsZXIuc3VibWl0TG9naW4gPSBmdW5jdGlvbigpIHtcblxuXHRcdFx0TG9naW5Db250cm9sbGVyLnVzZXJsb2dpbiA9IHt9O1xuXHRcdFx0TG9naW5Db250cm9sbGVyLnVzZXJsb2dpbiA9IHtcblx0XHRcdFx0ZW1haWw6IExvZ2luQ29udHJvbGxlci5lbWFpbCxcblx0XHRcdFx0cGFzczogTG9naW5Db250cm9sbGVyLnBhc3Ncblx0XHRcdH07XG5cdFx0XHRcblx0XHRcdHZhciBsb2dpblJlc3VsdCA9IFtdO1xuIFx0XHRcdGxvZ2luUmVzdWx0ID0gTG9naW4uZ2V0KExvZ2luQ29udHJvbGxlci51c2VybG9naW4sIGZ1bmN0aW9uKCl7XG4gXHRcdFx0XHQodHlwZW9mKExvZ2luQ29udHJvbGxlci51c2VybG9naW4uZW1haWwpID09IFwidW5kZWZpbmVkXCIpID8gaXNOb3RWYWxpZCgpIDogaXNWYWxpZCgpO1xuXHRcdFx0fSk7XG5cdFx0XHRcdFxuXHRcdFx0dmFyIGlzVmFsaWQgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0JHN0YXRlLmdvKCdhcHAnKTtcblx0XHRcdH07XG5cblx0XHRcdHZhciBpc05vdFZhbGlkID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdCQoJy5lcnJvckxvZ2luJykuY3NzKHsnZGlzcGxheSc6J2Jsb2NrJ30pO1xuXHRcdFx0fTtcblxuXG5cdFx0XHQkKCdpbnB1dCcpLnZhbCgnJyk7XG5cblx0XHR9O1xuXHRcdFxuXG5cdH1cblxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuXG5cdCd1c2Ugc3RyaWN0JztcblxuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLm1haW4nLFtdKVxuXHQvLy5jb25maWcoY29uZmlnKVxuXHQuY29udHJvbGxlcignTWFpbkNvbnRyb2xsZXInLCBNYWluQ29udHJvbGxlcik7XG5cbi8qXG5cdGZ1bmN0aW9uIGNvbmZpZyAoICRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIgKSB7XG5cblx0XHQkc3RhdGVQcm92aWRlclxuXHRcdFx0LnN0YXRlKCdhcHAuYWxsJywge1xuXHRcdFx0XHR1cmw6Jy9hbGxUYXNrcycsXG5cdFx0XHRcdGFic3RyYWN0OiBmYWxzZSxcblx0XHRcdFx0dmlld3M6IHtcblx0XHRcdFx0XHQndXRpbGl0aWVzQGFwcCc6IHtcblx0XHRcdFx0XHRcdHRlbXBsYXRlVXJsOiAnaHRtbC91dGlsaXRpZXMvdXRpbGl0aWVzLmluZGV4Lmh0bWwnLFxuXHRcdFx0XHRcdFx0Y29udHJvbGxlcjogJ1V0aWxpdGllc0NvbnRyb2xsZXInLFxuXHRcdFx0XHRcdFx0Y29udHJvbGxlckFzOiAnVXRpbGl0aWVzJ1xuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0J21haW5AYXBwJzoge1xuXHRcdFx0XHRcdFx0dGVtcGxhdGVVcmw6ICdodG1sL21haW4vbWFpbi5pbmRleC5odG1sJyxcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXI6ICdNYWluQ29udHJvbGxlcidcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdH1cbiovXG5cdGZ1bmN0aW9uIE1haW5Db250cm9sbGVyKCkge31cblxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuXG5cdCd1c2Ugc3RyaWN0JztcblxuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLm1lbnUnLFtdKVxuXHQuY29udHJvbGxlcignTWVudUNvbnRyb2xsZXInLCBNZW51Q29udHJvbGxlcilcblx0LmRpcmVjdGl2ZSgnZWxtUGFuZWwnLCBlbG1QYW5lbCk7XG5cblx0ZnVuY3Rpb24gTWVudUNvbnRyb2xsZXIoIE1lbnVsaXN0LCBQcm9qZWN0bGlzdCwgUHJvamVjdGxhYmVsLCBQcm9qZWN0ZmlsdGVyLCAkc3RhdGVQYXJhbXMgKSB7XG5cblx0XHR2YXIgTWVudUNvbnRyb2xsZXIgPSB0aGlzO1xuXG5cdFx0TWVudUNvbnRyb2xsZXIubWVudUxpc3QgPSBNZW51bGlzdC5xdWVyeSgpO1xuXHRcdE1lbnVDb250cm9sbGVyLnByb2plY3RMaXN0ID0gUHJvamVjdGxpc3QucXVlcnkoKTtcblx0XHRNZW51Q29udHJvbGxlci5wcm9qZWN0TGFiZWwgPSBQcm9qZWN0bGFiZWwucXVlcnkoKTtcblx0XHRNZW51Q29udHJvbGxlci5wcm9qZWN0RmlsdGVyID0gUHJvamVjdGZpbHRlci5xdWVyeSgpO1xuXG5cdH1cblxuXHRmdW5jdGlvbiBlbG1QYW5lbCgpIHtcblxuXHRcdHZhciBkaXJlY3RpdmUgPSB7XG5cdFx0XHRsaW5rOiBsaW5rLFxuXHRcdFx0cmVzdHJpY3Q6ICdBJ1xuXHRcdH07XG5cblx0XHRyZXR1cm4gZGlyZWN0aXZlO1xuXG5cdFx0ZnVuY3Rpb24gbGluayAgKHNjb3BlLCBlbGVtLCBhdHRycykge1xuXG5cdFx0XHRlbGVtLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XG5cdFx0XHRcdHZhciAkdGV4dFRhcmdldCA9ICQoJy5jb250ZW50IC5jbG9zZUJ0bicpLmZpbmQoJ3NwYW4nKTtcblx0XHRcdFx0JCgnLndyYXBwZXInKS50b2dnbGVDbGFzcygncGFuZWxBbmltYXRlcycpO1xuXHRcdFx0XHQkdGV4dFRhcmdldC5odG1sKCAkdGV4dFRhcmdldC50ZXh0KCkgPT0gJ0Nsb3NlJyA/ICdPcGVuJyA6ICdDbG9zZScpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHR9XG5cbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG5cblx0J3VzZSBzdHJpY3QnO1xuXG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAudXRpbGl0eScsW10pXG5cdC5jb250cm9sbGVyKCdVdGlsaXRpZXNDb250cm9sbGVyJywgVXRpbGl0aWVzQ29udHJvbGxlcik7XG5cblx0ZnVuY3Rpb24gVXRpbGl0aWVzQ29udHJvbGxlcigpIHtcblx0XHRcblx0XHR2YXIgVXRpbGl0aWVzQ29udHJvbGxlciA9IHRoaXM7XG5cdFx0VXRpbGl0aWVzQ29udHJvbGxlci50aW1lID0gbmV3IERhdGUoKTtcblx0XHRcblx0fSBcblxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuXG5cdCd1c2Ugc3RyaWN0JztcblxuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLmFsbHRvZG8nLCBbXG5cdFx0J2FwcC5hbGx0b2RvLmNyZWF0ZScsXG5cdFx0J2FwcC5hbGx0b2RvLmVkaXQnXG5cdF0pXG5cdC5jb25maWcoY29uZmlnKVxuXHQuY29udHJvbGxlcignQWxsdGFza0NvbnRyb2xsZXInLCBBbGx0YXNrQ29udHJvbGxlcik7XG5cblx0ZnVuY3Rpb24gY29uZmlnICggJHN0YXRlUHJvdmlkZXIgKSB7XG5cblx0XHQkc3RhdGVQcm92aWRlclxuXHRcdFx0LnN0YXRlKCdhcHAuYWxsJywge1xuXHRcdFx0XHR1cmw6Jy9hbGx0YXNrLzppZCcsXG5cdFx0XHRcdHZpZXdzOiB7XG5cdFx0XHRcdFx0J3V0aWxpdGllc0BhcHAnOiB7XG5cdFx0XHRcdFx0XHR0ZW1wbGF0ZVVybDogJ2h0bWwvdXRpbGl0aWVzL3V0aWxpdGllcy5pbmRleC5odG1sJyxcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXI6ICdVdGlsaXRpZXNDb250cm9sbGVyJyxcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXJBczogJ3V0aWxpdGllcydcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdCdtYWluQGFwcCc6IHtcblx0XHRcdFx0XHRcdHBhcmFtczpbJ2lkJ10sXG5cdFx0XHRcdFx0XHR0ZW1wbGF0ZVVybDogJ2h0bWwvbWFpbi9tYWluLmFsbC9hbGwuaW5kZXguaHRtbCcsXG5cdFx0XHRcdFx0XHRjb250cm9sbGVyOiAnQWxsdGFza0NvbnRyb2xsZXInLFxuXHRcdFx0XHRcdFx0Y29udHJvbGxlckFzOiAndG9kbydcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHR9XG5cblx0ZnVuY3Rpb24gQWxsdGFza0NvbnRyb2xsZXIgKCBBbGx0YXNrcywgJHN0YXRlLCBpc0lkICkge1xuXG5cdFx0dmFyIEFsbHRhc2tDb250cm9sbGVyID0gdGhpcztcblx0XHRcdEFsbHRhc2tDb250cm9sbGVyLm51bWJlckN1cnJlbnQgPSAwO1xuXHRcdFxuXHRcdEFsbHRhc2tDb250cm9sbGVyLnBhZ2VTaXplID0gMztcblx0XHRBbGx0YXNrQ29udHJvbGxlci5hbGxUYXNrcyA9IEFsbHRhc2tzLnF1ZXJ5KCk7XG5cblx0XHRBbGx0YXNrQ29udHJvbGxlci5udW1iZXJPZlBhZ2VzID0gIGZ1bmN0aW9uICgpIHtcblx0XHRcdHJldHVybiBNYXRoLmNlaWwoQWxsdGFza0NvbnRyb2xsZXIuYWxsVGFza3MubGVuZ3RoIC8gQWxsdGFza0NvbnRyb2xsZXIucGFnZVNpemUpO1xuXHRcdH07XHRcdFxuXHRcdEFsbHRhc2tDb250cm9sbGVyLnJlbW92ZVRhc2sgPSBmdW5jdGlvbiAodGFzaykge1xuXHRcdFx0QWxsdGFza3MuZGVsZXRlKHt9LCB7J2lkJzogdGFzay5pZH0sIGZ1bmN0aW9uICgpIHtcblx0XHRcdCAgICBBbGx0YXNrQ29udHJvbGxlci5hbGxUYXNrcyA9IEFsbHRhc2tzLnF1ZXJ5KCk7XG5cdFx0XHR9KTtcblx0XHR9O1xuXHRcdEFsbHRhc2tDb250cm9sbGVyLmVkaXRUYXNrID0gZnVuY3Rpb24gKHRhc2spIHtcblx0XHRcdGlzSWQuYWRkSWREYXRhKHRhc2suaWQpO1xuXHRcdFx0JHN0YXRlLmdvKCdhcHAuZWRpdCcpO1xuXHRcdH07XG5cdFx0XG5cdH1cblxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAuYXJjaGl2ZScsW10pXG5cdC5jb25maWcoY29uZmlnKVxuXHQuY29udHJvbGxlcignY29udHJvbGxlckFyY2hpdmUnLCBjb250cm9sbGVyQXJjaGl2ZSk7XG5cblx0ZnVuY3Rpb24gY29uZmlnICggJHN0YXRlUHJvdmlkZXIsICR1cmxSb3V0ZXJQcm92aWRlciApIHtcblx0XHRcblx0XHQkc3RhdGVQcm92aWRlclxuXHRcdFx0LnN0YXRlKCdhcHAuYXJjaGl2ZScsIHtcblx0XHRcdFx0dXJsOiAnL2FyY2hpdmUnLFxuXHRcdFx0XHR2aWV3czoge1xuXHRcdFx0XHRcdCd1dGlsaXRpZXNAYXBwJzoge1xuXHRcdFx0XHRcdHRlbXBsYXRlVXJsOiAnaHRtbC91dGlsaXRpZXMvdXRpbGl0aWVzLmluZGV4Lmh0bWwnLFxuXHRcdFx0XHRcdGNvbnRyb2xsZXI6ICdVdGlsaXRpZXNDb250cm9sbGVyJyxcblx0XHRcdFx0XHRjb250cm9sbGVyQXM6ICd1dGlsaXRpZXMnXG5cdFx0XHRcdH0sXG5cdFx0XHRcdCdtYWluQGFwcCc6IHtcblx0XHRcdFx0XHR0ZW1wbGF0ZVVybDogJ2h0bWwvbWFpbi9tYWluLmFyY2hpdmVkL2FyY2hpdmVkLmluZGV4Lmh0bWwnLFxuXHRcdFx0XHRcdGNvbnRyb2xsZXI6ICdjb250cm9sbGVyQXJjaGl2ZScsXG5cdFx0XHRcdFx0Y29udHJvbGxlckFzOiAnYXJjaGl2ZWQnXG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXG5cdGZ1bmN0aW9uIGNvbnRyb2xsZXJBcmNoaXZlKCkge31cblxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuXG5cdCd1c2Ugc3RyaWN0JztcblxuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLm5leHQnLFtdKVxuXHQuY29uZmlnKGNvbmZpZylcblx0LmNvbnRyb2xsZXIoJ2NvbnRyb2xsZXJOZXh0RGF5cycsIGNvbnRyb2xsZXJOZXh0RGF5cyk7XG5cblx0ZnVuY3Rpb24gY29uZmlnICggJHN0YXRlUHJvdmlkZXIsICR1cmxSb3V0ZXJQcm92aWRlciApIHtcblxuXHRcdCRzdGF0ZVByb3ZpZGVyXG5cdFx0XHQuc3RhdGUoJ2FwcC5uZXh0Jywge1xuXHRcdFx0XHR1cmw6Jy9uZXh0LzppZCcsXG5cdFx0XHRcdHZpZXdzOiB7XG5cdFx0XHRcdFx0J3V0aWxpdGllc0BhcHAnOiB7XG5cdFx0XHRcdFx0XHR0ZW1wbGF0ZVVybDogJ2h0bWwvdXRpbGl0aWVzL3V0aWxpdGllcy5pbmRleC5odG1sJyxcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXI6ICdVdGlsaXRpZXNDb250cm9sbGVyJyxcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXJBczogJ3V0aWxpdGllcydcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdCdtYWluQGFwcCc6IHtcblx0XHRcdFx0XHRcdHRlbXBsYXRlVXJsOiAnaHRtbC9tYWluL21haW4udGFza1NldmVuL3NldmVuLmluZGV4Lmh0bWwnLFxuXHRcdFx0XHRcdFx0Y29udHJvbGxlcjogJ2NvbnRyb2xsZXJOZXh0RGF5cycsXG5cdFx0XHRcdFx0XHRjb250cm9sbGVyQXM6ICduZXh0U2V2ZW4nXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0fVxuXG5cdGZ1bmN0aW9uIGNvbnRyb2xsZXJOZXh0RGF5cyAoIEFsbHRhc2tzLCAkc3RhdGUgKSB7XG5cblx0XHR2YXIgY29udHJvbGxlck5leHREYXlzID0gdGhpcztcblxuXHRcdGNvbnRyb2xsZXJOZXh0RGF5cy50b2RheURhdGUgPSBtb21lbnQoKS5mb3JtYXQoJ0wnKTtcblx0XHRjb250cm9sbGVyTmV4dERheXMud2Vla0RhdGUgPSBtb21lbnQoKS53ZWVrZGF5KDcpLmZvcm1hdCgnTCcpO1xuXG5cdFx0Y29uc29sZS5sb2coIGNvbnRyb2xsZXJOZXh0RGF5cy50b2RheURhdGUgKTtcblx0XHRjb25zb2xlLmxvZyggY29udHJvbGxlck5leHREYXlzLndlZWtEYXRlICk7XG5cblx0XHRjb250cm9sbGVyTmV4dERheXMubmV4dFNldmVuRXZlbnRzID0gQWxsdGFza3MucXVlcnkoe30sIGZ1bmN0aW9uKCkge1xuXG5cdFx0XHR2YXIgYXJyYXlQb3MgPSBbXTtcblxuXHRcdFx0YW5ndWxhci5mb3JFYWNoKGNvbnRyb2xsZXJOZXh0RGF5cy5uZXh0U2V2ZW5FdmVudHMsIGZ1bmN0aW9uICh2YWx1ZSwga2V5KSB7XG5cblx0XHRcdFx0aWYgKCBtb21lbnQodmFsdWUuZGF0ZU51bSkuZm9ybWF0KCdMJykgPj0gY29udHJvbGxlck5leHREYXlzLnRvZGF5RGF0ZSAmJiBtb21lbnQodmFsdWUuZGF0ZU51bSkuZm9ybWF0KCdMJykgPD0gY29udHJvbGxlck5leHREYXlzLndlZWtEYXRlICkge1xuXHRcdFx0XHRcdGFycmF5UG9zLnB1c2godmFsdWUpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdFxuXHRcdFx0fSk7XG5cblx0XHRcdGNvbnRyb2xsZXJOZXh0RGF5cy5uZXh0U2V2ZW5FdmVudHMgPSBhcnJheVBvcztcblxuXHRcdH0pO1xuXHR9XG5cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC50b2RheScsW10pXG5cdC5jb25maWcoY29uZmlnKVxuXHQuY29udHJvbGxlcignVG9kYXlDb250cm9sbGVyJywgVG9kYXlDb250cm9sbGVyKTtcblx0Ly8uZmlsdGVyKCdmaWx0ZXJUb2RheUV2ZW50cycsIGZpbHRlclRvZGF5RXZlbnRzKTtcblxuXHRmdW5jdGlvbiBjb25maWcgKCAkc3RhdGVQcm92aWRlciwgJHVybFJvdXRlclByb3ZpZGVyICkge1xuXG5cdFx0JHN0YXRlUHJvdmlkZXJcblx0XHRcdC5zdGF0ZSgnYXBwLnRvZGF5Jywge1xuXHRcdFx0XHR1cmw6Jy90b2RheScsXG5cdFx0XHRcdHZpZXdzOiB7XG5cdFx0XHRcdFx0J3V0aWxpdGllc0BhcHAnOiB7XG5cdFx0XHRcdFx0XHR0ZW1wbGF0ZVVybDogJ2h0bWwvdXRpbGl0aWVzL3V0aWxpdGllcy5pbmRleC5odG1sJyxcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXI6ICdVdGlsaXRpZXNDb250cm9sbGVyJyxcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXJBczogJ3V0aWxpdGllcydcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdCdtYWluQGFwcCc6IHtcblx0XHRcdFx0XHRcdHRlbXBsYXRlVXJsOiAnaHRtbC9tYWluL21haW4udG9kYXkvdG9kYXkuaW5kZXguaHRtbCcsXG5cdFx0XHRcdFx0XHRjb250cm9sbGVyOiAnVG9kYXlDb250cm9sbGVyJyxcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXJBczogJ3RvZGF5J1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdH1cblxuXHRmdW5jdGlvbiBUb2RheUNvbnRyb2xsZXIoIEFsbHRhc2tzLCAkc3RhdGUgKSB7XG5cblx0XHR2YXIgVG9kYXlDb250cm9sbGVyID0gdGhpcztcblxuXHRcdFRvZGF5Q29udHJvbGxlci50b2RheURhdGUgPSBtb21lbnQoKS5mb3JtYXQoJ0wnKTtcblxuXHRcdFRvZGF5Q29udHJvbGxlci50b2RvVGFza3MgPSBBbGx0YXNrcy5xdWVyeSh7fSwgZnVuY3Rpb24oKSB7XG5cblx0XHRcdHZhciBhcnJheVBvcyA9IFtdO1xuXHRcdFx0XHRcblx0XHRcdGFuZ3VsYXIuZm9yRWFjaChUb2RheUNvbnRyb2xsZXIudG9kb1Rhc2tzLCBmdW5jdGlvbih2YWx1ZSwga2V5KXtcblxuXHRcdFx0XHRpZiAoIFRvZGF5Q29udHJvbGxlci50b2RheURhdGUgPT0gbW9tZW50KHZhbHVlLmRhdGVOdW0pLmZvcm1hdCgnTCcpICkge1xuXHRcdFx0XHRcdGFycmF5UG9zLnB1c2godmFsdWUpO1xuXHRcdFx0XHR9XG5cblx0XHRcdH0pO1xuXG5cdFx0XHRUb2RheUNvbnRyb2xsZXIudG9kb1Rhc2tzID0gYXJyYXlQb3M7XG5cblx0XHR9KTtcblx0fVxuXG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAuYWxsdG9kby5jcmVhdGUnLFtcblx0XHQnYXBwLmFsbHRvZG8nXG5cdF0pXG5cdC5jb25maWcoY29uZmlnKVxuXHQuY29udHJvbGxlcignQ3JlYXRldG9kb0NvbnRyb2xsZXInLCBDcmVhdGV0b2RvQ29udHJvbGxlcik7XG5cblx0ZnVuY3Rpb24gY29uZmlnICggJHN0YXRlUHJvdmlkZXIgKSB7XG5cblx0XHQkc3RhdGVQcm92aWRlclxuXHRcdFx0LnN0YXRlKCdhcHAuY3JlYXRlJywge1xuXG5cdFx0XHRcdHVybDogJy9hbGx0YXNrL2NyZWF0ZScsXG5cdFx0XHRcdHZpZXdzOiB7XG5cdFx0XHRcdFx0J292ZXJsYXlAJzoge1xuXHRcdFx0XHRcdFx0dGVtcGxhdGVVcmw6ICcvaHRtbC9tYWluL21haW4uYWxsL2NyZWF0ZS5hbGwvY3JlYXRlLmFsbC5odG1sJyxcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXI6ICdDcmVhdGV0b2RvQ29udHJvbGxlcicsXG5cdFx0XHRcdFx0XHRjb250cm9sbGVyQXM6ICdjcmVhdGVUb2RvJ1xuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0J21haW5AYXBwJzoge1xuXHRcdFx0XHRcdFx0dGVtcGxhdGVVcmw6ICdodG1sL21haW4vbWFpbi5hbGwvYWxsLmluZGV4Lmh0bWwnLFxuXHRcdFx0XHRcdFx0Y29udHJvbGxlcjogJ0FsbHRhc2tDb250cm9sbGVyJyxcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXJBczogJ3RvZG8nXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdH0pO1xuXHR9XG5cblx0ZnVuY3Rpb24gQ3JlYXRldG9kb0NvbnRyb2xsZXIgKCBBbGx0YXNrcywgUHJvamVjdGxhYmVsLCBVc2VyKSB7XG5cblx0XHR2YXIgQ3JlYXRldG9kb0NvbnRyb2xsZXIgPSB0aGlzO1xuXG5cdFx0Q3JlYXRldG9kb0NvbnRyb2xsZXIuc3VibWl0dGVkID0gZmFsc2U7XG5cblx0XHRDcmVhdGV0b2RvQ29udHJvbGxlci5wcmlvcml0eSA9IFByb2plY3RsYWJlbC5xdWVyeSgpO1xuXG5cdFx0Q3JlYXRldG9kb0NvbnRyb2xsZXIudXNlciA9IFVzZXIucXVlcnkoe30sIGZ1bmN0aW9uKCkge1xuXG5cdFx0XHR2YXIgdXNlckRhdGEgPSBbXTtcblxuXHRcdFx0YW5ndWxhci5mb3JFYWNoKENyZWF0ZXRvZG9Db250cm9sbGVyLnVzZXIsIGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcblxuXHRcdFx0XHR1c2VyRGF0YS5wdXNoKENyZWF0ZXRvZG9Db250cm9sbGVyLnVzZXJba2V5XS5uYW1lKTtcblxuXHRcdFx0fSk7XG5cblx0XHRcdENyZWF0ZXRvZG9Db250cm9sbGVyLnVzZXIgPSB1c2VyRGF0YTtcblxuXHRcdH0pO1xuXG5cblx0XHRDcmVhdGV0b2RvQ29udHJvbGxlci5jcmVhdGVUYXNrID0gZnVuY3Rpb24gKCkge1xuXG5cdFx0XHRpZiAoQ3JlYXRldG9kb0NvbnRyb2xsZXIuZm9ybUFkZFRhc2tzLiR2YWxpZCkge1xuXG5cdFx0XHRcdENyZWF0ZXRvZG9Db250cm9sbGVyLmRhdGEgPSB7fTtcblxuXHRcdFx0XHRDcmVhdGV0b2RvQ29udHJvbGxlci5kYXRhID0ge1xuXG5cdFx0XHRcdFx0cHJvamVjdDogQ3JlYXRldG9kb0NvbnRyb2xsZXIucHJvamVjdCxcblx0XHRcdFx0XHRsYWJlbDogQ3JlYXRldG9kb0NvbnRyb2xsZXIubGFiZWwsXG5cdFx0XHRcdFx0bmFtZTogQ3JlYXRldG9kb0NvbnRyb2xsZXIubmFtZSxcblx0XHRcdFx0XHRkYXRlTnVtOiBDcmVhdGV0b2RvQ29udHJvbGxlci5kYXRlTnVtLFxuXHRcdFx0XHRcdGhlYWRlckNvbW1lbnQ6IENyZWF0ZXRvZG9Db250cm9sbGVyLmhlYWRlckNvbW1lbnQsXG5cdFx0XHRcdFx0Y29tbWVudDogQ3JlYXRldG9kb0NvbnRyb2xsZXIuY29tbWVudCxcblx0XHRcdFx0XHRkb25lOiAnZmFsc2UnXG5cdFx0XHRcdFx0XG5cdFx0XHRcdH07XG5cblx0XHRcdFx0QWxsdGFza3Muc2F2ZShDcmVhdGV0b2RvQ29udHJvbGxlci5kYXRhKTtcblx0XHRcdFx0JCgnZm9ybScpLmZpbmQoJ2lucHV0JykudmFsKCcnKTtcblx0XHRcdFx0JCgncC5tc2ctZXJyb3InKS5yZW1vdmVDbGFzcygnbXNnLWVycm9yJyk7XG5cblx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0JCgnZm9ybScpLmZpbmQoJ3AnKS5hZGRDbGFzcygnbXNnLWVycm9yJyk7XG5cdFx0XHRcdENyZWF0ZXRvZG9Db250cm9sbGVyLnN1Ym1pdHRlZCA9IHRydWU7XG5cblx0XHRcdH1cblxuXG5cblx0XHR9O1xuXHRcdFxuXHRcdENyZWF0ZXRvZG9Db250cm9sbGVyLnJlc2V0VmFsID0gZnVuY3Rpb24oKSB7XG5cdFx0XHQkKCdmb3JtJykuZmluZCgnaW5wdXQnKS52YWwoJycpO1xuXHRcdH07XG5cblx0fVxuXG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG5cdFxuXHQndXNlIHN0cmljdCc7XG5cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5hbGx0b2RvLmVkaXQnLFtcblx0XHQnYXBwLmFsbHRvZG8nXG5cdF0pXG5cdC5jb25maWcoY29uZmlnKVxuXHQuY29udHJvbGxlcignRWRpdHRvZG9Db250cm9sbGVyJywgRWRpdHRvZG9Db250cm9sbGVyICk7XG5cblx0ZnVuY3Rpb24gY29uZmlnICggJHN0YXRlUHJvdmlkZXIgKSB7XG5cblx0XHQkc3RhdGVQcm92aWRlclxuXHRcdFx0LnN0YXRlKCdhcHAuZWRpdCcsIHtcblxuXHRcdFx0XHR1cmw6ICcvYWxsdGFzay9lZGl0Jyxcblx0XHRcdFx0dmlld3M6IHtcblxuXHRcdFx0XHRcdCdvdmVybGF5QCc6IHtcblx0XHRcdFx0XHRcdHRlbXBsYXRlVXJsOiAnL2h0bWwvbWFpbi9tYWluLmFsbC9lZGl0LmFsbC9lZGl0LmFsbC5odG1sJyxcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXI6ICdFZGl0dG9kb0NvbnRyb2xsZXInLFxuXHRcdFx0XHRcdFx0Y29udHJvbGxlckFzOiAnZWRpdFRvZG8nXG5cdFx0XHRcdFx0XHRcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdCdtYWluQGFwcCc6IHtcblx0XHRcdFx0XHRcdHRlbXBsYXRlVXJsOiAnaHRtbC9tYWluL21haW4uYWxsL2FsbC5pbmRleC5odG1sJyxcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXI6ICdBbGx0YXNrQ29udHJvbGxlcicsXG5cdFx0XHRcdFx0XHRjb250cm9sbGVyQXM6ICd0b2RvJ1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0fVxuXG5cdGZ1bmN0aW9uIEVkaXR0b2RvQ29udHJvbGxlciAoIGlzSWQsIEFsbHRhc2tzLCAkc3RhdGUgKSB7XG5cblx0XHR2YXIgRWRpdHRvZG9Db250cm9sbGVyID0gdGhpcztcblx0XHR2YXIgZWRpdElkID0gaXNJZC5nZXRJZERhdGEoKTtcblxuXHRcdEVkaXR0b2RvQ29udHJvbGxlci5pZEVkaXQgPSBlZGl0SWRbMF07XG5cdFx0RWRpdHRvZG9Db250cm9sbGVyLnRhc2sgPSBBbGx0YXNrcy5nZXQoe30seydpZCc6IGVkaXRJZFswXX0pO1xuXG5cdFx0RWRpdHRvZG9Db250cm9sbGVyLmVkaXRUYXNrID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcblx0XHRcdEVkaXR0b2RvQ29udHJvbGxlci5uZXdUYXNrID0ge1xuXG5cdFx0XHRcdGlkOiBlZGl0SWRbMF0sXG5cdFx0XHRcdHByb2plY3Q6IEVkaXR0b2RvQ29udHJvbGxlci50YXNrLnByb2plY3QsXG5cdFx0XHRcdGxhYmVsOiBFZGl0dG9kb0NvbnRyb2xsZXIudGFzay5sYWJlbCxcblx0XHRcdFx0bmFtZTogRWRpdHRvZG9Db250cm9sbGVyLnRhc2submFtZSxcblx0XHRcdFx0ZGF0ZU51bTogRWRpdHRvZG9Db250cm9sbGVyLnRhc2suZGF0ZU51bSxcblx0XHRcdFx0aGVhZGVyQ29tbWVudDogRWRpdHRvZG9Db250cm9sbGVyLnRhc2suaGVhZGVyQ29tbWVudCxcblx0XHRcdFx0Y29tbWVudDogRWRpdHRvZG9Db250cm9sbGVyLnRhc2suY29tbWVudFxuXG5cdFx0XHR9O1xuXG5cdFx0XHRFZGl0dG9kb0NvbnRyb2xsZXIubmV3VGFzay5kYXRlTnVtID0gbmV3IERhdGUgKEVkaXR0b2RvQ29udHJvbGxlci50YXNrLmRhdGVOdW0pO1xuXHRcdFx0QWxsdGFza3MudXBkYXRlKEVkaXR0b2RvQ29udHJvbGxlci5uZXdUYXNrKTtcblx0XHRcdCRzdGF0ZS5nbygnYXBwLmFsbCcpO1xuXG5cdFx0fTtcblxuXHRcdEVkaXR0b2RvQ29udHJvbGxlci5jYW5jZWxFZGl0ID0gZnVuY3Rpb24oKSB7XG5cdFx0XHQkc3RhdGUuZ28oJ2FwcC5hbGwnKTtcdFx0XHRcblx0XHR9O1xuXHRcdFxuXHR9XG5cbn0pKCk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9