!function(){"use strict";function t(t,e,n){t.otherwise("/login"),n.state("login",{url:"/login",views:{"content@":{templateUrl:"html/login/login.index.html",controller:"LoginController",controllerAs:"login"}}}).state("login.register",{url:"/register",views:{"content@":{templateUrl:"html/register/register.index.html",controller:"RegisterController",controllerAs:"register"}}}).state("app",{url:"/content",views:{menu:{templateUrl:"html/menu/menu.index.html",controller:"MenuController",controllerAs:"menuData"},"content@":{templateUrl:"html/content/content.index.html",controller:"Contentcontroller",controllerAs:"content"}}})}function e(t,e,n,r){t.globals=n.get("globals")||{},t.globals.currentUser&&(r.defaults.headers.common.Authorization="Basic"+t.globals.currentUser.authdata),t.$on("$locationChangeStart",function(n,r,o){var a=-1===$.inArray(e.path(),["/login"]),l=t.globals.currentUser;a&&!l&&e.path("/login")})}angular.module("app",[]);angular.module("app",["ui.router","ngAnimate","ngResource","ngCookies","app.api","app.global","app.menu","app.login","app.register","app.main","app.utility","app.alltodo","app.next","app.today","app.content","app.archive"]).constant("sitename","applocal").constant("apibase","http://localhost:3000").constant("apiversion","/v1.0").config(t).run(e),t.$inject=["$urlRouterProvider","$httpProvider","$stateProvider"],e.$inject=["$rootScope","$location","$cookieStore","$http"]}(),function(){"use strict";function t(t,e,n,r,o,a){function l(t,e,n){console.log("authentication login"),r(function(){var r;o.GetByUsername(t).then(function(t){null!==t&&t.password===e?(console.log("isOK!"),r={success:!0}):(console.log("isNOTok!"),r={success:!1,message:"Username or password is incorrect"}),n(r)})},1e3)}function i(r,o){var a=c.encode(r+":"+o);console.log(a),n.globals={currentUser:{username:r,authdata:a}},t.defaults.headers.common.Authorization="Basic "+a,e.put("globals",n.globals)}function s(){n.globals={},e.remove("globals"),t.defaults.headers.common.Authorization="Basic "}var u={};return u.Login=l,u.SetCredentials=i,u.ClearCredentials=s,u}function e(t,e){function n(){return t.get(e+"/userlogin").then(s,c("Error getting all users"))}function r(n){return t.get(e+"/userlogin"+n).then(s,c("Error getting user by id"))}function o(n){return t.get(e+"/userlogin?"+n).then(s,c("Error getting user by username"))}function a(n){return t.post(e+"/userlogin",n).then(s,c("Error creating user"))}function l(n){return t.put(e+"/userlogin"+n.id,n).then(s,c("Error updating user"))}function i(n){return t["delete"](e+"/userlogin"+n).then(s,c("Error deleting user"))}function s(t){return console.log(t),t.data}function c(t){return function(){return console.log(t),{success:!1,message:t}}}var u={};return u.GetAll=n,u.GetById=r,u.GetByUsername=o,u.Create=a,u.Update=l,u.Delete=i,u}function n(){return{isError:function(t){return 1==t?!0:!1}}}function r(t,e){return t(e+"/mainmenu",{},{get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:!0},"delete":{method:"DELETE"}})}function o(t,e){return t(e+"/project",{},{get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:!0},"delete":{method:"DELETE"}})}function a(t,e){return t(e+"/labels",{},{get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:!0},"delete":{method:"DELETE"}})}function l(t,e){return t(e+"/filters",{},{get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:!0},"delete":{method:"DELETE"}})}function i(t,e){var n=function(t){return t=angular.fromJson(t),t.dateNum=new Date(t.dateNum),t};return t(e+"/task/:id",{id:"@id"},{get:{method:"GET",transformResponse:n},save:{method:"POST"},update:{method:"PUT"},query:{method:"GET",isArray:!0},remove:{method:"DELETE"},"delete":{method:"DELETE"}})}function s(){var t=[],e=function(e){t=[],t.push(e)},n=function(){return t};return{addIdData:e,getIdData:n}}angular.module("app.api",[]),angular.module("app.api").factory("AuthenticationService",t),t.$inject=["$http","$cookieStore","$rootScope","$timeout","UserService","apibase"];var c={keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(t){var e,n,r,o,a,l="",i="",s="",c=0;do e=t.charCodeAt(c++),n=t.charCodeAt(c++),i=t.charCodeAt(c++),r=e>>2,o=(3&e)<<4|n>>4,a=(15&n)<<2|i>>6,s=63&i,isNaN(n)?a=s=64:isNaN(i)&&(s=64),l=l+this.keyStr.charAt(r)+this.keyStr.charAt(o)+this.keyStr.charAt(a)+this.keyStr.charAt(s),e=n=i="",r=o=a=s="";while(c<t.length);return l},decode:function(t){var e,n,r,o,a,l="",i="",s="",c=0,u=/[^A-Za-z0-9\+\/\=]/g;u.exec(t)&&window.alert("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding."),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");do r=this.keyStr.indexOf(t.charAt(c++)),o=this.keyStr.indexOf(t.charAt(c++)),a=this.keyStr.indexOf(t.charAt(c++)),s=this.keyStr.indexOf(t.charAt(c++)),e=r<<2|o>>4,n=(15&o)<<4|a>>2,i=(3&a)<<6|s,l+=String.fromCharCode(e),64!=a&&(l+=String.fromCharCode(n)),64!=s&&(l+=String.fromCharCode(i)),e=n=i="",r=o=a=s="";while(c<t.length);return l}};angular.module("app.api").factory("UserService",e),e.$inject=["$http","apibase"],angular.module("app.api").factory("Statuscode",n),angular.module("app.api").factory("Menulist",r),r.$inject=["$resource","apibase"],angular.module("app.api").factory("Projectlist",o),o.$inject=["$resource","apibase"],angular.module("app.api").factory("Projectlabel",a),a.$inject=["$resource","apibase"],angular.module("app.api").factory("Projectfilter",l),l.$inject=["$resource","apibase"],angular.module("app.api").factory("Alltasks",i),i.$inject=["$resource","apibase"],angular.module("app.api").service("isId",s)}(),function(){"use strict";angular.module("app.global",[]).filter("pagination",function(){return function(t,e){return e=+e,t.slice(e)}})}(),function(){"use strict";function t(t){}function e(){function t(t,e,n){e.on("click",function(){$(".wrapper").toggleClass("panelAnimates"),e.find("span").html("Open"==$(".closeBtn span").text()?"Close":"Open")})}var e={link:t,restrict:"A"};return e}angular.module("app.content",[]).controller("Contentcontroller",t).directive("toggleElm",e),t.$inject=["$scope"]}(),function(){"use strict";function t(t,e){var n=this;!function(){e.ClearCredentials()}(),n.submitLogin=function(){e.Login(n.username,n.password,function(r){r.success?(console.log("yes"),e.SetCredentials(n.username),t.path("/content")):console.log("nope")})}}angular.module("app.login",[]).controller("LoginController",t),t.$inject=["$location","AuthenticationService"]}(),function(){"use strict";function t(){}angular.module("app.main",[]).controller("MainController",t)}(),function(){"use strict";function t(t,e,n,r,o){var a=this;a.menuList=t.query(),a.projectList=e.query(),a.projectLabel=n.query(),a.projectFilter=r.query()}function e(){function t(t,e,n){e.on("click",function(){var t=$(".content .closeBtn").find("span");$(".wrapper").toggleClass("panelAnimates"),t.html("Close"==t.text()?"Open":"Close")})}var e={link:t,restrict:"A"};return e}angular.module("app.menu",[]).controller("MenuController",t).directive("elmPanel",e),t.$inject=["Menulist","Projectlist","Projectlabel","Projectfilter","$stateParams"]}(),function(){"user strict";function t(){}angular.module("app.register",[]).controller("RegisterController",t)}(),function(){"use strict";function t(){var t=this;t.time=new Date}angular.module("app.utility",[]).controller("UtilitiesController",t)}(),function(){"use strict";function t(t){t.state("app.all",{url:"/alltask/:id",views:{"utilities@app":{templateUrl:"html/utilities/utilities.index.html",controller:"UtilitiesController",controllerAs:"utilities"},"main@app":{params:["id"],templateUrl:"html/main/main.all/all.index.html",controller:"AlltaskController",controllerAs:"todo"}}})}function e(t,e,n){var r=this;r.numberCurrent=0,r.pageSize=3,r.allTasks=t.query(),r.numberOfPages=function(){return Math.ceil(r.allTasks.length/r.pageSize)},r.removeTask=function(e){t["delete"]({},{id:e.id},function(){r.allTasks=t.query()})},r.editTask=function(t){n.addIdData(t.id),e.go("app.edit")}}angular.module("app.alltodo",["app.alltodo.create","app.alltodo.edit"]).config(t).controller("AlltaskController",e),t.$inject=["$stateProvider"],e.$inject=["Alltasks","$state","isId"]}(),function(){"use strict";function t(t,e){t.state("app.archive",{url:"/archive",views:{"utilities@app":{templateUrl:"html/utilities/utilities.index.html",controller:"UtilitiesController",controllerAs:"utilities"},"main@app":{templateUrl:"html/main/main.archived/archived.index.html",controller:"controllerArchive",controllerAs:"archived"}}})}function e(){}angular.module("app.archive",[]).config(t).controller("controllerArchive",e),t.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){"use strict";function t(t,e){t.state("app.next",{url:"/next/:id",views:{"utilities@app":{templateUrl:"html/utilities/utilities.index.html",controller:"UtilitiesController",controllerAs:"utilities"},"main@app":{templateUrl:"html/main/main.taskSeven/seven.index.html",controller:"controllerNextDays",controllerAs:"nextSeven"}}})}function e(t,e,n){var r=this;r.todayDate=moment().format("L"),r.weekDate=moment().weekday(7).format("L"),r.nextSevenEvents=t.query({},function(){var t=[];angular.forEach(r.nextSevenEvents,function(e,n){moment(e.dateNum).format("L")>=r.todayDate&&moment(e.dateNum).format("L")<=r.weekDate&&t.push(e)}),r.nextSevenEvents=t}),r.removeTask=function(e){t["delete"]({},{id:e.id},function(){AlltaskController.allTasks=t.query()})},r.editTask=function(t){n.addIdData(t.id),e.go("app.edit")}}angular.module("app.next",[]).config(t).controller("controllerNextDays",e),t.$inject=["$stateProvider","$urlRouterProvider"],e.$inject=["Alltasks","$state","isId"]}(),function(){"use strict";function t(t,e){t.state("app.today",{url:"/today",views:{"utilities@app":{templateUrl:"html/utilities/utilities.index.html",controller:"UtilitiesController",controllerAs:"utilities"},"main@app":{templateUrl:"html/main/main.today/today.index.html",controller:"TodayController",controllerAs:"today"}}})}function e(t,e,n){var r=this;r.todayDate=moment().format("L"),r.todoTasks=t.query({},function(){var t=[];angular.forEach(r.todoTasks,function(e,n){r.todayDate==moment(e.dateNum).format("L")&&t.push(e)}),r.todoTasks=t}),r.removeTask=function(e){t["delete"]({},{id:e.id},function(){AlltaskController.allTasks=t.query()})},r.editTask=function(t){n.addIdData(t.id),e.go("app.edit")}}angular.module("app.today",[]).config(t).controller("TodayController",e),t.$inject=["$stateProvider","$urlRouterProvider"],e.$inject=["Alltasks","$state","isId"]}(),function(){"use strict";function t(t){t.state("app.create",{url:"/alltask/create",views:{"overlay@":{templateUrl:"/html/main/main.all/create.all/create.all.html",controller:"CreatetodoController",controllerAs:"createTodo"},"main@app":{templateUrl:"html/main/main.all/all.index.html",controller:"AlltaskController",controllerAs:"todo"}}})}function e(t,e,n){var r=this;r.submitted=!1,r.priority=e.query(),r.user=n.query({},function(){var t=[];angular.forEach(r.user,function(e,n){t.push(r.user[n].name)}),r.user=t}),r.createTask=function(){r.formAddTasks.$valid?(r.data={},r.data={project:r.project,label:r.label,name:r.name,dateNum:r.dateNum,headerComment:r.headerComment,comment:r.comment,done:r.done},console.log(r.data.done),t.save(r.data),$("form").find("input").val(""),$("p.msg-error").removeClass("msg-error")):($("form").find("p").addClass("msg-error"),r.submitted=!0)},r.resetVal=function(){$("form").find("input").val("")}}angular.module("app.alltodo.create",["app.alltodo"]).config(t).controller("CreatetodoController",e),t.$inject=["$stateProvider"],e.$inject=["Alltasks","Projectlabel","User"]}(),function(){"use strict";function t(t){t.state("app.edit",{url:"/alltask/edit",views:{"overlay@":{templateUrl:"/html/main/main.all/edit.all/edit.all.html",controller:"EdittodoController",controllerAs:"editTodo"},"main@app":{templateUrl:"html/main/main.all/all.index.html",controller:"AlltaskController",controllerAs:"todo"}}})}function e(t,e,n){var r=this,o=t.getIdData();r.idEdit=o[0],r.task=e.get({},{id:o[0]}),r.editTask=function(){r.newTask={id:o[0],project:r.task.project,label:r.task.label,name:r.task.name,dateNum:r.task.dateNum,headerComment:r.task.headerComment,comment:r.task.comment,done:r.task.done},r.newTask.dateNum=new Date(r.task.dateNum),e.update(r.newTask),n.go("app.all")},r.cancelEdit=function(){n.go("app.all")}}angular.module("app.alltodo.edit",["app.alltodo"]).config(t).controller("EdittodoController",e),t.$inject=["$stateProvider"],e.$inject=["isId","Alltasks","$state"]}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJnbG9iYWwuanMiLCJmaWx0ZXJzLmpzIiwiY29udGVudC9jb250ZW50Q29udHJvbGxlci5qcyIsImxvZ2luL2xvZ2luQ29udHJvbGxlci5qcyIsIm1haW4vbWFpbkNvbnRyb2xsZXIuanMiLCJtZW51L21lbnVDb250cm9sbGVyLmpzIiwicmVnaXN0ZXIvcmVnaXN0ZXJDb250cm9sbGVyLmpzIiwidXRpbGl0aWVzL3V0aWxpdGllc0NvbnRyb2xsZXIuanMiLCJtYWluL21haW4uYWxsL2FsbENvbnRyb2xsZXIuanMiLCJtYWluL21haW4uYXJjaGl2ZWQvYXJjaGl2ZWRDb250cm9sbGVyLmpzIiwibWFpbi9tYWluLnRhc2tTZXZlbi9zZXZlbkNvbnRyb2xsZXIuanMiLCJtYWluL21haW4udG9kYXkvdG9kYXlDb250cm9sbGVyLmpzIiwibWFpbi9tYWluLmFsbC9jcmVhdGUuYWxsL2NyZWF0ZWFsbENvbnRyb2xsZXIuanMiLCJtYWluL21haW4uYWxsL2VkaXQuYWxsL2VkaXRhbGxDb250cm9sbGVyLmpzIl0sIm5hbWVzIjpbImNvbmZpZyIsIiR1cmxSb3V0ZXJQcm92aWRlciIsIiRodHRwUHJvdmlkZXIiLCIkc3RhdGVQcm92aWRlciIsIm90aGVyd2lzZSIsInN0YXRlIiwidXJsIiwidmlld3MiLCJjb250ZW50QCIsInRlbXBsYXRlVXJsIiwiY29udHJvbGxlciIsImNvbnRyb2xsZXJBcyIsIm1lbnUiLCJydW4iLCIkcm9vdFNjb3BlIiwiJGxvY2F0aW9uIiwiJGNvb2tpZVN0b3JlIiwiJGh0dHAiLCJnbG9iYWxzIiwiZ2V0IiwiY3VycmVudFVzZXIiLCJkZWZhdWx0cyIsImhlYWRlcnMiLCJjb21tb24iLCJhdXRoZGF0YSIsIiRvbiIsImV2ZW50IiwibmV4dCIsImN1cnJlbnQiLCJyZXN0cmljdGVkUGFnZSIsIiQiLCJpbkFycmF5IiwicGF0aCIsImxvZ2dlZEluIiwiYW5ndWxhciIsIm1vZHVsZSIsImNvbnN0YW50IiwiJGluamVjdCIsIkF1dGhlbnRpY2F0aW9uU2VydmljZSIsIiR0aW1lb3V0IiwiVXNlclNlcnZpY2UiLCJhcGliYXNlIiwiTG9naW4iLCJ1c2VybmFtZSIsInBhc3N3b3JkIiwiY2FsbGJhY2siLCJjb25zb2xlIiwibG9nIiwicmVzcG9uc2UiLCJHZXRCeVVzZXJuYW1lIiwidGhlbiIsInVzZXIiLCJzdWNjZXNzIiwibWVzc2FnZSIsIlNldENyZWRlbnRpYWxzIiwiQmFzZTY0IiwiZW5jb2RlIiwicHV0IiwiQ2xlYXJDcmVkZW50aWFscyIsInJlbW92ZSIsIkF1dGhvcml6YXRpb24iLCJzZXJ2aWNlIiwiR2V0QWxsIiwiaGFuZGxlU3VjY2VzcyIsImhhbmRsZUVycm9yIiwiR2V0QnlJZCIsImlkIiwiQ3JlYXRlIiwicG9zdCIsIlVwZGF0ZSIsIkRlbGV0ZSIsInJlcyIsImRhdGEiLCJlcnJvciIsIlN0YXR1c2NvZGUiLCJpc0Vycm9yIiwidmFsdWUiLCJNZW51bGlzdCIsIiRyZXNvdXJjZSIsIm1ldGhvZCIsInNhdmUiLCJxdWVyeSIsImlzQXJyYXkiLCJkZWxldGUiLCJQcm9qZWN0bGlzdCIsIlByb2plY3RsYWJlbCIsIlByb2plY3RmaWx0ZXIiLCJBbGx0YXNrcyIsImRhdGVKc29uIiwiZnJvbUpzb24iLCJkYXRlTnVtIiwiRGF0ZSIsInRyYW5zZm9ybVJlc3BvbnNlIiwidXBkYXRlIiwiaXNJZCIsImlzSWRzIiwiYWRkSWREYXRhIiwibmV3SUQiLCJwdXNoIiwiZ2V0SWREYXRhIiwiZmFjdG9yeSIsImtleVN0ciIsImlucHV0IiwiY2hyMSIsImNocjIiLCJlbmMxIiwiZW5jMiIsImVuYzMiLCJvdXRwdXQiLCJjaHIzIiwiZW5jNCIsImkiLCJjaGFyQ29kZUF0IiwiaXNOYU4iLCJ0aGlzIiwiY2hhckF0IiwibGVuZ3RoIiwiZGVjb2RlIiwiYmFzZTY0dGVzdCIsImV4ZWMiLCJ3aW5kb3ciLCJhbGVydCIsInJlcGxhY2UiLCJpbmRleE9mIiwiU3RyaW5nIiwiZnJvbUNoYXJDb2RlIiwiZmlsdGVyIiwic3RhcnQiLCJzbGljZSIsIkNvbnRlbnRjb250cm9sbGVyIiwiJHNjb3BlIiwidG9nZ2xlRWxtIiwibGluayIsInNjb3BlIiwiZWxlbSIsImF0dHJzIiwib24iLCJ0b2dnbGVDbGFzcyIsImZpbmQiLCJodG1sIiwidGV4dCIsImRpcmVjdGl2ZSIsInJlc3RyaWN0IiwiTG9naW5Db250cm9sbGVyIiwibG9naW5Db250cm9sbGVyIiwic3VibWl0TG9naW4iLCJNYWluQ29udHJvbGxlciIsIk1lbnVDb250cm9sbGVyIiwiJHN0YXRlUGFyYW1zIiwibWVudUxpc3QiLCJwcm9qZWN0TGlzdCIsInByb2plY3RMYWJlbCIsInByb2plY3RGaWx0ZXIiLCJlbG1QYW5lbCIsIiR0ZXh0VGFyZ2V0IiwiUmVnaXN0ZXJDb250cm9sbGVyIiwiVXRpbGl0aWVzQ29udHJvbGxlciIsInRpbWUiLCJ1dGlsaXRpZXNAYXBwIiwibWFpbkBhcHAiLCJwYXJhbXMiLCJBbGx0YXNrQ29udHJvbGxlciIsIiRzdGF0ZSIsIm51bWJlckN1cnJlbnQiLCJwYWdlU2l6ZSIsImFsbFRhc2tzIiwibnVtYmVyT2ZQYWdlcyIsIk1hdGgiLCJjZWlsIiwicmVtb3ZlVGFzayIsInRhc2siLCJlZGl0VGFzayIsImdvIiwiY29udHJvbGxlckFyY2hpdmUiLCJjb250cm9sbGVyTmV4dERheXMiLCJ0b2RheURhdGUiLCJtb21lbnQiLCJmb3JtYXQiLCJ3ZWVrRGF0ZSIsIndlZWtkYXkiLCJuZXh0U2V2ZW5FdmVudHMiLCJhcnJheVBvcyIsImZvckVhY2giLCJrZXkiLCJUb2RheUNvbnRyb2xsZXIiLCJ0b2RvVGFza3MiLCJvdmVybGF5QCIsIkNyZWF0ZXRvZG9Db250cm9sbGVyIiwiVXNlciIsInN1Ym1pdHRlZCIsInByaW9yaXR5IiwidXNlckRhdGEiLCJuYW1lIiwiY3JlYXRlVGFzayIsImZvcm1BZGRUYXNrcyIsIiR2YWxpZCIsInByb2plY3QiLCJsYWJlbCIsImhlYWRlckNvbW1lbnQiLCJjb21tZW50IiwiZG9uZSIsInZhbCIsInJlbW92ZUNsYXNzIiwiYWRkQ2xhc3MiLCJyZXNldFZhbCIsIkVkaXR0b2RvQ29udHJvbGxlciIsImVkaXRJZCIsImlkRWRpdCIsIm5ld1Rhc2siLCJjYW5jZWxFZGl0Il0sIm1hcHBpbmdzIjoiQ0FBQSxXQUVBLFlBNkJBLFNBQUFBLEdBQUFDLEVBQUFDLEVBQUFDLEdBRUFGLEVBQUFHLFVBQUEsVUFFQUQsRUFDQUUsTUFBQSxTQUNBQyxJQUFBLFNBQ0FDLE9BQ0FDLFlBQ0FDLFlBQUEsOEJBQ0FDLFdBQUEsa0JBQ0FDLGFBQUEsWUFJQU4sTUFBQSxrQkFDQUMsSUFBQSxZQUNBQyxPQUNBQyxZQUNBQyxZQUFBLG9DQUNBQyxXQUFBLHFCQUNBQyxhQUFBLGVBSUFOLE1BQUEsT0FDQUMsSUFBQSxXQUNBQyxPQUNBSyxNQUNBSCxZQUFBLDRCQUNBQyxXQUFBLGlCQUNBQyxhQUFBLFlBRUFILFlBQ0FDLFlBQUEsa0NBQ0FDLFdBQUEsb0JBQ0FDLGFBQUEsY0FLQSxRQUFBRSxHQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxHQUlBSCxFQUFBSSxRQUFBRixFQUFBRyxJQUFBLGVBRUFMLEVBQUFJLFFBQUFFLGNBQ0FILEVBQUFJLFNBQUFDLFFBQUFDLE9BQUEsY0FBQSxRQUFBVCxFQUFBSSxRQUFBRSxZQUFBSSxVQUdBVixFQUFBVyxJQUFBLHVCQUFBLFNBQUFDLEVBQUFDLEVBQUFDLEdBR0EsR0FBQUMsR0FBQSxLQUFBQyxFQUFBQyxRQUFBaEIsRUFBQWlCLFFBQUEsV0FDQUMsRUFBQW5CLEVBQUFJLFFBQUFFLFdBQ0FTLEtBQUFJLEdBQ0FsQixFQUFBaUIsS0FBQSxZQXBGQUUsUUFBQUMsT0FBQSxTQUNBRCxTQUFBQyxPQUFBLE9BQ0EsWUFDQSxZQUNBLGFBQ0EsWUFDQSxVQUNBLGFBQ0EsV0FDQSxZQUNBLGVBQ0EsV0FDQSxjQUNBLGNBQ0EsV0FDQSxZQUNBLGNBQ0EsZ0JBR0FDLFNBQUEsV0FBQSxZQUNBQSxTQUFBLFVBQUEseUJBQ0FBLFNBQUEsYUFBQSxTQUVBcEMsT0FBQUEsR0FDQWEsSUFBQUEsR0EyQ0NiLEVBQU9xQyxTQUFXLHFCQUFz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QUVBLEdBQUEyQyxHQUFBM0YsS0FDQTRGLEVBQUFoSCxFQUFBSyxXQUVBMEcsR0FBQUUsT0FBQUQsRUFBQSxHQUNBRCxFQUFBbkMsS0FBQW5GLEVBQUFwRSxRQUFBK0MsR0FBQTRJLEVBQUEsS0FFQUQsRUFBQWxDLFNBQUEsV0FFQWtDLEVBQUFHLFNBRUE5SSxHQUFBNEksRUFBQSxHQUNBVixRQUFBUyxFQUFBbkMsS0FBQTBCLFFBQ0FDLE1BQUFRLEVBQUFuQyxLQUFBMkIsTUFDQUwsS0FBQWEsRUFBQW5DLEtBQUFzQixLQUNBdEcsUUFBQW1ILEVBQUFuQyxLQUFBaEYsUUFDQTRHLGNBQUFPLEVBQUFuQyxLQUFBNEIsY0FDQUMsUUFBQU0sRUFBQW5DLEtBQUE2QixRQUNBQyxLQUFBSyxFQUFBbkMsS0FBQThCLE1BSUFLLEVBQUFHLFFBQUF0SCxRQUFBLEdBQUFDLE1BQUFrSCxFQUFBbkMsS0FBQWhGLFNBQ0FILEVBQUFNLE9BQUFnSCxFQUFBRyxTQUNBOUMsRUFBQVUsR0FBQSxZQUlBaUMsRUFBQUksV0FBQSxXQUNBL0MsRUFBQVUsR0FBQSxZQTVEQTFJLFFBQUFDLE9BQUEsb0JBQ0EsZ0JBRUFuQyxPQUFBQSxHQUNBVSxXQUFBLHFCQUFBbU0sR2Q2akNDN00sRUFBT3FDLFNBQVcsa0JBb0NsQndLLEVBQW1CeEssU0FBVyxPQUFRLFdBQVkiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiAoKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXG5cdHZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnYXBwJywgW10pO1xuXHRhbmd1bGFyLm1vZHVsZSgnYXBwJyxbXG5cdFx0J3VpLnJvdXRlcicsXG5cdFx0J25nQW5pbWF0ZScsXG5cdFx0J25nUmVzb3VyY2UnLFxuXHRcdCduZ0Nvb2tpZXMnLFxuXHRcdCdhcHAuYXBpJyxcblx0XHQnYXBwLmdsb2JhbCcsXG5cdFx0J2FwcC5tZW51Jyxcblx0XHQnYXBwLmxvZ2luJyxcblx0XHQnYXBwLnJlZ2lzdGVyJyxcblx0XHQnYXBwLm1haW4nLFxuXHRcdCdhcHAudXRpbGl0eScsXG5cdFx0J2FwcC5hbGx0b2RvJyxcblx0XHQnYXBwLm5leHQnLFxuXHRcdCdhcHAudG9kYXknLFxuXHRcdCdhcHAuY29udGVudCcsXG5cdFx0J2FwcC5hcmNoaXZlJ1xuXHRdKVxuXG5cdC5jb25zdGFudCgnc2l0ZW5hbWUnLCAnYXBwbG9jYWwnKVxuXHQuY29uc3RhbnQoJ2FwaWJhc2UnLCAnaHR0cDovL2xvY2FsaG9zdDozMDAwJylcblx0LmNvbnN0YW50KCdhcGl2ZXJzaW9uJywgJy92MS4wJylcblxuXHQuY29uZmlnKGNvbmZpZylcblx0LnJ1bihydW4pO1xuXG5cdGZ1bmN0aW9uIGNvbmZpZygkdXJsUm91dGVyUHJvdmlkZXIsICRodHRwUHJvdmlkZXIsICRzdGF0ZVByb3ZpZGVyKSB7XG5cblx0XHQkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKCcvbG9naW4nKTtcblxuXHRcdCRzdGF0ZVByb3ZpZGVyXG5cdFx0XHQuc3RhdGUoJ2xvZ2luJywge1xuXHRcdFx0XHR1cmw6Jy9sb2dpbicsXG5cdFx0XHRcdHZpZXdzOiB7XG5cdFx0XHRcdFx0J2NvbnRlbnRAJzoge1xuXHRcdFx0XHRcdFx0dGVtcGxhdGVVcmw6ICdodG1sL2xvZ2luL2xvZ2luLmluZGV4Lmh0bWwnLFxuXHRcdFx0XHRcdFx0Y29udHJvbGxlcjogJ0xvZ2luQ29udHJvbGxlcicsXG5cdFx0XHRcdFx0XHRjb250cm9sbGVyQXM6ICdsb2dpbidcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0pXG5cdFx0XHQuc3RhdGUoJ2xvZ2luLnJlZ2lzdGVyJywge1xuXHRcdFx0XHR1cmw6ICcvcmVnaXN0ZXInLFxuXHRcdFx0XHR2aWV3czoge1xuXHRcdFx0XHRcdCdjb250ZW50QCc6IHtcblx0XHRcdFx0XHRcdHRlbXBsYXRlVXJsOiAnaHRtbC9yZWdpc3Rlci9yZWdpc3Rlci5pbmRleC5odG1sJyxcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXI6ICdSZWdpc3RlckNvbnRyb2xsZXInLFxuXHRcdFx0XHRcdFx0Y29udHJvbGxlckFzOiAncmVnaXN0ZXInXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9KVxuXHRcdFx0LnN0YXRlKCdhcHAnLCB7XG5cdFx0XHRcdHVybDogJy9jb250ZW50Jyxcblx0XHRcdFx0dmlld3M6IHtcblx0XHRcdFx0XHQnbWVudSc6IHtcblx0XHRcdFx0XHRcdHRlbXBsYXRlVXJsOiAnaHRtbC9tZW51L21lbnUuaW5kZXguaHRtbCcsXG5cdFx0XHRcdFx0XHRjb250cm9sbGVyOiAnTWVudUNvbnRyb2xsZXInLFxuXHRcdFx0XHRcdFx0Y29udHJvbGxlckFzOiAnbWVudURhdGEnXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHQnY29udGVudEAnOiB7XG5cdFx0XHRcdFx0XHR0ZW1wbGF0ZVVybDogJ2h0bWwvY29udGVudC9jb250ZW50LmluZGV4Lmh0bWwnLFxuXHRcdFx0XHRcdFx0Y29udHJvbGxlcjogJ0NvbnRlbnRjb250cm9sbGVyJyxcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXJBczogJ2NvbnRlbnQnXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0fVxuXHRmdW5jdGlvbiBydW4oICRyb290U2NvcGUsICRsb2NhdGlvbiwgJGNvb2tpZVN0b3JlLCAkaHR0cCApIHtcblxuXHRcdC8vIGtlZXAgdXNlciBsb2dnZWQgaW4gYWZ0ZXIgcGFnZSByZWZyZXNoLlxuXHRcdFxuXHRcdCRyb290U2NvcGUuZ2xvYmFscyA9ICRjb29raWVTdG9yZS5nZXQoJ2dsb2JhbHMnKSB8fCB7fTtcblxuXHRcdGlmICggJHJvb3RTY29wZS5nbG9iYWxzLmN1cnJlbnRVc2VyICkge1xuXHRcdFx0JGh0dHAuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ0F1dGhvcml6YXRpb24nXSA9ICdCYXNpYycgKyAkcm9vdFNjb3BlLmdsb2JhbHMuY3VycmVudFVzZXIuYXV0aGRhdGE7XG5cdFx0fVxuXG5cdFx0JHJvb3RTY29wZS4kb24oJyRsb2NhdGlvbkNoYW5nZVN0YXJ0JywgZnVuY3Rpb24gKGV2ZW50LCBuZXh0LCBjdXJyZW50KSB7XG5cblx0XHRcdC8vIHJlZGlyZWN0IHRvIGxvZ2luIHBhZ2UgaWYgbm90IGxvZ2dlZCBpbiBhbmQgdHJ5aW5nIHRvIGFjZXNzIGEgcmVzdHJpY3RlZCBwYWdlLlxuXHRcdFx0dmFyIHJlc3RyaWN0ZWRQYWdlID0gJC5pbkFycmF5KCRsb2NhdGlvbi5wYXRoKCksIFsnL2xvZ2luJ10pID09PSAtMTtcblx0XHRcdHZhciBsb2dnZWRJbiA9ICRyb290U2NvcGUuZ2xvYmFscy5jdXJyZW50VXNlcjtcblx0XHRcdGlmICggcmVzdHJpY3RlZFBhZ2UgJiYgIWxvZ2dlZEluICkge1xuXHRcdFx0XHQkbG9jYXRpb24ucGF0aCgnL2xvZ2luJyk7XG5cdFx0XHR9XG5cblx0XHR9KTtcblx0fVxuXG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAuYXBpJywgW10pO1xuXG5cdC8vIGF1dGhlbnRpY2F0aW9uIC0gc2VydmljZVxuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLmFwaScpLmZhY3RvcnkoJ0F1dGhlbnRpY2F0aW9uU2VydmljZScsIEF1dGhlbnRpY2F0aW9uU2VydmljZSk7XG5cdGZ1bmN0aW9uIEF1dGhlbnRpY2F0aW9uU2VydmljZSgkaHR0cCwgJGNvb2tpZVN0b3JlLCAkcm9vdFNjb3BlLCAkdGltZW91dCwgVXNlclNlcnZpY2UsIGFwaWJhc2UpIHtcbiAgICAgICAgdmFyIHNlcnZpY2UgPSB7fTtcblxuICAgICAgICBzZXJ2aWNlLkxvZ2luID0gTG9naW47XG4gICAgICAgIHNlcnZpY2UuU2V0Q3JlZGVudGlhbHMgPSBTZXRDcmVkZW50aWFscztcbiAgICAgICAgc2VydmljZS5DbGVhckNyZWRlbnRpYWxzID0gQ2xlYXJDcmVkZW50aWFscztcblxuICAgICAgICByZXR1cm4gc2VydmljZTtcblxuICAgICAgICBmdW5jdGlvbiBMb2dpbih1c2VybmFtZSwgcGFzc3dvcmQsIGNhbGxiYWNrKSB7XG5cbiAgICAgICAgXHRjb25zb2xlLmxvZygnYXV0aGVudGljYXRpb24gbG9naW4nKTtcblxuICAgICAgICAgICAgLyogRHVtbXkgYXV0aGVudGljYXRpb24gZm9yIHRlc3RpbmcsIHVzZXMgJHRpbWVvdXQgdG8gc2ltdWxhdGUgYXBpIGNhbGxcbiAgICAgICAgICAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbiAgICAgICAgICAgICBcbiAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIHZhciByZXNwb25zZTtcblxuICAgICAgICAgICAgICAgIFVzZXJTZXJ2aWNlLkdldEJ5VXNlcm5hbWUodXNlcm5hbWUpXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgICAgICAgICAgICAgICAgIFx0XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodXNlciAhPT0gbnVsbCAmJiB1c2VyLnBhc3N3b3JkID09PSBwYXNzd29yZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgXHRjb25zb2xlLmxvZygnaXNPSyEnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IHsgc3VjY2VzczogdHJ1ZSB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFx0Y29uc29sZS5sb2coJ2lzTk9Ub2shJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiAnVXNlcm5hbWUgb3IgcGFzc3dvcmQgaXMgaW5jb3JyZWN0JyB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXHRcdFx0XHRcdFx0XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhyZXNwb25zZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIH0sIDEwMDApO1xuXHRcdFx0XG5cbiAgICAgICAgICAgIC8qIFVzZSB0aGlzIGZvciByZWFsIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG4gICAgICAgICAgICAvLyRodHRwLnBvc3QoJy9hcGkvYXV0aGVudGljYXRlJywgeyB1c2VybmFtZTogdXNlcm5hbWUsIHBhc3N3b3JkOiBwYXNzd29yZCB9KVxuICAgICAgICAgICAgLy8gICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAvLyAgICAgICAgY2FsbGJhY2socmVzcG9uc2UpO1xuICAgICAgICAgICAgLy8gICAgfSk7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIFNldENyZWRlbnRpYWxzKHVzZXJuYW1lLCBwYXNzd29yZCkge1xuICAgICAgICAgICAgdmFyIGF1dGhkYXRhID0gQmFzZTY0LmVuY29kZSh1c2VybmFtZSArICc6JyArIHBhc3N3b3JkKTtcblxuICAgICAgICAgICAgY29uc29sZS5sb2coYXV0aGRhdGEpO1xuXG4gICAgICAgICAgICAkcm9vdFNjb3BlLmdsb2JhbHMgPSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFVzZXI6IHtcbiAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6IHVzZXJuYW1lLFxuICAgICAgICAgICAgICAgICAgICBhdXRoZGF0YTogYXV0aGRhdGFcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAkaHR0cC5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsnQXV0aG9yaXphdGlvbiddID0gJ0Jhc2ljICcgKyBhdXRoZGF0YTsgLy8ganNoaW50IGlnbm9yZTpsaW5lXG4gICAgICAgICAgICAkY29va2llU3RvcmUucHV0KCdnbG9iYWxzJywgJHJvb3RTY29wZS5nbG9iYWxzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIENsZWFyQ3JlZGVudGlhbHMoKSB7XG4gICAgICAgICAgICAkcm9vdFNjb3BlLmdsb2JhbHMgPSB7fTtcbiAgICAgICAgICAgICRjb29raWVTdG9yZS5yZW1vdmUoJ2dsb2JhbHMnKTtcbiAgICAgICAgICAgICRodHRwLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uLkF1dGhvcml6YXRpb24gPSAnQmFzaWMgJztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIEJhc2U2NCBlbmNvZGluZyBzZXJ2aWNlIHVzZWQgYnkgQXV0aGVudGljYXRpb25TZXJ2aWNlXG5cdHZhciBCYXNlNjQgPSB7XG5cbiAgICAgICAga2V5U3RyOiAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLz0nLFxuXG4gICAgICAgIGVuY29kZTogZnVuY3Rpb24gKGlucHV0KSB7XG4gICAgICAgICAgICB2YXIgb3V0cHV0ID0gXCJcIjtcbiAgICAgICAgICAgIHZhciBjaHIxLCBjaHIyLCBjaHIzID0gXCJcIjtcbiAgICAgICAgICAgIHZhciBlbmMxLCBlbmMyLCBlbmMzLCBlbmM0ID0gXCJcIjtcbiAgICAgICAgICAgIHZhciBpID0gMDtcblxuICAgICAgICAgICAgZG8ge1xuICAgICAgICAgICAgICAgIGNocjEgPSBpbnB1dC5jaGFyQ29kZUF0KGkrKyk7XG4gICAgICAgICAgICAgICAgY2hyMiA9IGlucHV0LmNoYXJDb2RlQXQoaSsrKTtcbiAgICAgICAgICAgICAgICBjaHIzID0gaW5wdXQuY2hhckNvZGVBdChpKyspO1xuXG4gICAgICAgICAgICAgICAgZW5jMSA9IGNocjEgPj4gMjtcbiAgICAgICAgICAgICAgICBlbmMyID0gKChjaHIxICYgMykgPDwgNCkgfCAoY2hyMiA+PiA0KTtcbiAgICAgICAgICAgICAgICBlbmMzID0gKChjaHIyICYgMTUpIDw8IDIpIHwgKGNocjMgPj4gNik7XG4gICAgICAgICAgICAgICAgZW5jNCA9IGNocjMgJiA2MztcblxuICAgICAgICAgICAgICAgIGlmIChpc05hTihjaHIyKSkge1xuICAgICAgICAgICAgICAgICAgICBlbmMzID0gZW5jNCA9IDY0O1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNOYU4oY2hyMykpIHtcbiAgICAgICAgICAgICAgICAgICAgZW5jNCA9IDY0O1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIG91dHB1dCA9IG91dHB1dCArXG4gICAgICAgICAgICAgICAgICAgIHRoaXMua2V5U3RyLmNoYXJBdChlbmMxKSArXG4gICAgICAgICAgICAgICAgICAgIHRoaXMua2V5U3RyLmNoYXJBdChlbmMyKSArXG4gICAgICAgICAgICAgICAgICAgIHRoaXMua2V5U3RyLmNoYXJBdChlbmMzKSArXG4gICAgICAgICAgICAgICAgICAgIHRoaXMua2V5U3RyLmNoYXJBdChlbmM0KTtcbiAgICAgICAgICAgICAgICBjaHIxID0gY2hyMiA9IGNocjMgPSBcIlwiO1xuICAgICAgICAgICAgICAgIGVuYzEgPSBlbmMyID0gZW5jMyA9IGVuYzQgPSBcIlwiO1xuICAgICAgICAgICAgfSB3aGlsZSAoaSA8IGlucHV0Lmxlbmd0aCk7XG5cbiAgICAgICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZGVjb2RlOiBmdW5jdGlvbiAoaW5wdXQpIHtcbiAgICAgICAgICAgIHZhciBvdXRwdXQgPSBcIlwiO1xuICAgICAgICAgICAgdmFyIGNocjEsIGNocjIsIGNocjMgPSBcIlwiO1xuICAgICAgICAgICAgdmFyIGVuYzEsIGVuYzIsIGVuYzMsIGVuYzQgPSBcIlwiO1xuICAgICAgICAgICAgdmFyIGkgPSAwO1xuXG4gICAgICAgICAgICAvLyByZW1vdmUgYWxsIGNoYXJhY3RlcnMgdGhhdCBhcmUgbm90IEEtWiwgYS16LCAwLTksICssIC8sIG9yID1cbiAgICAgICAgICAgIHZhciBiYXNlNjR0ZXN0ID0gL1teQS1aYS16MC05XFwrXFwvXFw9XS9nO1xuICAgICAgICAgICAgaWYgKGJhc2U2NHRlc3QuZXhlYyhpbnB1dCkpIHtcbiAgICAgICAgICAgICAgICB3aW5kb3cuYWxlcnQoXCJUaGVyZSB3ZXJlIGludmFsaWQgYmFzZTY0IGNoYXJhY3RlcnMgaW4gdGhlIGlucHV0IHRleHQuXFxuXCIgK1xuICAgICAgICAgICAgICAgICAgICBcIlZhbGlkIGJhc2U2NCBjaGFyYWN0ZXJzIGFyZSBBLVosIGEteiwgMC05LCAnKycsICcvJyxhbmQgJz0nXFxuXCIgK1xuICAgICAgICAgICAgICAgICAgICBcIkV4cGVjdCBlcnJvcnMgaW4gZGVjb2RpbmcuXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaW5wdXQgPSBpbnB1dC5yZXBsYWNlKC9bXkEtWmEtejAtOVxcK1xcL1xcPV0vZywgXCJcIik7XG5cbiAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgICBlbmMxID0gdGhpcy5rZXlTdHIuaW5kZXhPZihpbnB1dC5jaGFyQXQoaSsrKSk7XG4gICAgICAgICAgICAgICAgZW5jMiA9IHRoaXMua2V5U3RyLmluZGV4T2YoaW5wdXQuY2hhckF0KGkrKykpO1xuICAgICAgICAgICAgICAgIGVuYzMgPSB0aGlzLmtleVN0ci5pbmRleE9mKGlucHV0LmNoYXJBdChpKyspKTtcbiAgICAgICAgICAgICAgICBlbmM0ID0gdGhpcy5rZXlTdHIuaW5kZXhPZihpbnB1dC5jaGFyQXQoaSsrKSk7XG5cbiAgICAgICAgICAgICAgICBjaHIxID0gKGVuYzEgPDwgMikgfCAoZW5jMiA+PiA0KTtcbiAgICAgICAgICAgICAgICBjaHIyID0gKChlbmMyICYgMTUpIDw8IDQpIHwgKGVuYzMgPj4gMik7XG4gICAgICAgICAgICAgICAgY2hyMyA9ICgoZW5jMyAmIDMpIDw8IDYpIHwgZW5jNDtcblxuICAgICAgICAgICAgICAgIG91dHB1dCA9IG91dHB1dCArIFN0cmluZy5mcm9tQ2hhckNvZGUoY2hyMSk7XG5cbiAgICAgICAgICAgICAgICBpZiAoZW5jMyAhPSA2NCkge1xuICAgICAgICAgICAgICAgICAgICBvdXRwdXQgPSBvdXRwdXQgKyBTdHJpbmcuZnJvbUNoYXJDb2RlKGNocjIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZW5jNCAhPSA2NCkge1xuICAgICAgICAgICAgICAgICAgICBvdXRwdXQgPSBvdXRwdXQgKyBTdHJpbmcuZnJvbUNoYXJDb2RlKGNocjMpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNocjEgPSBjaHIyID0gY2hyMyA9IFwiXCI7XG4gICAgICAgICAgICAgICAgZW5jMSA9IGVuYzIgPSBlbmMzID0gZW5jNCA9IFwiXCI7XG5cbiAgICAgICAgICAgIH0gd2hpbGUgKGkgPCBpbnB1dC5sZW5ndGgpO1xuXG4gICAgICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgICAgICB9XG5cdH07XG5cbiAgICAvLyB1c2VyU2VydmljZSBmb3IgYXV0aHRlbnRpY2F0b24uXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC5hcGknKS5mYWN0b3J5KCdVc2VyU2VydmljZScsIFVzZXJTZXJ2aWNlKTtcbiAgICBmdW5jdGlvbiBVc2VyU2VydmljZSgkaHR0cCwgYXBpYmFzZSkge1xuXG4gICAgXHR2YXIgc2VydmljZSA9IHt9O1xuXG4gICAgICAgIHNlcnZpY2UuR2V0QWxsID0gR2V0QWxsO1xuICAgICAgICBzZXJ2aWNlLkdldEJ5SWQgPSBHZXRCeUlkO1xuICAgICAgICBzZXJ2aWNlLkdldEJ5VXNlcm5hbWUgPSBHZXRCeVVzZXJuYW1lO1xuICAgICAgICBzZXJ2aWNlLkNyZWF0ZSA9IENyZWF0ZTtcbiAgICAgICAgc2VydmljZS5VcGRhdGUgPSBVcGRhdGU7XG4gICAgICAgIHNlcnZpY2UuRGVsZXRlID0gRGVsZXRlO1xuXG4gICAgICAgIHJldHVybiBzZXJ2aWNlO1xuXG4gICAgICAgIGZ1bmN0aW9uIEdldEFsbCgpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQoIGFwaWJhc2UgKycvdXNlcmxvZ2luJykudGhlbihoYW5kbGVTdWNjZXNzLCBoYW5kbGVFcnJvcignRXJyb3IgZ2V0dGluZyBhbGwgdXNlcnMnKSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBHZXRCeUlkKGlkKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KCBhcGliYXNlICsnL3VzZXJsb2dpbicgKyBpZCkudGhlbihoYW5kbGVTdWNjZXNzLCBoYW5kbGVFcnJvcignRXJyb3IgZ2V0dGluZyB1c2VyIGJ5IGlkJykpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gR2V0QnlVc2VybmFtZSh1c2VybmFtZSkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCggYXBpYmFzZSArJy91c2VybG9naW4/JyArIHVzZXJuYW1lKS50aGVuKGhhbmRsZVN1Y2Nlc3MsIGhhbmRsZUVycm9yKCdFcnJvciBnZXR0aW5nIHVzZXIgYnkgdXNlcm5hbWUnKSk7XG4gICAgICAgICAgICAvL3JldHVybiAkaHR0cC5nZXQoIGFwaWJhc2UgKycvdXNlcmxvZ2luJykudGhlbihoYW5kbGVTdWNjZXNzLCBoYW5kbGVFcnJvcignRXJyb3IgZ2V0dGluZyB1c2VyIGJ5IHVzZXJuYW1lJykpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gQ3JlYXRlKHVzZXIpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5wb3N0KCBhcGliYXNlICsnL3VzZXJsb2dpbicsIHVzZXIpLnRoZW4oaGFuZGxlU3VjY2VzcywgaGFuZGxlRXJyb3IoJ0Vycm9yIGNyZWF0aW5nIHVzZXInKSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBVcGRhdGUodXNlcikge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLnB1dCggYXBpYmFzZSArJy91c2VybG9naW4nICsgdXNlci5pZCwgdXNlcikudGhlbihoYW5kbGVTdWNjZXNzLCBoYW5kbGVFcnJvcignRXJyb3IgdXBkYXRpbmcgdXNlcicpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIERlbGV0ZShpZCkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLmRlbGV0ZSggYXBpYmFzZSArJy91c2VybG9naW4nICsgaWQpLnRoZW4oaGFuZGxlU3VjY2VzcywgaGFuZGxlRXJyb3IoJ0Vycm9yIGRlbGV0aW5nIHVzZXInKSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBwcml2YXRlIGZ1bmN0aW9uc1xuXG4gICAgICAgIGZ1bmN0aW9uIGhhbmRsZVN1Y2Nlc3MocmVzKSB7XG4gICAgICAgIFx0Y29uc29sZS5sb2cocmVzKVxuICAgICAgICAgICAgcmV0dXJuIHJlcy5kYXRhO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gaGFuZGxlRXJyb3IoZXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBcdGNvbnNvbGUubG9nKGVycm9yKTtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogZXJyb3IgfTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgIH1cblxuICAgIC8qXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC5hcGknKS5mYWN0b3J5KCdVc2VyU2VydmljZScsIFVzZXJTZXJ2aWNlKTtcbiAgICBmdW5jdGlvbiBVc2VyU2VydmljZSgkc2V0VGltZW91dCwgJGZpbHRlciwgJHEpIHtcblxuICAgIFx0dmFyIHNlcnZpY2UgPSB7fTtcblxuICAgICAgICBzZXJ2aWNlLkdldEFsbCA9IEdldEFsbDtcbiAgICAgICAgc2VydmljZS5HZXRCeUlkID0gR2V0QnlJZDtcbiAgICAgICAgc2VydmljZS5HZXRCeVVzZXJuYW1lID0gR2V0QnlVc2VybmFtZTtcbiAgICAgICAgc2VydmljZS5DcmVhdGUgPSBDcmVhdGU7XG4gICAgICAgIHNlcnZpY2UuVXBkYXRlID0gVXBkYXRlO1xuICAgICAgICBzZXJ2aWNlLkRlbGV0ZSA9IERlbGV0ZTtcblxuICAgICAgICByZXR1cm4gc2VydmljZTtcblxuICAgICAgICBmdW5jdGlvbiBHZXRBbGwoKSB7XG4gICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShnZXRVc2VycygpKTtcbiAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gR2V0QnlJZChpZCkge1xuICAgICAgICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcbiAgICAgICAgICAgIHZhciBmaWx0ZXJlZCA9ICRmaWx0ZXIoJ2ZpbHRlcicpKGdldFVzZXJzKCksIHsgaWQ6IGlkIH0pO1xuICAgICAgICAgICAgdmFyIHVzZXIgPSBmaWx0ZXJlZC5sZW5ndGggPyBmaWx0ZXJlZFswXSA6IG51bGw7XG4gICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKHVzZXIpO1xuICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBHZXRCeVVzZXJuYW1lKHVzZXJuYW1lKSB7XG4gICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgICAgICAgdmFyIGZpbHRlcmVkID0gJGZpbHRlcignZmlsdGVyJykoZ2V0VXNlcnMoKSwgeyB1c2VybmFtZTogdXNlcm5hbWUgfSk7XG4gICAgICAgICAgICB2YXIgdXNlciA9IGZpbHRlcmVkLmxlbmd0aCA/IGZpbHRlcmVkWzBdIDogbnVsbDtcbiAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUodXNlcik7XG4gICAgICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIENyZWF0ZSh1c2VyKSB7XG4gICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG4gICAgICAgICAgICAvLyBzaW11bGF0ZSBhcGkgY2FsbCB3aXRoICR0aW1lb3V0XG4gICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgR2V0QnlVc2VybmFtZSh1c2VyLnVzZXJuYW1lKVxuICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoZHVwbGljYXRlVXNlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGR1cGxpY2F0ZVVzZXIgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6ICdVc2VybmFtZSBcIicgKyB1c2VyLnVzZXJuYW1lICsgJ1wiIGlzIGFscmVhZHkgdGFrZW4nIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdXNlcnMgPSBnZXRVc2VycygpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYXNzaWduIGlkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxhc3RVc2VyID0gdXNlcnNbdXNlcnMubGVuZ3RoIC0gMV0gfHwgeyBpZDogMCB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXIuaWQgPSBsYXN0VXNlci5pZCArIDE7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzYXZlIHRvIGxvY2FsIHN0b3JhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2Vycy5wdXNoKHVzZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFVzZXJzKHVzZXJzKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoeyBzdWNjZXNzOiB0cnVlIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sIDEwMDApO1xuXG4gICAgICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIFVwZGF0ZSh1c2VyKSB7XG4gICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG4gICAgICAgICAgICB2YXIgdXNlcnMgPSBnZXRVc2VycygpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB1c2Vycy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmICh1c2Vyc1tpXS5pZCA9PT0gdXNlci5pZCkge1xuICAgICAgICAgICAgICAgICAgICB1c2Vyc1tpXSA9IHVzZXI7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNldFVzZXJzKHVzZXJzKTtcbiAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoKTtcblxuICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBEZWxldGUoaWQpIHtcbiAgICAgICAgICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cbiAgICAgICAgICAgIHZhciB1c2VycyA9IGdldFVzZXJzKCk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHVzZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHVzZXIgPSB1c2Vyc1tpXTtcbiAgICAgICAgICAgICAgICBpZiAodXNlci5pZCA9PT0gaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdXNlcnMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZXRVc2Vycyh1c2Vycyk7XG4gICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKCk7XG5cbiAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gcHJpdmF0ZSBmdW5jdGlvbnNcblxuICAgICAgICBmdW5jdGlvbiBnZXRVc2VycygpIHtcbiAgICAgICAgICAgIGlmKCFsb2NhbFN0b3JhZ2UudXNlcnMpe1xuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS51c2VycyA9IEpTT04uc3RyaW5naWZ5KFtdKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLnVzZXJzKTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBzZXRVc2Vycyh1c2Vycykge1xuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnVzZXJzID0gSlNPTi5zdHJpbmdpZnkodXNlcnMpO1xuICAgICAgICB9XG4gICAgfVxuICAgICovXG5cblx0Ly8gZGF0YSAtIHN0YXR1c0NvZGUuXG5cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5hcGknKS5mYWN0b3J5KCdTdGF0dXNjb2RlJywgU3RhdHVzY29kZSk7XG5cdGZ1bmN0aW9uIFN0YXR1c2NvZGUoKSB7XG5cdFx0cmV0dXJuIHtcblx0XHRcdGlzRXJyb3I6IGZ1bmN0aW9uKHZhbHVlKSB7IFxuXHRcdFx0XHRyZXR1cm4gKHZhbHVlID09IDEpID8gdHJ1ZSA6IGZhbHNlO1xuXHRcdFx0fVxuXHRcdH07XG5cdH1cblxuXHQvLyBSRVNUZnVsIGRhdGFcblxuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLmFwaScpLmZhY3RvcnkoJ01lbnVsaXN0JywgTWVudWxpc3QpO1xuXHRmdW5jdGlvbiBNZW51bGlzdCgkcmVzb3VyY2UsIGFwaWJhc2UpIHtcblx0XHRyZXR1cm4gJHJlc291cmNlKGFwaWJhc2UgKyAnL21haW5tZW51Jywge30sIFxuXHRcdHtcblx0XHRcdFxuXHRcdFx0J2dldCc6ICAgIHttZXRob2Q6J0dFVCd9LFxuICBcdFx0XHQnc2F2ZSc6ICAge21ldGhvZDonUE9TVCd9LFxuICBcdFx0XHQncXVlcnknOiAge21ldGhvZDonR0VUJywgaXNBcnJheTp0cnVlfSxcbiAgXHRcdFx0J2RlbGV0ZSc6IHttZXRob2Q6J0RFTEVURSd9XG5cblx0XHR9KTtcblx0fVxuXG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAuYXBpJykuZmFjdG9yeSgnUHJvamVjdGxpc3QnLCBQcm9qZWN0bGlzdCk7XG5cdGZ1bmN0aW9uIFByb2plY3RsaXN0KCRyZXNvdXJjZSwgYXBpYmFzZSkge1xuXHRcdHJldHVybiAkcmVzb3VyY2UoYXBpYmFzZSArICcvcHJvamVjdCcsIHt9LCBcblx0XHR7XG5cdFx0XHRcblx0XHRcdCdnZXQnOiAgICB7bWV0aG9kOidHRVQnfSxcbiAgXHRcdFx0J3NhdmUnOiAgIHttZXRob2Q6J1BPU1QnfSxcbiAgXHRcdFx0J3F1ZXJ5JzogIHttZXRob2Q6J0dFVCcsIGlzQXJyYXk6dHJ1ZX0sXG4gIFx0XHRcdCdkZWxldGUnOiB7bWV0aG9kOidERUxFVEUnfVxuXG5cdFx0fSk7XG5cdH1cblxuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLmFwaScpLmZhY3RvcnkoJ1Byb2plY3RsYWJlbCcsIFByb2plY3RsYWJlbCk7XG5cdGZ1bmN0aW9uIFByb2plY3RsYWJlbCgkcmVzb3VyY2UsIGFwaWJhc2UpIHtcblx0XHRyZXR1cm4gJHJlc291cmNlKGFwaWJhc2UgKyAnL2xhYmVscycsIHt9LCBcblx0XHR7XG5cdFx0XHRcblx0XHRcdCdnZXQnOiAgICB7bWV0aG9kOidHRVQnfSxcbiAgXHRcdFx0J3NhdmUnOiAgIHttZXRob2Q6J1BPU1QnfSxcbiAgXHRcdFx0J3F1ZXJ5JzogIHttZXRob2Q6J0dFVCcsIGlzQXJyYXk6dHJ1ZX0sXG4gIFx0XHRcdCdkZWxldGUnOiB7bWV0aG9kOidERUxFVEUnfVxuXG5cdFx0fSk7XG5cdH1cblxuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLmFwaScpLmZhY3RvcnkoJ1Byb2plY3RmaWx0ZXInLCBQcm9qZWN0ZmlsdGVyKTtcblx0ZnVuY3Rpb24gUHJvamVjdGZpbHRlcigkcmVzb3VyY2UsIGFwaWJhc2UpIHtcblx0XHRyZXR1cm4gJHJlc291cmNlKGFwaWJhc2UgKyAnL2ZpbHRlcnMnLCB7fSwgXG5cdFx0e1xuXHRcdFx0XG5cdFx0XHQnZ2V0JzogICAge21ldGhvZDonR0VUJ30sXG4gIFx0XHRcdCdzYXZlJzogICB7bWV0aG9kOidQT1NUJ30sXG4gIFx0XHRcdCdxdWVyeSc6ICB7bWV0aG9kOidHRVQnLCBpc0FycmF5OnRydWV9LFxuICBcdFx0XHQnZGVsZXRlJzoge21ldGhvZDonREVMRVRFJ31cblxuXHRcdH0pO1xuXHR9XG5cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5hcGknKS5mYWN0b3J5KCdBbGx0YXNrcycsIEFsbHRhc2tzKTtcblx0ZnVuY3Rpb24gQWxsdGFza3MoJHJlc291cmNlLCBhcGliYXNlKSB7XG5cblx0XHR2YXIgZGF0ZUpzb24gPSBmdW5jdGlvbiAoIEFsbHRhc2tzICkge1xuXHRcdFx0QWxsdGFza3MgPSBhbmd1bGFyLmZyb21Kc29uKEFsbHRhc2tzKTtcblx0XHRcdEFsbHRhc2tzLmRhdGVOdW0gPSBuZXcgRGF0ZSAoQWxsdGFza3MuZGF0ZU51bSk7XG5cdFx0XHRyZXR1cm4gQWxsdGFza3M7XHRcblx0XHR9O1xuXG5cdFx0cmV0dXJuICRyZXNvdXJjZShhcGliYXNlICsgJy90YXNrLzppZCcsIHtpZDonQGlkJ30sIFxuXHRcdHtcblx0XHRcdFxuXHRcdFx0J2dldCc6ICAgIHttZXRob2Q6J0dFVCcsIHRyYW5zZm9ybVJlc3BvbnNlOiBkYXRlSnNvbiB9LFxuICBcdFx0XHQnc2F2ZSc6ICAge21ldGhvZDonUE9TVCd9LFxuICBcdFx0XHQndXBkYXRlJzoge21ldGhvZDonUFVUJyB9LFxuICBcdFx0XHQncXVlcnknOiAge21ldGhvZDonR0VUJywgaXNBcnJheTp0cnVlfSxcbiAgXHRcdFx0J3JlbW92ZSc6IHttZXRob2Q6J0RFTEVURSd9LFxuICBcdFx0XHQnZGVsZXRlJzoge21ldGhvZDonREVMRVRFJ31cblxuXHRcdH0pO1xuXHR9XG5cblxuXHQvLyBTZXJ2aWNlXG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAuYXBpJykuc2VydmljZSgnaXNJZCcsIGlzSWQpO1xuXHRmdW5jdGlvbiBpc0lkICgpIHtcblxuXHRcdHZhciBpc0lkcyA9IFtdO1xuXG5cdFx0dmFyIGFkZElkRGF0YSA9IGZ1bmN0aW9uIChuZXdJRCkge1xuXHRcdFx0aXNJZHMgPSBbXTtcblx0XHRcdGlzSWRzLnB1c2gobmV3SUQpO1xuXHRcdH07XG5cblx0XHR2YXIgZ2V0SWREYXRhID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0cmV0dXJuIGlzSWRzO1xuXHRcdH07XG5cblx0XHRyZXR1cm4ge1xuXHRcdFx0YWRkSWREYXRhOiBhZGRJZERhdGEsXG5cdFx0XHRnZXRJZERhdGE6IGdldElkRGF0YVxuXG5cdFx0fTtcblx0fVxuXG59KSgpO1xuXG4vKlxuXHRTT01FIEFVVEhFTlRJQ0FUSU9OICYgTE9HSU4gSURFQVMuXG5cblx0U2ltcGxlTG9naW46IFxuXHRcdGh0dHBzOi8vZ2l0aHViLmNvbS9jb3JuZmxvdXJibHVlL2FuZ3VsYXItcmVnaXN0cmF0aW9uLWxvZ2luLWV4YW1wbGVcblxuXHRBdXRob3JpemF0aW9uOiBcblx0XHRodHRwOi8vamFzb253YXRtb3JlLmNvbS9wb3N0LzIwMTUvMDMvMTAvQW5ndWxhckpTLVVzZXItUmVnaXN0cmF0aW9uLWFuZC1Mb2dpbi1FeGFtcGxlLmFzcHgjYXBwXG5cblx0Um9sZXM6IFxuXHRcdGh0dHA6Ly9hcnRodXIuZ29uaWdiZXJnLmNvbS8yMDEzLzA2LzI5L2FuZ3VsYXJqcy1yb2xlLWJhc2VkLWF1dGgvXG5cdFx0XG5cdFF1aWNrIFJvbGUtQmFzZWQgQXV0aGVudGljYXRpb246XG5cdFx0aHR0cDovL2pvbnNhbXdlbGwuY29tL3VybC1yb3V0ZS1hdXRob3JpemF0aW9uLWFuZC1zZWN1cml0eS1pbi1hbmd1bGFyL1xuXG4qL1xuIiwiKGZ1bmN0aW9uKCkge1xuXG5cdCd1c2Ugc3RyaWN0JztcblxuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLmdsb2JhbCcsW10pXG5cblx0XHQuZmlsdGVyKCdwYWdpbmF0aW9uJywgZnVuY3Rpb24gKCkge1xuXG5cdFx0XHRyZXR1cm4gZnVuY3Rpb24gKCBpbnB1dCwgc3RhcnQgKSB7XG5cblx0XHRcdFx0c3RhcnQgPSArc3RhcnQ7XG5cdFx0XHRcdHJldHVybiBpbnB1dC5zbGljZShzdGFydCk7XG5cblx0XHRcdH07XG5cdFx0fSk7XG5cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5jb250ZW50JywgW10pXG5cdC5jb250cm9sbGVyKCdDb250ZW50Y29udHJvbGxlcicsIENvbnRlbnRjb250cm9sbGVyKVxuXHQuZGlyZWN0aXZlKCd0b2dnbGVFbG0nLCB0b2dnbGVFbG0pO1xuXG5cdGZ1bmN0aW9uIENvbnRlbnRjb250cm9sbGVyICggJHNjb3BlICkge31cblxuXHRmdW5jdGlvbiB0b2dnbGVFbG0gKCkge1xuXG5cdFx0dmFyIGRpcmVjdGl2ZSA9IHtcblx0XHRcdGxpbms6IGxpbmssXG5cdFx0XHRyZXN0cmljdDogJ0EnXG5cdFx0fVxuXG5cdFx0cmV0dXJuIGRpcmVjdGl2ZTtcblxuXHRcdGZ1bmN0aW9uIGxpbmsoc2NvcGUsIGVsZW0sIGF0dHJzKSB7XG5cblx0XHRcdGVsZW0ub24oXCJjbGlja1wiLCBmdW5jdGlvbigpIHtcblxuXHQgICAgICAgICAgICAkKCcud3JhcHBlcicpLnRvZ2dsZUNsYXNzKCdwYW5lbEFuaW1hdGVzJyk7XG5cdCAgICAgICAgICAgIGVsZW0uZmluZCgnc3BhbicpLmh0bWwoJCgnLmNsb3NlQnRuIHNwYW4nKS50ZXh0KCkgPT0gJ09wZW4nID8gJ0Nsb3NlJyA6ICdPcGVuJyk7XG5cblx0ICAgICAgICB9KTtcblxuXHRcdH1cblxuXHR9XG5cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5sb2dpbicsW10pXG5cdC5jb250cm9sbGVyKCdMb2dpbkNvbnRyb2xsZXInLCBMb2dpbkNvbnRyb2xsZXIpO1xuXG5cdGZ1bmN0aW9uIExvZ2luQ29udHJvbGxlciAoICRsb2NhdGlvbiwgQXV0aGVudGljYXRpb25TZXJ2aWNlICkgeyBcblxuXHRcdHZhciBsb2dpbkNvbnRyb2xsZXIgPSB0aGlzO1xuXG5cdFx0KGZ1bmN0aW9uIGluaXRDb250cm9sbGVyKCkge1xuXG5cdFx0XHQvLyByZXNldCBsb2dpblN0YXR1c1xuXHRcdFx0QXV0aGVudGljYXRpb25TZXJ2aWNlLkNsZWFyQ3JlZGVudGlhbHMoKTtcblxuXHRcdH0pKCk7XG5cblx0XHRsb2dpbkNvbnRyb2xsZXIuc3VibWl0TG9naW4gPSBmdW5jdGlvbigpIHtcblxuXHRcdFx0Ly9sb2dpbkNvbnRyb2xsZXIuZGF0YUxvYWRpbmcgPSB0cnVlO1xuXG5cdFx0XHRBdXRoZW50aWNhdGlvblNlcnZpY2UuTG9naW4obG9naW5Db250cm9sbGVyLnVzZXJuYW1lLCBsb2dpbkNvbnRyb2xsZXIucGFzc3dvcmQsIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG5cblx0XHRcdFx0aWYgKHJlc3BvbnNlLnN1Y2Nlc3MpIHtcblxuXHRcdFx0XHRcdGNvbnNvbGUubG9nKCd5ZXMnKTtcblx0XHRcdFx0XHRBdXRoZW50aWNhdGlvblNlcnZpY2UuU2V0Q3JlZGVudGlhbHMobG9naW5Db250cm9sbGVyLnVzZXJuYW1lKTtcblx0XHRcdFx0XHQkbG9jYXRpb24ucGF0aCgnL2NvbnRlbnQnKTtcblxuXHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0Y29uc29sZS5sb2coJ25vcGUnKTtcblx0XHRcdFx0XHQvL2xvZ2luQ29udHJvbGxlci5kYXRhTG9hZGluZyA9IGZhbHNlO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0fSk7XG5cblxuXG5cdFx0fVxuXHR9XG5cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5tYWluJyxbXSlcblx0Ly8uY29uZmlnKGNvbmZpZylcblx0LmNvbnRyb2xsZXIoJ01haW5Db250cm9sbGVyJywgTWFpbkNvbnRyb2xsZXIpO1xuXG4vKlxuXHRmdW5jdGlvbiBjb25maWcgKCAkc3RhdGVQcm92aWRlciwgJHVybFJvdXRlclByb3ZpZGVyICkge1xuXG5cdFx0JHN0YXRlUHJvdmlkZXJcblx0XHRcdC5zdGF0ZSgnYXBwLmFsbCcsIHtcblx0XHRcdFx0dXJsOicvYWxsVGFza3MnLFxuXHRcdFx0XHRhYnN0cmFjdDogZmFsc2UsXG5cdFx0XHRcdHZpZXdzOiB7XG5cdFx0XHRcdFx0J3V0aWxpdGllc0BhcHAnOiB7XG5cdFx0XHRcdFx0XHR0ZW1wbGF0ZVVybDogJ2h0bWwvdXRpbGl0aWVzL3V0aWxpdGllcy5pbmRleC5odG1sJyxcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXI6ICdVdGlsaXRpZXNDb250cm9sbGVyJyxcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXJBczogJ1V0aWxpdGllcydcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdCdtYWluQGFwcCc6IHtcblx0XHRcdFx0XHRcdHRlbXBsYXRlVXJsOiAnaHRtbC9tYWluL21haW4uaW5kZXguaHRtbCcsXG5cdFx0XHRcdFx0XHRjb250cm9sbGVyOiAnTWFpbkNvbnRyb2xsZXInXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHR9XG4qL1xuXHRmdW5jdGlvbiBNYWluQ29udHJvbGxlcigpIHt9XG5cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5tZW51JyxbXSlcblx0LmNvbnRyb2xsZXIoJ01lbnVDb250cm9sbGVyJywgTWVudUNvbnRyb2xsZXIpXG5cdC5kaXJlY3RpdmUoJ2VsbVBhbmVsJywgZWxtUGFuZWwpO1xuXG5cdGZ1bmN0aW9uIE1lbnVDb250cm9sbGVyKCBNZW51bGlzdCwgUHJvamVjdGxpc3QsIFByb2plY3RsYWJlbCwgUHJvamVjdGZpbHRlciwgJHN0YXRlUGFyYW1zICkge1xuXG5cdFx0dmFyIE1lbnVDb250cm9sbGVyID0gdGhpcztcblxuXHRcdE1lbnVDb250cm9sbGVyLm1lbnVMaXN0ID0gTWVudWxpc3QucXVlcnkoKTtcblx0XHRNZW51Q29udHJvbGxlci5wcm9qZWN0TGlzdCA9IFByb2plY3RsaXN0LnF1ZXJ5KCk7XG5cdFx0TWVudUNvbnRyb2xsZXIucHJvamVjdExhYmVsID0gUHJvamVjdGxhYmVsLnF1ZXJ5KCk7XG5cdFx0TWVudUNvbnRyb2xsZXIucHJvamVjdEZpbHRlciA9IFByb2plY3RmaWx0ZXIucXVlcnkoKTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gZWxtUGFuZWwoKSB7XG5cblx0XHR2YXIgZGlyZWN0aXZlID0ge1xuXHRcdFx0bGluazogbGluayxcblx0XHRcdHJlc3RyaWN0OiAnQSdcblx0XHR9O1xuXG5cdFx0cmV0dXJuIGRpcmVjdGl2ZTtcblxuXHRcdGZ1bmN0aW9uIGxpbmsgIChzY29wZSwgZWxlbSwgYXR0cnMpIHtcblxuXHRcdFx0ZWxlbS5vbignY2xpY2snLCBmdW5jdGlvbigpe1xuXHRcdFx0XHR2YXIgJHRleHRUYXJnZXQgPSAkKCcuY29udGVudCAuY2xvc2VCdG4nKS5maW5kKCdzcGFuJyk7XG5cdFx0XHRcdCQoJy53cmFwcGVyJykudG9nZ2xlQ2xhc3MoJ3BhbmVsQW5pbWF0ZXMnKTtcblx0XHRcdFx0JHRleHRUYXJnZXQuaHRtbCggJHRleHRUYXJnZXQudGV4dCgpID09ICdDbG9zZScgPyAnT3BlbicgOiAnQ2xvc2UnKTtcblx0XHRcdH0pO1xuXHRcdH1cblx0fVxuXG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG5cblx0J3VzZXIgc3RyaWN0JztcblxuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLnJlZ2lzdGVyJywgW10pXG5cdC5jb250cm9sbGVyKCdSZWdpc3RlckNvbnRyb2xsZXInLCBSZWdpc3RlckNvbnRyb2xsZXIpO1xuXG5cdGZ1bmN0aW9uIFJlZ2lzdGVyQ29udHJvbGxlcigpIHt9O1xuXG59KSgpOyIsIihmdW5jdGlvbigpe1xuXG5cdCd1c2Ugc3RyaWN0JztcblxuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLnV0aWxpdHknLFtdKVxuXHQuY29udHJvbGxlcignVXRpbGl0aWVzQ29udHJvbGxlcicsIFV0aWxpdGllc0NvbnRyb2xsZXIpO1xuXG5cdGZ1bmN0aW9uIFV0aWxpdGllc0NvbnRyb2xsZXIoKSB7XG5cdFx0XG5cdFx0dmFyIFV0aWxpdGllc0NvbnRyb2xsZXIgPSB0aGlzO1xuXHRcdFV0aWxpdGllc0NvbnRyb2xsZXIudGltZSA9IG5ldyBEYXRlKCk7XG5cdFx0XG5cdH0gXG5cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5hbGx0b2RvJywgW1xuXHRcdCdhcHAuYWxsdG9kby5jcmVhdGUnLFxuXHRcdCdhcHAuYWxsdG9kby5lZGl0J1xuXHRdKVxuXHQuY29uZmlnKGNvbmZpZylcblx0LmNvbnRyb2xsZXIoJ0FsbHRhc2tDb250cm9sbGVyJywgQWxsdGFza0NvbnRyb2xsZXIpO1xuXG5cdGZ1bmN0aW9uIGNvbmZpZyAoICRzdGF0ZVByb3ZpZGVyICkge1xuXG5cdFx0JHN0YXRlUHJvdmlkZXJcblx0XHRcdC5zdGF0ZSgnYXBwLmFsbCcsIHtcblx0XHRcdFx0dXJsOicvYWxsdGFzay86aWQnLFxuXHRcdFx0XHR2aWV3czoge1xuXHRcdFx0XHRcdCd1dGlsaXRpZXNAYXBwJzoge1xuXHRcdFx0XHRcdFx0dGVtcGxhdGVVcmw6ICdodG1sL3V0aWxpdGllcy91dGlsaXRpZXMuaW5kZXguaHRtbCcsXG5cdFx0XHRcdFx0XHRjb250cm9sbGVyOiAnVXRpbGl0aWVzQ29udHJvbGxlcicsXG5cdFx0XHRcdFx0XHRjb250cm9sbGVyQXM6ICd1dGlsaXRpZXMnXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHQnbWFpbkBhcHAnOiB7XG5cdFx0XHRcdFx0XHRwYXJhbXM6WydpZCddLFxuXHRcdFx0XHRcdFx0dGVtcGxhdGVVcmw6ICdodG1sL21haW4vbWFpbi5hbGwvYWxsLmluZGV4Lmh0bWwnLFxuXHRcdFx0XHRcdFx0Y29udHJvbGxlcjogJ0FsbHRhc2tDb250cm9sbGVyJyxcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXJBczogJ3RvZG8nXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0fVxuXG5cdGZ1bmN0aW9uIEFsbHRhc2tDb250cm9sbGVyICggQWxsdGFza3MsICRzdGF0ZSwgaXNJZCApIHtcblxuXHRcdHZhciBBbGx0YXNrQ29udHJvbGxlciA9IHRoaXM7XG5cdFx0XHRBbGx0YXNrQ29udHJvbGxlci5udW1iZXJDdXJyZW50ID0gMDtcblx0XHRcblx0XHRBbGx0YXNrQ29udHJvbGxlci5wYWdlU2l6ZSA9IDM7XG5cdFx0QWxsdGFza0NvbnRyb2xsZXIuYWxsVGFza3MgPSBBbGx0YXNrcy5xdWVyeSgpO1xuXHRcdFxuXHRcdEFsbHRhc2tDb250cm9sbGVyLm51bWJlck9mUGFnZXMgPSAgZnVuY3Rpb24gKCkge1xuXHRcdFx0cmV0dXJuIE1hdGguY2VpbChBbGx0YXNrQ29udHJvbGxlci5hbGxUYXNrcy5sZW5ndGggLyBBbGx0YXNrQ29udHJvbGxlci5wYWdlU2l6ZSk7XG5cdFx0fTtcblxuXHRcdEFsbHRhc2tDb250cm9sbGVyLnJlbW92ZVRhc2sgPSBmdW5jdGlvbiAodGFzaykge1xuXHRcdFx0QWxsdGFza3MuZGVsZXRlKHt9LCB7J2lkJzogdGFzay5pZH0sIGZ1bmN0aW9uICgpIHtcblx0XHRcdCAgICBBbGx0YXNrQ29udHJvbGxlci5hbGxUYXNrcyA9IEFsbHRhc2tzLnF1ZXJ5KCk7XG5cdFx0XHR9KTtcblx0XHR9O1xuXHRcdFxuXHRcdEFsbHRhc2tDb250cm9sbGVyLmVkaXRUYXNrID0gZnVuY3Rpb24gKHRhc2spIHtcblx0XHRcdGlzSWQuYWRkSWREYXRhKHRhc2suaWQpO1xuXHRcdFx0JHN0YXRlLmdvKCdhcHAuZWRpdCcpO1xuXHRcdH07XG5cdFx0XG5cdH1cblxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAuYXJjaGl2ZScsW10pXG5cdC5jb25maWcoY29uZmlnKVxuXHQuY29udHJvbGxlcignY29udHJvbGxlckFyY2hpdmUnLCBjb250cm9sbGVyQXJjaGl2ZSk7XG5cblx0ZnVuY3Rpb24gY29uZmlnICggJHN0YXRlUHJvdmlkZXIsICR1cmxSb3V0ZXJQcm92aWRlciApIHtcblx0XHRcblx0XHQkc3RhdGVQcm92aWRlclxuXHRcdFx0LnN0YXRlKCdhcHAuYXJjaGl2ZScsIHtcblx0XHRcdFx0dXJsOiAnL2FyY2hpdmUnLFxuXHRcdFx0XHR2aWV3czoge1xuXHRcdFx0XHRcdCd1dGlsaXRpZXNAYXBwJzoge1xuXHRcdFx0XHRcdHRlbXBsYXRlVXJsOiAnaHRtbC91dGlsaXRpZXMvdXRpbGl0aWVzLmluZGV4Lmh0bWwnLFxuXHRcdFx0XHRcdGNvbnRyb2xsZXI6ICdVdGlsaXRpZXNDb250cm9sbGVyJyxcblx0XHRcdFx0XHRjb250cm9sbGVyQXM6ICd1dGlsaXRpZXMnXG5cdFx0XHRcdH0sXG5cdFx0XHRcdCdtYWluQGFwcCc6IHtcblx0XHRcdFx0XHR0ZW1wbGF0ZVVybDogJ2h0bWwvbWFpbi9tYWluLmFyY2hpdmVkL2FyY2hpdmVkLmluZGV4Lmh0bWwnLFxuXHRcdFx0XHRcdGNvbnRyb2xsZXI6ICdjb250cm9sbGVyQXJjaGl2ZScsXG5cdFx0XHRcdFx0Y29udHJvbGxlckFzOiAnYXJjaGl2ZWQnXG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXG5cdGZ1bmN0aW9uIGNvbnRyb2xsZXJBcmNoaXZlKCkge31cblxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuXG5cdCd1c2Ugc3RyaWN0JztcblxuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLm5leHQnLFtdKVxuXHQuY29uZmlnKGNvbmZpZylcblx0LmNvbnRyb2xsZXIoJ2NvbnRyb2xsZXJOZXh0RGF5cycsIGNvbnRyb2xsZXJOZXh0RGF5cyk7XG5cblx0ZnVuY3Rpb24gY29uZmlnICggJHN0YXRlUHJvdmlkZXIsICR1cmxSb3V0ZXJQcm92aWRlciApIHtcblxuXHRcdCRzdGF0ZVByb3ZpZGVyXG5cdFx0XHQuc3RhdGUoJ2FwcC5uZXh0Jywge1xuXHRcdFx0XHR1cmw6Jy9uZXh0LzppZCcsXG5cdFx0XHRcdHZpZXdzOiB7XG5cdFx0XHRcdFx0J3V0aWxpdGllc0BhcHAnOiB7XG5cdFx0XHRcdFx0XHR0ZW1wbGF0ZVVybDogJ2h0bWwvdXRpbGl0aWVzL3V0aWxpdGllcy5pbmRleC5odG1sJyxcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXI6ICdVdGlsaXRpZXNDb250cm9sbGVyJyxcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXJBczogJ3V0aWxpdGllcydcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdCdtYWluQGFwcCc6IHtcblx0XHRcdFx0XHRcdHRlbXBsYXRlVXJsOiAnaHRtbC9tYWluL21haW4udGFza1NldmVuL3NldmVuLmluZGV4Lmh0bWwnLFxuXHRcdFx0XHRcdFx0Y29udHJvbGxlcjogJ2NvbnRyb2xsZXJOZXh0RGF5cycsXG5cdFx0XHRcdFx0XHRjb250cm9sbGVyQXM6ICduZXh0U2V2ZW4nXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0fVxuXG5cdGZ1bmN0aW9uIGNvbnRyb2xsZXJOZXh0RGF5cyAoIEFsbHRhc2tzLCAkc3RhdGUsIGlzSWQgKSB7XG5cblx0XHR2YXIgY29udHJvbGxlck5leHREYXlzID0gdGhpcztcblxuXHRcdGNvbnRyb2xsZXJOZXh0RGF5cy50b2RheURhdGUgPSBtb21lbnQoKS5mb3JtYXQoJ0wnKTtcblx0XHRjb250cm9sbGVyTmV4dERheXMud2Vla0RhdGUgPSBtb21lbnQoKS53ZWVrZGF5KDcpLmZvcm1hdCgnTCcpO1xuXG5cdFx0Y29udHJvbGxlck5leHREYXlzLm5leHRTZXZlbkV2ZW50cyA9IEFsbHRhc2tzLnF1ZXJ5KHt9LCBmdW5jdGlvbigpIHtcblxuXHRcdFx0dmFyIGFycmF5UG9zID0gW107XG5cblx0XHRcdGFuZ3VsYXIuZm9yRWFjaChjb250cm9sbGVyTmV4dERheXMubmV4dFNldmVuRXZlbnRzLCBmdW5jdGlvbiAodmFsdWUsIGtleSkge1xuXG5cdFx0XHRcdGlmICggbW9tZW50KHZhbHVlLmRhdGVOdW0pLmZvcm1hdCgnTCcpID49IGNvbnRyb2xsZXJOZXh0RGF5cy50b2RheURhdGUgJiYgbW9tZW50KHZhbHVlLmRhdGVOdW0pLmZvcm1hdCgnTCcpIDw9IGNvbnRyb2xsZXJOZXh0RGF5cy53ZWVrRGF0ZSApIHtcblx0XHRcdFx0XHRhcnJheVBvcy5wdXNoKHZhbHVlKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRcblx0XHRcdH0pO1xuXG5cdFx0XHRjb250cm9sbGVyTmV4dERheXMubmV4dFNldmVuRXZlbnRzID0gYXJyYXlQb3M7XG5cblx0XHR9KTtcblxuXHRcdGNvbnRyb2xsZXJOZXh0RGF5cy5yZW1vdmVUYXNrID0gZnVuY3Rpb24gKHRhc2spIHtcblx0XHRcdEFsbHRhc2tzLmRlbGV0ZSh7fSwgeydpZCc6IHRhc2suaWR9LCBmdW5jdGlvbiAoKSB7XG5cdFx0XHQgICAgQWxsdGFza0NvbnRyb2xsZXIuYWxsVGFza3MgPSBBbGx0YXNrcy5xdWVyeSgpO1xuXHRcdFx0fSk7XG5cdFx0fTtcblxuXHRcdGNvbnRyb2xsZXJOZXh0RGF5cy5lZGl0VGFzayA9IGZ1bmN0aW9uICh0YXNrKSB7XG5cdFx0XHRpc0lkLmFkZElkRGF0YSh0YXNrLmlkKTtcblx0XHRcdCRzdGF0ZS5nbygnYXBwLmVkaXQnKTtcblx0XHR9O1xuXHR9XG5cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC50b2RheScsW10pXG5cdC5jb25maWcoY29uZmlnKVxuXHQuY29udHJvbGxlcignVG9kYXlDb250cm9sbGVyJywgVG9kYXlDb250cm9sbGVyKTtcblx0Ly8uZmlsdGVyKCdmaWx0ZXJUb2RheUV2ZW50cycsIGZpbHRlclRvZGF5RXZlbnRzKTtcblxuXHRmdW5jdGlvbiBjb25maWcgKCAkc3RhdGVQcm92aWRlciwgJHVybFJvdXRlclByb3ZpZGVyICkge1xuXG5cdFx0JHN0YXRlUHJvdmlkZXJcblx0XHRcdC5zdGF0ZSgnYXBwLnRvZGF5Jywge1xuXHRcdFx0XHR1cmw6Jy90b2RheScsXG5cdFx0XHRcdHZpZXdzOiB7XG5cdFx0XHRcdFx0J3V0aWxpdGllc0BhcHAnOiB7XG5cdFx0XHRcdFx0XHR0ZW1wbGF0ZVVybDogJ2h0bWwvdXRpbGl0aWVzL3V0aWxpdGllcy5pbmRleC5odG1sJyxcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXI6ICdVdGlsaXRpZXNDb250cm9sbGVyJyxcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXJBczogJ3V0aWxpdGllcydcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdCdtYWluQGFwcCc6IHtcblx0XHRcdFx0XHRcdHRlbXBsYXRlVXJsOiAnaHRtbC9tYWluL21haW4udG9kYXkvdG9kYXkuaW5kZXguaHRtbCcsXG5cdFx0XHRcdFx0XHRjb250cm9sbGVyOiAnVG9kYXlDb250cm9sbGVyJyxcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXJBczogJ3RvZGF5J1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdH1cblxuXHRmdW5jdGlvbiBUb2RheUNvbnRyb2xsZXIoIEFsbHRhc2tzLCAkc3RhdGUsIGlzSWQgKSB7XG5cblx0XHR2YXIgVG9kYXlDb250cm9sbGVyID0gdGhpcztcblxuXHRcdFRvZGF5Q29udHJvbGxlci50b2RheURhdGUgPSBtb21lbnQoKS5mb3JtYXQoJ0wnKTtcblxuXHRcdFRvZGF5Q29udHJvbGxlci50b2RvVGFza3MgPSBBbGx0YXNrcy5xdWVyeSh7fSwgZnVuY3Rpb24oKSB7XG5cblx0XHRcdHZhciBhcnJheVBvcyA9IFtdO1xuXHRcdFx0XHRcblx0XHRcdGFuZ3VsYXIuZm9yRWFjaChUb2RheUNvbnRyb2xsZXIudG9kb1Rhc2tzLCBmdW5jdGlvbih2YWx1ZSwga2V5KXtcblxuXHRcdFx0XHRpZiAoIFRvZGF5Q29udHJvbGxlci50b2RheURhdGUgPT0gbW9tZW50KHZhbHVlLmRhdGVOdW0pLmZvcm1hdCgnTCcpICkge1xuXHRcdFx0XHRcdGFycmF5UG9zLnB1c2godmFsdWUpO1xuXHRcdFx0XHR9XG5cblx0XHRcdH0pO1xuXG5cdFx0XHRUb2RheUNvbnRyb2xsZXIudG9kb1Rhc2tzID0gYXJyYXlQb3M7XG5cblx0XHR9KTtcblx0XHRUb2RheUNvbnRyb2xsZXIucmVtb3ZlVGFzayA9IGZ1bmN0aW9uICh0YXNrKSB7XG5cdFx0XHRBbGx0YXNrcy5kZWxldGUoe30sIHsnaWQnOiB0YXNrLmlkfSwgZnVuY3Rpb24gKCkge1xuXHRcdFx0ICAgIEFsbHRhc2tDb250cm9sbGVyLmFsbFRhc2tzID0gQWxsdGFza3MucXVlcnkoKTtcblx0XHRcdH0pO1xuXHRcdH07XG5cdFx0VG9kYXlDb250cm9sbGVyLmVkaXRUYXNrID0gZnVuY3Rpb24gKHRhc2spIHtcblx0XHRcdGlzSWQuYWRkSWREYXRhKHRhc2suaWQpO1xuXHRcdFx0JHN0YXRlLmdvKCdhcHAuZWRpdCcpO1xuXHRcdH07XG5cdH1cblxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuXG5cdCd1c2Ugc3RyaWN0JztcblxuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLmFsbHRvZG8uY3JlYXRlJyxbXG5cdFx0J2FwcC5hbGx0b2RvJ1xuXHRdKVxuXHQuY29uZmlnKGNvbmZpZylcblx0LmNvbnRyb2xsZXIoJ0NyZWF0ZXRvZG9Db250cm9sbGVyJywgQ3JlYXRldG9kb0NvbnRyb2xsZXIpO1xuXG5cdGZ1bmN0aW9uIGNvbmZpZyAoICRzdGF0ZVByb3ZpZGVyICkge1xuXG5cdFx0JHN0YXRlUHJvdmlkZXJcblx0XHRcdC5zdGF0ZSgnYXBwLmNyZWF0ZScsIHtcblxuXHRcdFx0XHR1cmw6ICcvYWxsdGFzay9jcmVhdGUnLFxuXHRcdFx0XHR2aWV3czoge1xuXHRcdFx0XHRcdCdvdmVybGF5QCc6IHtcblx0XHRcdFx0XHRcdHRlbXBsYXRlVXJsOiAnL2h0bWwvbWFpbi9tYWluLmFsbC9jcmVhdGUuYWxsL2NyZWF0ZS5hbGwuaHRtbCcsXG5cdFx0XHRcdFx0XHRjb250cm9sbGVyOiAnQ3JlYXRldG9kb0NvbnRyb2xsZXInLFxuXHRcdFx0XHRcdFx0Y29udHJvbGxlckFzOiAnY3JlYXRlVG9kbydcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdCdtYWluQGFwcCc6IHtcblx0XHRcdFx0XHRcdHRlbXBsYXRlVXJsOiAnaHRtbC9tYWluL21haW4uYWxsL2FsbC5pbmRleC5odG1sJyxcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXI6ICdBbGx0YXNrQ29udHJvbGxlcicsXG5cdFx0XHRcdFx0XHRjb250cm9sbGVyQXM6ICd0b2RvJ1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHR9KTtcblx0fVxuXG5cdGZ1bmN0aW9uIENyZWF0ZXRvZG9Db250cm9sbGVyICggQWxsdGFza3MsIFByb2plY3RsYWJlbCwgVXNlcikge1xuXG5cdFx0dmFyIENyZWF0ZXRvZG9Db250cm9sbGVyID0gdGhpcztcblxuXHRcdENyZWF0ZXRvZG9Db250cm9sbGVyLnN1Ym1pdHRlZCA9IGZhbHNlO1xuXG5cdFx0Q3JlYXRldG9kb0NvbnRyb2xsZXIucHJpb3JpdHkgPSBQcm9qZWN0bGFiZWwucXVlcnkoKTtcblxuXHRcdENyZWF0ZXRvZG9Db250cm9sbGVyLnVzZXIgPSBVc2VyLnF1ZXJ5KHt9LCBmdW5jdGlvbigpIHtcblxuXHRcdFx0dmFyIHVzZXJEYXRhID0gW107XG5cblx0XHRcdGFuZ3VsYXIuZm9yRWFjaChDcmVhdGV0b2RvQ29udHJvbGxlci51c2VyLCBmdW5jdGlvbih2YWx1ZSwga2V5KSB7XG5cblx0XHRcdFx0dXNlckRhdGEucHVzaChDcmVhdGV0b2RvQ29udHJvbGxlci51c2VyW2tleV0ubmFtZSk7XG5cblx0XHRcdH0pO1xuXG5cdFx0XHRDcmVhdGV0b2RvQ29udHJvbGxlci51c2VyID0gdXNlckRhdGE7XG5cdFx0XHRcblx0XHR9KTtcblxuXHRcdENyZWF0ZXRvZG9Db250cm9sbGVyLmNyZWF0ZVRhc2sgPSBmdW5jdGlvbiAoKSB7XG5cblx0XHRcdGlmIChDcmVhdGV0b2RvQ29udHJvbGxlci5mb3JtQWRkVGFza3MuJHZhbGlkKSB7XG5cblx0XHRcdFx0Q3JlYXRldG9kb0NvbnRyb2xsZXIuZGF0YSA9IHt9O1xuXG5cdFx0XHRcdENyZWF0ZXRvZG9Db250cm9sbGVyLmRhdGEgPSB7XG5cblx0XHRcdFx0XHRwcm9qZWN0OiBDcmVhdGV0b2RvQ29udHJvbGxlci5wcm9qZWN0LFxuXHRcdFx0XHRcdGxhYmVsOiBDcmVhdGV0b2RvQ29udHJvbGxlci5sYWJlbCxcblx0XHRcdFx0XHRuYW1lOiBDcmVhdGV0b2RvQ29udHJvbGxlci5uYW1lLFxuXHRcdFx0XHRcdGRhdGVOdW06IENyZWF0ZXRvZG9Db250cm9sbGVyLmRhdGVOdW0sXG5cdFx0XHRcdFx0aGVhZGVyQ29tbWVudDogQ3JlYXRldG9kb0NvbnRyb2xsZXIuaGVhZGVyQ29tbWVudCxcblx0XHRcdFx0XHRjb21tZW50OiBDcmVhdGV0b2RvQ29udHJvbGxlci5jb21tZW50LFxuXHRcdFx0XHRcdGRvbmU6IENyZWF0ZXRvZG9Db250cm9sbGVyLmRvbmVcblx0XHRcdFx0XHRcblx0XHRcdFx0fTtcblxuXHRcdFx0XHRjb25zb2xlLmxvZyhDcmVhdGV0b2RvQ29udHJvbGxlci5kYXRhLmRvbmUpO1xuXG5cdFx0XHRcdEFsbHRhc2tzLnNhdmUoQ3JlYXRldG9kb0NvbnRyb2xsZXIuZGF0YSk7XG5cdFx0XHRcdCQoJ2Zvcm0nKS5maW5kKCdpbnB1dCcpLnZhbCgnJyk7XG5cdFx0XHRcdCQoJ3AubXNnLWVycm9yJykucmVtb3ZlQ2xhc3MoJ21zZy1lcnJvcicpO1xuXG5cdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdCQoJ2Zvcm0nKS5maW5kKCdwJykuYWRkQ2xhc3MoJ21zZy1lcnJvcicpO1xuXHRcdFx0XHRDcmVhdGV0b2RvQ29udHJvbGxlci5zdWJtaXR0ZWQgPSB0cnVlO1xuXG5cdFx0XHR9XG5cdFx0fTtcblx0XHRcblx0XHRDcmVhdGV0b2RvQ29udHJvbGxlci5yZXNldFZhbCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0JCgnZm9ybScpLmZpbmQoJ2lucHV0JykudmFsKCcnKTtcblx0XHR9O1xuXG5cdH1cblxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAuYWxsdG9kby5lZGl0JyxbXG5cdFx0J2FwcC5hbGx0b2RvJ1xuXHRdKVxuXHQuY29uZmlnKGNvbmZpZylcblx0LmNvbnRyb2xsZXIoJ0VkaXR0b2RvQ29udHJvbGxlcicsIEVkaXR0b2RvQ29udHJvbGxlciApO1xuXG5cdGZ1bmN0aW9uIGNvbmZpZyAoICRzdGF0ZVByb3ZpZGVyICkge1xuXG5cdFx0JHN0YXRlUHJvdmlkZXJcblx0XHRcdC5zdGF0ZSgnYXBwLmVkaXQnLCB7XG5cblx0XHRcdFx0dXJsOiAnL2FsbHRhc2svZWRpdCcsXG5cdFx0XHRcdHZpZXdzOiB7XG5cblx0XHRcdFx0XHQnb3ZlcmxheUAnOiB7XG5cdFx0XHRcdFx0XHR0ZW1wbGF0ZVVybDogJy9odG1sL21haW4vbWFpbi5hbGwvZWRpdC5hbGwvZWRpdC5hbGwuaHRtbCcsXG5cdFx0XHRcdFx0XHRjb250cm9sbGVyOiAnRWRpdHRvZG9Db250cm9sbGVyJyxcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXJBczogJ2VkaXRUb2RvJ1xuXHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHQnbWFpbkBhcHAnOiB7XG5cdFx0XHRcdFx0XHR0ZW1wbGF0ZVVybDogJ2h0bWwvbWFpbi9tYWluLmFsbC9hbGwuaW5kZXguaHRtbCcsXG5cdFx0XHRcdFx0XHRjb250cm9sbGVyOiAnQWxsdGFza0NvbnRyb2xsZXInLFxuXHRcdFx0XHRcdFx0Y29udHJvbGxlckFzOiAndG9kbydcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdH1cblxuXHRmdW5jdGlvbiBFZGl0dG9kb0NvbnRyb2xsZXIgKCBpc0lkLCBBbGx0YXNrcywgJHN0YXRlICkge1xuXG5cdFx0dmFyIEVkaXR0b2RvQ29udHJvbGxlciA9IHRoaXM7XG5cdFx0dmFyIGVkaXRJZCA9IGlzSWQuZ2V0SWREYXRhKCk7XG5cblx0XHRFZGl0dG9kb0NvbnRyb2xsZXIuaWRFZGl0ID0gZWRpdElkWzBdO1xuXHRcdEVkaXR0b2RvQ29udHJvbGxlci50YXNrID0gQWxsdGFza3MuZ2V0KHt9LHsnaWQnOiBlZGl0SWRbMF19KTtcblxuXHRcdEVkaXR0b2RvQ29udHJvbGxlci5lZGl0VGFzayA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XG5cdFx0XHRFZGl0dG9kb0NvbnRyb2xsZXIubmV3VGFzayA9IHtcblxuXHRcdFx0XHRpZDogZWRpdElkWzBdLFxuXHRcdFx0XHRwcm9qZWN0OiBFZGl0dG9kb0NvbnRyb2xsZXIudGFzay5wcm9qZWN0LFxuXHRcdFx0XHRsYWJlbDogRWRpdHRvZG9Db250cm9sbGVyLnRhc2subGFiZWwsXG5cdFx0XHRcdG5hbWU6IEVkaXR0b2RvQ29udHJvbGxlci50YXNrLm5hbWUsXG5cdFx0XHRcdGRhdGVOdW06IEVkaXR0b2RvQ29udHJvbGxlci50YXNrLmRhdGVOdW0sXG5cdFx0XHRcdGhlYWRlckNvbW1lbnQ6IEVkaXR0b2RvQ29udHJvbGxlci50YXNrLmhlYWRlckNvbW1lbnQsXG5cdFx0XHRcdGNvbW1lbnQ6IEVkaXR0b2RvQ29udHJvbGxlci50YXNrLmNvbW1lbnQsXG5cdFx0XHRcdGRvbmU6IEVkaXR0b2RvQ29udHJvbGxlci50YXNrLmRvbmVcblxuXHRcdFx0fTtcblxuXHRcdFx0RWRpdHRvZG9Db250cm9sbGVyLm5ld1Rhc2suZGF0ZU51bSA9IG5ldyBEYXRlIChFZGl0dG9kb0NvbnRyb2xsZXIudGFzay5kYXRlTnVtKTtcblx0XHRcdEFsbHRhc2tzLnVwZGF0ZShFZGl0dG9kb0NvbnRyb2xsZXIubmV3VGFzayk7XG5cdFx0XHQkc3RhdGUuZ28oJ2FwcC5hbGwnKTtcblxuXHRcdH07XG5cblx0XHRFZGl0dG9kb0NvbnRyb2xsZXIuY2FuY2VsRWRpdCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0JHN0YXRlLmdvKCdhcHAuYWxsJyk7XHRcdFx0XG5cdFx0fTtcblx0XHRcblx0fVxuXG59KSgpOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==