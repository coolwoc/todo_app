!function(){"use strict";function t(t,e,o){t.otherwise("/"),o.state("login",{url:"",views:{"content@":{templateUrl:"html/login/login.index.html",controller:"LoginController",controllerAs:"login"}}}).state("app",{url:"/content",views:{menu:{templateUrl:"html/menu/menu.index.html",controller:"MenuController",controllerAs:"menuData"},"content@":{templateUrl:"html/content/content.index.html",controller:"Contentcontroller",controllerAs:"content"}}})}angular.module("app",[]);angular.module("app",["ui.router","ngAnimate","ngResource","app.api","app.global","app.menu","app.login","app.main","app.utility","app.alltodo","app.next","app.today","app.content","app.archive"]).constant("sitename","applocal").constant("apibase","http://localhost:3000").constant("apiversion","/v1.0").config(t),t.$inject=["$urlRouterProvider","$httpProvider","$stateProvider"]}(),function(){"use strict";function t(t,e){return t(e+"/userlogin",{},{get:{method:"GET",isArray:!0}})}function e(){return{isError:function(t){return 1==t?!0:!1}}}function o(){var t;return{get:function(){return t=localStorage.getItem("id_token")},set:function(e){return localStorage.setItem("id_token",e),t=e}}}function n(t,e){return t(e+"/userlogin")}function a(t,e){return t(e+"/mainmenu",{},{get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:!0},"delete":{method:"DELETE"}})}function l(t,e){return t(e+"/project",{},{get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:!0},"delete":{method:"DELETE"}})}function r(t,e){return t(e+"/labels",{},{get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:!0},"delete":{method:"DELETE"}})}function i(t,e){return t(e+"/filters",{},{get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:!0},"delete":{method:"DELETE"}})}function s(t,e){var o=function(t){return t=angular.fromJson(t),t.dateNum=new Date(t.dateNum),t};return t(e+"/task/:id",{id:"@id"},{get:{method:"GET",transformResponse:o},save:{method:"POST"},update:{method:"PUT"},query:{method:"GET",isArray:!0},remove:{method:"DELETE"},"delete":{method:"DELETE"}})}function u(){var t=[],e=function(e){t.push(e)},o=function(){return t};return{addIdData:e,getIdData:o}}angular.module("app.api",[]),angular.module("app.api").factory("Login",t),t.$inject=["$resource","apibase"],angular.module("app.api").factory("Statuscode",e),angular.module("app.api").factory("Token",o),angular.module("app.api").factory("User",n),n.$inject=["$resource","apibase"],angular.module("app.api").factory("Menulist",a),a.$inject=["$resource","apibase"],angular.module("app.api").factory("Projectlist",l),l.$inject=["$resource","apibase"],angular.module("app.api").factory("Projectlabel",r),r.$inject=["$resource","apibase"],angular.module("app.api").factory("Projectfilter",i),i.$inject=["$resource","apibase"],angular.module("app.api").factory("Alltasks",s),s.$inject=["$resource","apibase"],angular.module("app.api").service("isId",u)}(),function(){"use strict";angular.module("app.global",[]).filter("pagination",function(){return function(t,e){return e=+e,t.slice(e)}})}(),function(){"use strict";function t(t){}function e(){function t(t,e,o){e.on("click",function(){$(".wrapper").toggleClass("panelAnimates"),e.find("span").html("Open"==$(".closeBtn span").text()?"Close":"Open")})}var e={link:t,restrict:"A"};return e}angular.module("app.content",[]).controller("Contentcontroller",t).directive("toggleElm",e),t.$inject=["$scope"]}(),function(){"use strict";function t(t,e){var o=this;o.submitted=!1,o.submitLogin=function(){o.userlogin={},o.userlogin={email:o.email,pass:o.pass};var n=[];n=e.get(o.userlogin,function(){"undefined"==typeof o.userlogin.email?l():a()});var a=function(){t.go("app")},l=function(){$(".errorLogin").css({display:"block"})};$("input").val("")}}angular.module("app.login",[]).controller("LoginController",t),t.$inject=["$state","Login"]}(),function(){"use strict";function t(){}angular.module("app.main",[]).controller("MainController",t)}(),function(){"use strict";function t(t,e,o,n,a){var l=this;l.menuList=t.query(),l.projectList=e.query(),l.projectLabel=o.query(),l.projectFilter=n.query()}function e(){function t(t,e,o){e.on("click",function(){var t=$(".content .closeBtn").find("span");$(".wrapper").toggleClass("panelAnimates"),t.html("Close"==t.text()?"Open":"Close")})}var e={link:t,restrict:"A"};return e}angular.module("app.menu",[]).controller("MenuController",t).directive("elmPanel",e),t.$inject=["Menulist","Projectlist","Projectlabel","Projectfilter","$stateParams"]}(),function(){"use strict";function t(){var t=this;t.time=new Date}angular.module("app.utility",[]).controller("UtilitiesController",t)}(),function(){"use strict";function t(t,e){t.state("app.archive",{url:"/archive",views:{"utilities@app":{templateUrl:"html/utilities/utilities.index.html",controller:"UtilitiesController",controllerAs:"utilities"},"main@app":{templateUrl:"html/main/main.archived/archived.index.html",controller:"controllerArchive",controllerAs:"archived"}}})}function e(){}angular.module("app.archive",[]).config(t).controller("controllerArchive",e),t.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){"use strict";function t(t){t.state("app.all",{url:"/alltask/:id",views:{"utilities@app":{templateUrl:"html/utilities/utilities.index.html",controller:"UtilitiesController",controllerAs:"utilities"},"main@app":{params:["id"],templateUrl:"html/main/main.all/all.index.html",controller:"AlltaskController",controllerAs:"todo"}}})}function e(t,e,o){var n=this;n.numberCurrent=0,n.pageSize=3,n.allTasks=t.query(),n.numberOfPages=function(){return Math.ceil(n.allTasks.length/n.pageSize)},n.removeTask=function(e){t["delete"]({},{id:e.id},function(){n.allTasks=t.query()})},n.editTask=function(t){o.addIdData(t.id),e.go("app.edit")}}angular.module("app.alltodo",["app.alltodo.create","app.alltodo.edit"]).config(t).controller("AlltaskController",e),t.$inject=["$stateProvider"],e.$inject=["Alltasks","$state","isId"]}(),function(){"use strict";function t(t,e){t.state("app.next",{url:"/next/:id",views:{"utilities@app":{templateUrl:"html/utilities/utilities.index.html",controller:"UtilitiesController",controllerAs:"utilities"},"main@app":{templateUrl:"html/main/main.taskSeven/seven.index.html",controller:"controllerNextDays",controllerAs:"nextSeven"}}})}function e(t,e){var o=this;o.todayDate=moment().format("L"),o.weekDate=moment().weekday(7).format("L"),console.log(o.todayDate),console.log(o.weekDate),o.nextSevenEvents=t.query({},function(){var t=[];angular.forEach(o.nextSevenEvents,function(e,n){moment(e.dateNum).format("L")>=o.todayDate&&moment(e.dateNum).format("L")<=o.weekDate&&t.push(e)}),o.nextSevenEvents=t})}angular.module("app.next",[]).config(t).controller("controllerNextDays",e),t.$inject=["$stateProvider","$urlRouterProvider"],e.$inject=["Alltasks","$state"]}(),function(){"use strict";function t(t,e){t.state("app.today",{url:"/today",views:{"utilities@app":{templateUrl:"html/utilities/utilities.index.html",controller:"UtilitiesController",controllerAs:"utilities"},"main@app":{templateUrl:"html/main/main.today/today.index.html",controller:"TodayController",controllerAs:"today"}}})}function e(t,e){var o=this;o.todayDate=moment().format("L"),o.todoTasks=t.query({},function(){var t=[];angular.forEach(o.todoTasks,function(e,n){o.todayDate==moment(e.dateNum).format("L")&&t.push(e)}),o.todoTasks=t})}angular.module("app.today",[]).config(t).controller("TodayController",e),t.$inject=["$stateProvider","$urlRouterProvider"],e.$inject=["Alltasks","$state"]}(),function(){"use strict";function t(t){t.state("app.create",{url:"/alltask/create",views:{"overlay@":{templateUrl:"/html/main/main.all/create.all/create.all.html",controller:"CreatetodoController",controllerAs:"createTodo"},"main@app":{templateUrl:"html/main/main.all/all.index.html",controller:"AlltaskController",controllerAs:"todo"}}})}function e(t,e,o){var n=this;n.submitted=!1,n.priority=e.query(),n.user=o.query({},function(){var t=[];angular.forEach(n.user,function(e,o){t.push(n.user[o].name)}),n.user=t}),n.createTask=function(){n.formAddTasks.$valid?(n.data={},n.data={project:n.project,label:n.label,name:n.name,dateNum:n.dateNum,headerComment:n.headerComment,comment:n.comment,done:n.done},console.log(n.data.done),t.save(n.data),$("form").find("input").val(""),$("p.msg-error").removeClass("msg-error")):($("form").find("p").addClass("msg-error"),n.submitted=!0)},n.resetVal=function(){$("form").find("input").val("")}}angular.module("app.alltodo.create",["app.alltodo"]).config(t).controller("CreatetodoController",e),t.$inject=["$stateProvider"],e.$inject=["Alltasks","Projectlabel","User"]}(),function(){"use strict";function t(t){t.state("app.edit",{url:"/alltask/edit",views:{"overlay@":{templateUrl:"/html/main/main.all/edit.all/edit.all.html",controller:"EdittodoController",controllerAs:"editTodo"},"main@app":{templateUrl:"html/main/main.all/all.index.html",controller:"AlltaskController",controllerAs:"todo"}}})}function e(t,e,o){var n=this,a=t.getIdData();n.idEdit=a[0],n.task=e.get({},{id:a[0]}),n.editTask=function(){n.newTask={id:a[0],project:n.task.project,label:n.task.label,name:n.task.name,dateNum:n.task.dateNum,headerComment:n.task.headerComment,comment:n.task.comment,done:n.task.done},n.newTask.dateNum=new Date(n.task.dateNum),e.update(n.newTask),o.go("app.all")},n.cancelEdit=function(){o.go("app.all")}}angular.module("app.alltodo.edit",["app.alltodo"]).config(t).controller("EdittodoController",e),t.$inject=["$stateProvider"],e.$inject=["isId","Alltasks","$state"]}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJnbG9iYWwuanMiLCJmaWx0ZXJzLmpzIiwiY29udGVudC9jb250ZW50Q29udHJvbGxlci5qcyIsImxvZ2luL2xvZ2luQ29udHJvbGxlci5qcyIsIm1haW4vbWFpbkNvbnRyb2xsZXIuanMiLCJtZW51L21lbnVDb250cm9sbGVyLmpzIiwidXRpbGl0aWVzL3V0aWxpdGllc0NvbnRyb2xsZXIuanMiLCJtYWluL21haW4uYXJjaGl2ZWQvYXJjaGl2ZWRDb250cm9sbGVyLmpzIiwibWFpbi9tYWluLmFsbC9hbGxDb250cm9sbGVyLmpzIiwibWFpbi9tYWluLnRhc2tTZXZlbi9zZXZlbkNvbnRyb2xsZXIuanMiLCJtYWluL21haW4udG9kYXkvdG9kYXlDb250cm9sbGVyLmpzIiwibWFpbi9tYWluLmFsbC9jcmVhdGUuYWxsL2NyZWF0ZWFsbENvbnRyb2xsZXIuanMiLCJtYWluL21haW4uYWxsL2VkaXQuYWxsL2VkaXRhbGxDb250cm9sbGVyLmpzIl0sIm5hbWVzIjpbImNvbmZpZyIsIiR1cmxSb3V0ZXJQcm92aWRlciIsIiRodHRwUHJvdmlkZXIiLCIkc3RhdGVQcm92aWRlciIsIm90aGVyd2lzZSIsInN0YXRlIiwidXJsIiwidmlld3MiLCJjb250ZW50QCIsInRlbXBsYXRlVXJsIiwiY29udHJvbGxlciIsImNvbnRyb2xsZXJBcyIsIm1lbnUiLCJhbmd1bGFyIiwibW9kdWxlIiwiY29uc3RhbnQiLCIkaW5qZWN0IiwiTG9naW4iLCIkcmVzb3VyY2UiLCJhcGliYXNlIiwiZ2V0IiwibWV0aG9kIiwiaXNBcnJheSIsIlN0YXR1c2NvZGUiLCJpc0Vycm9yIiwidmFsdWUiLCJUb2tlbiIsImtleSIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJzZXQiLCJ2YWwiLCJzZXRJdGVtIiwiVXNlciIsIk1lbnVsaXN0Iiwic2F2ZSIsInF1ZXJ5IiwiZGVsZXRlIiwiUHJvamVjdGxpc3QiLCJQcm9qZWN0bGFiZWwiLCJQcm9qZWN0ZmlsdGVyIiwiQWxsdGFza3MiLCJkYXRlSnNvbiIsImZyb21Kc29uIiwiZGF0ZU51bSIsIkRhdGUiLCJpZCIsInRyYW5zZm9ybVJlc3BvbnNlIiwidXBkYXRlIiwicmVtb3ZlIiwiaXNJZCIsImlzSWRzIiwiYWRkSWREYXRhIiwibmV3SUQiLCJwdXNoIiwiZ2V0SWREYXRhIiwiZmFjdG9yeSIsInNlcnZpY2UiLCJmaWx0ZXIiLCJpbnB1dCIsInN0YXJ0Iiwic2xpY2UiLCJDb250ZW50Y29udHJvbGxlciIsIiRzY29wZSIsInRvZ2dsZUVsbSIsImxpbmsiLCJzY29wZSIsImVsZW0iLCJhdHRycyIsIm9uIiwiJCIsInRvZ2dsZUNsYXNzIiwiZmluZCIsImh0bWwiLCJ0ZXh0IiwiZGlyZWN0aXZlIiwicmVzdHJpY3QiLCJMb2dpbkNvbnRyb2xsZXIiLCIkc3RhdGUiLCJ0aGlzIiwic3VibWl0dGVkIiwic3VibWl0TG9naW4iLCJ1c2VybG9naW4iLCJlbWFpbCIsInBhc3MiLCJsb2dpblJlc3VsdCIsImlzTm90VmFsaWQiLCJpc1ZhbGlkIiwiZ28iLCJjc3MiLCJkaXNwbGF5IiwiTWFpbkNvbnRyb2xsZXIiLCJNZW51Q29udHJvbGxlciIsIiRzdGF0ZVBhcmFtcyIsIm1lbnVMaXN0IiwicHJvamVjdExpc3QiLCJwcm9qZWN0TGFiZWwiLCJwcm9qZWN0RmlsdGVyIiwiZWxtUGFuZWwiLCIkdGV4dFRhcmdldCIsIlV0aWxpdGllc0NvbnRyb2xsZXIiLCJ0aW1lIiwidXRpbGl0aWVzQGFwcCIsIm1haW5AYXBwIiwiY29udHJvbGxlckFyY2hpdmUiLCJwYXJhbXMiLCJBbGx0YXNrQ29udHJvbGxlciIsIm51bWJlckN1cnJlbnQiLCJwYWdlU2l6ZSIsImFsbFRhc2tzIiwibnVtYmVyT2ZQYWdlcyIsIk1hdGgiLCJjZWlsIiwibGVuZ3RoIiwicmVtb3ZlVGFzayIsInRhc2siLCJlZGl0VGFzayIsImNvbnRyb2xsZXJOZXh0RGF5cyIsInRvZGF5RGF0ZSIsIm1vbWVudCIsImZvcm1hdCIsIndlZWtEYXRlIiwid2Vla2RheSIsImNvbnNvbGUiLCJsb2ciLCJuZXh0U2V2ZW5FdmVudHMiLCJhcnJheVBvcyIsImZvckVhY2giLCJUb2RheUNvbnRyb2xsZXIiLCJ0b2RvVGFza3MiLCJvdmVybGF5QCIsIkNyZWF0ZXRvZG9Db250cm9sbGVyIiwicHJpb3JpdHkiLCJ1c2VyIiwidXNlckRhdGEiLCJuYW1lIiwiY3JlYXRlVGFzayIsImZvcm1BZGRUYXNrcyIsIiR2YWxpZCIsImRhdGEiLCJwcm9qZWN0IiwibGFiZWwiLCJoZWFkZXJDb21tZW50IiwiY29tbWVudCIsImRvbmUiLCJyZW1vdmVDbGFzcyIsImFkZENsYXNzIiwicmVzZXRWYWwiLCJFZGl0dG9kb0NvbnRyb2xsZXIiLCJlZGl0SWQiLCJpZEVkaXQiLCJuZXdUYXNrIiwiY2FuY2VsRWRpdCJdLCJtYXBwaW5ncyI6IkNBQUEsV0FFQSxZQTBCQSxTQUFBQSxHQUFBQyxFQUFBQyxFQUFBQyxHQUVBRixFQUFBRyxVQUFBLEtBRUFELEVBQ0FFLE1BQUEsU0FDQUMsSUFBQSxHQUNBQyxPQUNBQyxZQUNBQyxZQUFBLDhCQUNBQyxXQUFBLGtCQUNBQyxhQUFBLFlBSUFOLE1BQUEsT0FDQUMsSUFBQSxXQUNBQyxPQUNBSyxNQUNBSCxZQUFBLDRCQUNBQyxXQUFBLGlCQUNBQyxhQUFBLFlBRUFILFlBQ0FDLFlBQUEsa0NBQ0FDLFdBQUEsb0JBQ0FDLGFBQUEsY0FsREFFLFFBQUFDLE9BQUEsU0FDQUQsU0FBQUMsT0FBQSxPQUNBLFlBQ0EsWUFDQSxhQUNBLFVBQ0EsYUFDQSxXQUNBLFlBQ0EsV0FDQSxjQUNBLGNBQ0EsV0FDQSxZQUNBLGNBQ0EsZ0JBR0FDLFNBQUEsV0FBQSxZQUNBQSxTQUFBLFVBQUEseUJBQ0FBLFNBQUEsYUFBQSxTQUVBZixPQUFBQSxHQXFDQ0EsRUFBT2dCLFNBQVcscUJBQXNCLGdCQUFpQixxQkMvRDFELFdBRUEsWUFLQSxTQUFBQyxHQUFBQyxFQUFBQyxHQUNBLE1BQUFELEdBQUFDLEVBQUEsaUJBRUFDLEtBQUFDLE9BQUEsTUFBQUMsU0FBQSxLQUtBLFFBQUFDLEtBQ0EsT0FDQUMsUUFBQSxTQUFBQyxHQUNBLE1BQUEsSUFBQUEsR0FBQSxHQUFBLElBTUEsUUFBQUMsS0FDQSxHQUFBQyxFQUNBLFFBQ0FQLElBQUEsV0FFQSxNQURBTyxHQUFBQyxhQUFBQyxRQUFBLGFBR0FDLElBQUEsU0FBQUMsR0FHQSxNQUZBSCxjQUFBSSxRQUFBLFdBQUFELEdBQ0FKLEVBQUFJLElBT0EsUUFBQUUsR0FBQWYsRUFBQUMsR0FDQSxNQUFBRCxHQUFBQyxFQUFBLGNBSUEsUUFBQWUsR0FBQWhCLEVBQUFDLEdBQ0EsTUFBQUQsR0FBQUMsRUFBQSxnQkFHQUMsS0FBQUMsT0FBQSxPQUNBYyxNQUFBZCxPQUFBLFFBQ0FlLE9BQUFmLE9BQUEsTUFBQUMsU0FBQSxHQUNBZSxVQUFBaEIsT0FBQSxZQU1BLFFBQUFpQixHQUFBcEIsRUFBQUMsR0FDQSxNQUFBRCxHQUFBQyxFQUFBLGVBR0FDLEtBQUFDLE9BQUEsT0FDQWMsTUFBQWQsT0FBQSxRQUNBZSxPQUFBZixPQUFBLE1BQUFDLFNBQUEsR0FDQWUsVUFBQWhCLE9BQUEsWUFNQSxRQUFBa0IsR0FBQXJCLEVBQUFDLEdBQ0EsTUFBQUQsR0FBQUMsRUFBQSxjQUdBQyxLQUFBQyxPQUFBLE9BQ0FjLE1BQUFkLE9BQUEsUUFDQWUsT0FBQWYsT0FBQSxNQUFBQyxTQUFBLEdBQ0FlLFVBQUFoQixPQUFBLFlBTUEsUUFBQW1CLEdBQUF0QixFQUFBQyxHQUNBLE1BQUFELEdBQUFDLEVBQUEsZUFHQUMsS0FBQUMsT0FBQSxPQUNBYyxNQUFBZCxPQUFBLFFBQ0FlLE9BQUFmLE9BQUEsTUFBQUMsU0FBQSxHQUNBZSxVQUFBaEIsT0FBQSxZQU1BLFFBQUFvQixHQUFBdkIsRUFBQUMsR0FFQSxHQUFBdUIsR0FBQSxTQUFBRCxHQUdBLE1BRkFBLEdBQUE1QixRQUFBOEIsU0FBQUYsR0FDQUEsRUFBQUcsUUFBQSxHQUFBQyxNQUFBSixFQUFBRyxTQUNBSCxFQUdBLE9BQUF2QixHQUFBQyxFQUFBLGFBQUEyQixHQUFBLFFBR0ExQixLQUFBQyxPQUFBLE1BQUEwQixrQkFBQUwsR0FDQVAsTUFBQWQsT0FBQSxRQUNBMkIsUUFBQTNCLE9BQUEsT0FDQWUsT0FBQWYsT0FBQSxNQUFBQyxTQUFBLEdBQ0EyQixRQUFBNUIsT0FBQSxVQUNBZ0IsVUFBQWhCLE9BQUEsWUFNQSxRQUFBNkIsS0FFQSxHQUFBQyxNQUVBQyxFQUFBLFNBQUFDLEdBQ0FGLEVBQUFHLEtBQUFELElBR0FFLEVBQUEsV0FDQSxNQUFBSixHQUdBLFFBQ0FDLFVBQUFBLEVBQ0FHLFVBQUFBLEdBaklBMUMsUUFBQUMsT0FBQSxjQUVBRCxRQUFBQyxPQUFBLFdBQUEwQyxRQUFBLFFBQUF2QyxHRHdFQ0EsRUFBTUQsU0FBVyxZQUFhLFdDaEUvQkgsUUFBQUMsT0FBQSxXQUFBMEMsUUFBQSxhQUFBakMsR0FTQVYsUUFBQUMsT0FBQSxXQUFBMEMsUUFBQSxRQUFBOUIsR0FnQkFiLFFBQUFDLE9BQUEsV0FBQTBDLFFBQUEsT0FBQXZCLEdEc0VDQSxFQUFLakIsU0FBVyxZQUFhLFdDakU5QkgsUUFBQUMsT0FBQSxXQUFBMEMsUUFBQSxXQUFBdEIsR0QrRUNBLEVBQVNsQixTQUFXLFlBQWEsV0NsRWxDSCxRQUFBQyxPQUFBLFdBQUEwQyxRQUFBLGNBQUFsQixHRGdGQ0EsRUFBWXRCLFNBQVcsWUFBYSxXQ25FckNILFFBQUFDLE9BQUEsV0FBQTBDLFFBQUEsZUFBQWpCLEdEaUZDQSxFQUFhdkIsU0FBVyxZQUFhLFdDcEV0Q0gsUUFBQUMsT0FBQSxXQUFBMEMsUUFBQSxnQkFBQWhCLEdEa0ZDQSxFQUFjeEIsU0FBVyxZQUFhLFdDckV2Q0gsUUFBQUMsT0FBQSxXQUFBMEMsUUFBQSxXQUFBZixHRDRGQ0EsRUFBU3pCLFNBQVcsWUFBYSxXQ3RFbENILFFBQUFDLE9BQUEsV0FBQTJDLFFBQUEsT0FBQVAsTUN0SEEsV0FFQSxZQUVBckMsU0FBQUMsT0FBQSxpQkFFQTRDLE9BQUEsYUFBQSxXQUVBLE1BQUEsVUFBQUMsRUFBQUMsR0FHQSxNQURBQSxJQUFBQSxFQUNBRCxFQUFBRSxNQUFBRCxTQ1hBLFdBRUEsWUFNQSxTQUFBRSxHQUFBQyxJQUVBLFFBQUFDLEtBU0EsUUFBQUMsR0FBQUMsRUFBQUMsRUFBQUMsR0FFQUQsRUFBQUUsR0FBQSxRQUFBLFdBRUFDLEVBQUEsWUFBQUMsWUFBQSxpQkFDQUosRUFBQUssS0FBQSxRQUFBQyxLQUFBLFFBQUFILEVBQUEsa0JBQUFJLE9BQUEsUUFBQSxVQVpBLEdBQUFDLElBQ0FWLEtBQUFBLEVBQ0FXLFNBQUEsSUFHQSxPQUFBRCxHQWJBOUQsUUFBQUMsT0FBQSxrQkFDQUosV0FBQSxvQkFBQW9ELEdBQ0FhLFVBQUEsWUFBQVgsR0h1T0NGLEVBQWtCOUMsU0FBVyxhSTdPOUIsV0FFQSxZQUtBLFNBQUE2RCxHQUFBQyxFQUFBN0QsR0FFQSxHQUFBNEQsR0FBQUUsSUFDQUYsR0FBQUcsV0FBQSxFQUVBSCxFQUFBSSxZQUFBLFdBRUFKLEVBQUFLLGFBQ0FMLEVBQUFLLFdBQ0FDLE1BQUFOLEVBQUFNLE1BQ0FDLEtBQUFQLEVBQUFPLEtBR0EsSUFBQUMsS0FDQUEsR0FBQXBFLEVBQUFHLElBQUF5RCxFQUFBSyxVQUFBLFdBQ0EsbUJBQUFMLEdBQUFLLFVBQUEsTUFBQUksSUFBQUMsS0FHQSxJQUFBQSxHQUFBLFdBQ0FULEVBQUFVLEdBQUEsUUFHQUYsRUFBQSxXQUNBaEIsRUFBQSxlQUFBbUIsS0FBQUMsUUFBQSxVQUlBcEIsR0FBQSxTQUFBdkMsSUFBQSxLQTlCQWxCLFFBQUFDLE9BQUEsZ0JBQ0FKLFdBQUEsa0JBQUFtRSxHSndTQ0EsRUFBZ0I3RCxTQUFXLFNBQVUsWUs3U3RDLFdBRUEsWUE0QkEsU0FBQTJFLE1BMUJBOUUsUUFBQUMsT0FBQSxlQUVBSixXQUFBLGlCQUFBaUYsTUNOQSxXQUVBLFlBTUEsU0FBQUMsR0FBQTFELEVBQUFJLEVBQUFDLEVBQUFDLEVBQUFxRCxHQUVBLEdBQUFELEdBQUFiLElBRUFhLEdBQUFFLFNBQUE1RCxFQUFBRSxRQUNBd0QsRUFBQUcsWUFBQXpELEVBQUFGLFFBQ0F3RCxFQUFBSSxhQUFBekQsRUFBQUgsUUFDQXdELEVBQUFLLGNBQUF6RCxFQUFBSixRQUlBLFFBQUE4RCxLQVNBLFFBQUFqQyxHQUFBQyxFQUFBQyxFQUFBQyxHQUVBRCxFQUFBRSxHQUFBLFFBQUEsV0FDQSxHQUFBOEIsR0FBQTdCLEVBQUEsc0JBQUFFLEtBQUEsT0FDQUYsR0FBQSxZQUFBQyxZQUFBLGlCQUNBNEIsRUFBQTFCLEtBQUEsU0FBQTBCLEVBQUF6QixPQUFBLE9BQUEsV0FaQSxHQUFBQyxJQUNBVixLQUFBQSxFQUNBVyxTQUFBLElBR0EsT0FBQUQsR0F0QkE5RCxRQUFBQyxPQUFBLGVBQ0FKLFdBQUEsaUJBQUFrRixHQUNBakIsVUFBQSxXQUFBdUIsR04yVkNOLEVBQWU1RSxTQUFXLFdBQVksY0FBZSxlQUFnQixnQkFBaUIsbUJPald2RixXQUVBLFlBS0EsU0FBQW9GLEtBRUEsR0FBQUEsR0FBQXJCLElBQ0FxQixHQUFBQyxLQUFBLEdBQUF4RCxNQU5BaEMsUUFBQUMsT0FBQSxrQkFDQUosV0FBQSxzQkFBQTBGLE1DTEEsV0FFQSxZQU1BLFNBQUFwRyxHQUFBRyxFQUFBRixHQUVBRSxFQUNBRSxNQUFBLGVBQ0FDLElBQUEsV0FDQUMsT0FDQStGLGlCQUNBN0YsWUFBQSxzQ0FDQUMsV0FBQSxzQkFDQUMsYUFBQSxhQUVBNEYsWUFDQTlGLFlBQUEsOENBQ0FDLFdBQUEsb0JBQ0FDLGFBQUEsZUFNQSxRQUFBNkYsTUF4QkEzRixRQUFBQyxPQUFBLGtCQUNBZCxPQUFBQSxHQUNBVSxXQUFBLG9CQUFBOEYsR1J5WkN4RyxFQUFPZ0IsU0FBVyxpQkFBa0IseUJTL1pyQyxXQUVBLFlBU0EsU0FBQWhCLEdBQUFHLEdBRUFBLEVBQ0FFLE1BQUEsV0FDQUMsSUFBQSxlQUNBQyxPQUNBK0YsaUJBQ0E3RixZQUFBLHNDQUNBQyxXQUFBLHNCQUNBQyxhQUFBLGFBRUE0RixZQUNBRSxRQUFBLE1BQ0FoRyxZQUFBLG9DQUNBQyxXQUFBLG9CQUNBQyxhQUFBLFdBTUEsUUFBQStGLEdBQUFqRSxFQUFBcUMsRUFBQTVCLEdBRUEsR0FBQXdELEdBQUEzQixJQUNBMkIsR0FBQUMsY0FBQSxFQUVBRCxFQUFBRSxTQUFBLEVBQ0FGLEVBQUFHLFNBQUFwRSxFQUFBTCxRQUVBc0UsRUFBQUksY0FBQSxXQUNBLE1BQUFDLE1BQUFDLEtBQUFOLEVBQUFHLFNBQUFJLE9BQUFQLEVBQUFFLFdBRUFGLEVBQUFRLFdBQUEsU0FBQUMsR0FDQTFFLEVBQUFBLGNBQUFLLEdBQUFxRSxFQUFBckUsSUFBQSxXQUNBNEQsRUFBQUcsU0FBQXBFLEVBQUFMLFdBR0FzRSxFQUFBVSxTQUFBLFNBQUFELEdBQ0FqRSxFQUFBRSxVQUFBK0QsRUFBQXJFLElBQ0FnQyxFQUFBVSxHQUFBLGFBOUNBM0UsUUFBQUMsT0FBQSxlQUNBLHFCQUNBLHFCQUVBZCxPQUFBQSxHQUNBVSxXQUFBLG9CQUFBZ0csR1R5YkMxRyxFQUFPZ0IsU0FBVyxrQkF3QmxCMEYsRUFBa0IxRixTQUFXLFdBQVksU0FBVSxXVTFkcEQsV0FFQSxZQU1BLFNBQUFoQixHQUFBRyxFQUFBRixHQUVBRSxFQUNBRSxNQUFBLFlBQ0FDLElBQUEsWUFDQUMsT0FDQStGLGlCQUNBN0YsWUFBQSxzQ0FDQUMsV0FBQSxzQkFDQUMsYUFBQSxhQUVBNEYsWUFDQTlGLFlBQUEsNENBQ0FDLFdBQUEscUJBQ0FDLGFBQUEsZ0JBTUEsUUFBQTBHLEdBQUE1RSxFQUFBcUMsR0FFQSxHQUFBdUMsR0FBQXRDLElBRUFzQyxHQUFBQyxVQUFBQyxTQUFBQyxPQUFBLEtBQ0FILEVBQUFJLFNBQUFGLFNBQUFHLFFBQUEsR0FBQUYsT0FBQSxLQUVBRyxRQUFBQyxJQUFBUCxFQUFBQyxXQUNBSyxRQUFBQyxJQUFBUCxFQUFBSSxVQUVBSixFQUFBUSxnQkFBQXBGLEVBQUFMLFNBQUEsV0FFQSxHQUFBMEYsS0FFQWpILFNBQUFrSCxRQUFBVixFQUFBUSxnQkFBQSxTQUFBcEcsRUFBQUUsR0FFQTRGLE9BQUE5RixFQUFBbUIsU0FBQTRFLE9BQUEsTUFBQUgsRUFBQUMsV0FBQUMsT0FBQTlGLEVBQUFtQixTQUFBNEUsT0FBQSxNQUFBSCxFQUFBSSxVQUNBSyxFQUFBeEUsS0FBQTdCLEtBS0E0RixFQUFBUSxnQkFBQUMsSUE5Q0FqSCxRQUFBQyxPQUFBLGVBQ0FkLE9BQUFBLEdBQ0FVLFdBQUEscUJBQUEyRyxHVmlmQ3JILEVBQU9nQixTQUFXLGlCQUFrQixzQkE0QnBDcUcsRUFBbUJyRyxTQUFXLFdBQVksYVduaEIzQyxXQUVBLFlBT0EsU0FBQWhCLEdBQUFHLEVBQUFGLEdBRUFFLEVBQ0FFLE1BQUEsYUFDQUMsSUFBQSxTQUNBQyxPQUNBK0YsaUJBQ0E3RixZQUFBLHNDQUNBQyxXQUFBLHNCQUNBQyxhQUFBLGFBRUE0RixZQUNBOUYsWUFBQSx3Q0FDQUMsV0FBQSxrQkFDQUMsYUFBQSxZQU1BLFFBQUFxSCxHQUFBdkYsRUFBQXFDLEdBRUEsR0FBQWtELEdBQUFqRCxJQUVBaUQsR0FBQVYsVUFBQUMsU0FBQUMsT0FBQSxLQUVBUSxFQUFBQyxVQUFBeEYsRUFBQUwsU0FBQSxXQUVBLEdBQUEwRixLQUVBakgsU0FBQWtILFFBQUFDLEVBQUFDLFVBQUEsU0FBQXhHLEVBQUFFLEdBRUFxRyxFQUFBVixXQUFBQyxPQUFBOUYsRUFBQW1CLFNBQUE0RSxPQUFBLE1BQ0FNLEVBQUF4RSxLQUFBN0IsS0FLQXVHLEVBQUFDLFVBQUFILElBM0NBakgsUUFBQUMsT0FBQSxnQkFDQWQsT0FBQUEsR0FDQVUsV0FBQSxrQkFBQXNILEdYMmlCQ2hJLEVBQU9nQixTQUFXLGlCQUFrQixzQkF3QnBDZ0gsRUFBZ0JoSCxTQUFXLFdBQVksYVl6a0J4QyxXQUVBLFlBUUEsU0FBQWhCLEdBQUFHLEdBRUFBLEVBQ0FFLE1BQUEsY0FFQUMsSUFBQSxrQkFDQUMsT0FDQTJILFlBQ0F6SCxZQUFBLGlEQUNBQyxXQUFBLHVCQUNBQyxhQUFBLGNBRUE0RixZQUNBOUYsWUFBQSxvQ0FDQUMsV0FBQSxvQkFDQUMsYUFBQSxXQU9BLFFBQUF3SCxHQUFBMUYsRUFBQUYsRUFBQU4sR0FFQSxHQUFBa0csR0FBQXBELElBRUFvRCxHQUFBbkQsV0FBQSxFQUVBbUQsRUFBQUMsU0FBQTdGLEVBQUFILFFBRUErRixFQUFBRSxLQUFBcEcsRUFBQUcsU0FBQSxXQUVBLEdBQUFrRyxLQUVBekgsU0FBQWtILFFBQUFJLEVBQUFFLEtBQUEsU0FBQTVHLEVBQUFFLEdBRUEyRyxFQUFBaEYsS0FBQTZFLEVBQUFFLEtBQUExRyxHQUFBNEcsUUFJQUosRUFBQUUsS0FBQUMsSUFJQUgsRUFBQUssV0FBQSxXQUVBTCxFQUFBTSxhQUFBQyxRQUVBUCxFQUFBUSxRQUVBUixFQUFBUSxNQUVBQyxRQUFBVCxFQUFBUyxRQUNBQyxNQUFBVixFQUFBVSxNQUNBTixLQUFBSixFQUFBSSxLQUNBM0YsUUFBQXVGLEVBQUF2RixRQUNBa0csY0FBQVgsRUFBQVcsY0FDQUMsUUFBQVosRUFBQVksUUFDQUMsS0FBQWIsRUFBQWEsTUFJQXJCLFFBQUFDLElBQUFPLEVBQUFRLEtBQUFLLE1BRUF2RyxFQUFBTixLQUFBZ0csRUFBQVEsTUFDQXJFLEVBQUEsUUFBQUUsS0FBQSxTQUFBekMsSUFBQSxJQUNBdUMsRUFBQSxlQUFBMkUsWUFBQSxlQUlBM0UsRUFBQSxRQUFBRSxLQUFBLEtBQUEwRSxTQUFBLGFBQ0FmLEVBQUFuRCxXQUFBLElBS0FtRCxFQUFBZ0IsU0FBQSxXQUNBN0UsRUFBQSxRQUFBRSxLQUFBLFNBQUF6QyxJQUFBLEtBbkZBbEIsUUFBQUMsT0FBQSxzQkFDQSxnQkFFQWQsT0FBQUEsR0FDQVUsV0FBQSx1QkFBQXlILEdaa21CQ25JLEVBQU9nQixTQUFXLGtCQTZEbEJtSCxFQUFxQm5ILFNBQVcsV0FBWSxlQUFnQixXYXZxQjdELFdBRUEsWUFRQSxTQUFBaEIsR0FBQUcsR0FFQUEsRUFDQUUsTUFBQSxZQUVBQyxJQUFBLGdCQUNBQyxPQUVBMkgsWUFDQXpILFlBQUEsNkNBQ0FDLFdBQUEscUJBQ0FDLGFBQUEsWUFHQTRGLFlBQ0E5RixZQUFBLG9DQUNBQyxXQUFBLG9CQUNBQyxhQUFBLFdBT0EsUUFBQXlJLEdBQUFsRyxFQUFBVCxFQUFBcUMsR0FFQSxHQUFBc0UsR0FBQXJFLEtBQ0FzRSxFQUFBbkcsRUFBQUssV0FFQTZGLEdBQUFFLE9BQUFELEVBQUEsR0FDQUQsRUFBQWpDLEtBQUExRSxFQUFBckIsUUFBQTBCLEdBQUF1RyxFQUFBLEtBRUFELEVBQUFoQyxTQUFBLFdBRUFnQyxFQUFBRyxTQUVBekcsR0FBQXVHLEVBQUEsR0FDQVQsUUFBQVEsRUFBQWpDLEtBQUF5QixRQUNBQyxNQUFBTyxFQUFBakMsS0FBQTBCLE1BQ0FOLEtBQUFhLEVBQUFqQyxLQUFBb0IsS0FDQTNGLFFBQUF3RyxFQUFBakMsS0FBQXZFLFFBQ0FrRyxjQUFBTSxFQUFBakMsS0FBQTJCLGNBQ0FDLFFBQUFLLEVBQUFqQyxLQUFBNEIsUUFDQUMsS0FBQUksRUFBQWpDLEtBQUE2QixNQUlBSSxFQUFBRyxRQUFBM0csUUFBQSxHQUFBQyxNQUFBdUcsRUFBQWpDLEtBQUF2RSxTQUNBSCxFQUFBTyxPQUFBb0csRUFBQUcsU0FDQXpFLEVBQUFVLEdBQUEsWUFJQTRELEVBQUFJLFdBQUEsV0FDQTFFLEVBQUFVLEdBQUEsWUE1REEzRSxRQUFBQyxPQUFBLG9CQUNBLGdCQUVBZCxPQUFBQSxHQUNBVSxXQUFBLHFCQUFBMEksR2Jrc0JDcEosRUFBT2dCLFNBQVcsa0JBb0NsQm9JLEVBQW1CcEksU0FBVyxPQUFRLFdBQVkiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiAoKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXG5cdHZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnYXBwJywgW10pO1xuXHRhbmd1bGFyLm1vZHVsZSgnYXBwJyxbXG5cdFx0J3VpLnJvdXRlcicsXG5cdFx0J25nQW5pbWF0ZScsXG5cdFx0J25nUmVzb3VyY2UnLFxuXHRcdCdhcHAuYXBpJyxcblx0XHQnYXBwLmdsb2JhbCcsXG5cdFx0J2FwcC5tZW51Jyxcblx0XHQnYXBwLmxvZ2luJyxcblx0XHQnYXBwLm1haW4nLFxuXHRcdCdhcHAudXRpbGl0eScsXG5cdFx0J2FwcC5hbGx0b2RvJyxcblx0XHQnYXBwLm5leHQnLFxuXHRcdCdhcHAudG9kYXknLFxuXHRcdCdhcHAuY29udGVudCcsXG5cdFx0J2FwcC5hcmNoaXZlJ1xuXHRdKVxuXG5cdC5jb25zdGFudCgnc2l0ZW5hbWUnLCAnYXBwbG9jYWwnKVxuXHQuY29uc3RhbnQoJ2FwaWJhc2UnLCAnaHR0cDovL2xvY2FsaG9zdDozMDAwJylcblx0LmNvbnN0YW50KCdhcGl2ZXJzaW9uJywgJy92MS4wJylcblxuXHQuY29uZmlnKGNvbmZpZyk7XG5cblx0ZnVuY3Rpb24gY29uZmlnKCR1cmxSb3V0ZXJQcm92aWRlciwgJGh0dHBQcm92aWRlciwgJHN0YXRlUHJvdmlkZXIpIHtcblxuXHRcdCR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoJy8nKTtcblxuXHRcdCRzdGF0ZVByb3ZpZGVyXG5cdFx0XHQuc3RhdGUoJ2xvZ2luJywge1xuXHRcdFx0XHR1cmw6JycsXG5cdFx0XHRcdHZpZXdzOiB7XG5cdFx0XHRcdFx0J2NvbnRlbnRAJzoge1xuXHRcdFx0XHRcdFx0dGVtcGxhdGVVcmw6ICdodG1sL2xvZ2luL2xvZ2luLmluZGV4Lmh0bWwnLFxuXHRcdFx0XHRcdFx0Y29udHJvbGxlcjogJ0xvZ2luQ29udHJvbGxlcicsXG5cdFx0XHRcdFx0XHRjb250cm9sbGVyQXM6ICdsb2dpbidcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0pXG5cdFx0XHQuc3RhdGUoJ2FwcCcsIHtcblx0XHRcdFx0dXJsOiAnL2NvbnRlbnQnLFxuXHRcdFx0XHR2aWV3czoge1xuXHRcdFx0XHRcdCdtZW51Jzoge1xuXHRcdFx0XHRcdFx0dGVtcGxhdGVVcmw6ICdodG1sL21lbnUvbWVudS5pbmRleC5odG1sJyxcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXI6ICdNZW51Q29udHJvbGxlcicsXG5cdFx0XHRcdFx0XHRjb250cm9sbGVyQXM6ICdtZW51RGF0YSdcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdCdjb250ZW50QCc6IHtcblx0XHRcdFx0XHRcdHRlbXBsYXRlVXJsOiAnaHRtbC9jb250ZW50L2NvbnRlbnQuaW5kZXguaHRtbCcsXG5cdFx0XHRcdFx0XHRjb250cm9sbGVyOiAnQ29udGVudGNvbnRyb2xsZXInLFxuXHRcdFx0XHRcdFx0Y29udHJvbGxlckFzOiAnY29udGVudCdcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXG5cdFx0Ly9qd3RJbnRlcmNlcHRvclByb3ZpZGVyLnRva2VuR2V0dGVyLnB1c2goJ2p3dEludGVyY2VwdG9yJyk7XG5cdFx0Ly8kaHR0cFByb3ZpZGVyLmludGVyY2VwdG9ycy5wdXNoKCdhdXRoSW50ZXJjZXB0b3InKTtcblxuXHR9XG5cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5hcGknLCBbXSk7XG5cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5hcGknKS5mYWN0b3J5KCdMb2dpbicsIExvZ2luKTtcblx0ZnVuY3Rpb24gTG9naW4oJHJlc291cmNlLCBhcGliYXNlKSB7XG5cdFx0cmV0dXJuICRyZXNvdXJjZShhcGliYXNlICsgJy91c2VybG9naW4nLCB7fSxcblx0XHR7XG5cdFx0XHQnZ2V0Jzoge21ldGhvZDonR0VUJywgaXNBcnJheTogdHJ1ZX1cblx0XHR9KTtcblx0fVxuXG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAuYXBpJykuZmFjdG9yeSgnU3RhdHVzY29kZScsIFN0YXR1c2NvZGUpO1xuXHRmdW5jdGlvbiBTdGF0dXNjb2RlKCkge1xuXHRcdHJldHVybiB7XG5cdFx0XHRpc0Vycm9yOiBmdW5jdGlvbih2YWx1ZSkgeyBcblx0XHRcdFx0cmV0dXJuICh2YWx1ZSA9PSAxKSA/IHRydWUgOiBmYWxzZTtcblx0XHRcdH1cblx0XHR9O1xuXHR9XG5cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5hcGknKS5mYWN0b3J5KCdUb2tlbicsIFRva2VuKTtcblx0ZnVuY3Rpb24gVG9rZW4oKSB7XG5cdFx0dmFyIGtleTtcblx0XHRyZXR1cm4ge1xuXHRcdFx0Z2V0OiBmdW5jdGlvbigpIHtcblx0XHRcdFx0a2V5ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2lkX3Rva2VuJyk7XG5cdFx0XHRcdHJldHVybiBrZXk7XG5cdFx0XHR9LFxuXHRcdFx0c2V0OiBmdW5jdGlvbih2YWwpIHtcblx0XHRcdFx0bG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2lkX3Rva2VuJywgdmFsKTtcblx0XHRcdFx0a2V5ID0gdmFsO1xuXHRcdFx0XHRyZXR1cm4ga2V5O1xuXHRcdFx0fVxuXHRcdH07XG5cdH1cblxuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLmFwaScpLmZhY3RvcnkoJ1VzZXInLCBVc2VyKTtcblx0ZnVuY3Rpb24gVXNlciggJHJlc291cmNlLCBhcGliYXNlICkge1xuXHRcdHJldHVybiAkcmVzb3VyY2UoYXBpYmFzZSArICcvdXNlcmxvZ2luJyk7XG5cdH0gXG5cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5hcGknKS5mYWN0b3J5KCdNZW51bGlzdCcsIE1lbnVsaXN0KTtcblx0ZnVuY3Rpb24gTWVudWxpc3QoJHJlc291cmNlLCBhcGliYXNlKSB7XG5cdFx0cmV0dXJuICRyZXNvdXJjZShhcGliYXNlICsgJy9tYWlubWVudScsIHt9LCBcblx0XHR7XG5cdFx0XHRcblx0XHRcdCdnZXQnOiAgICB7bWV0aG9kOidHRVQnfSxcbiAgXHRcdFx0J3NhdmUnOiAgIHttZXRob2Q6J1BPU1QnfSxcbiAgXHRcdFx0J3F1ZXJ5JzogIHttZXRob2Q6J0dFVCcsIGlzQXJyYXk6dHJ1ZX0sXG4gIFx0XHRcdCdkZWxldGUnOiB7bWV0aG9kOidERUxFVEUnfVxuXG5cdFx0fSk7XG5cdH1cblxuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLmFwaScpLmZhY3RvcnkoJ1Byb2plY3RsaXN0JywgUHJvamVjdGxpc3QpO1xuXHRmdW5jdGlvbiBQcm9qZWN0bGlzdCgkcmVzb3VyY2UsIGFwaWJhc2UpIHtcblx0XHRyZXR1cm4gJHJlc291cmNlKGFwaWJhc2UgKyAnL3Byb2plY3QnLCB7fSwgXG5cdFx0e1xuXHRcdFx0XG5cdFx0XHQnZ2V0JzogICAge21ldGhvZDonR0VUJ30sXG4gIFx0XHRcdCdzYXZlJzogICB7bWV0aG9kOidQT1NUJ30sXG4gIFx0XHRcdCdxdWVyeSc6ICB7bWV0aG9kOidHRVQnLCBpc0FycmF5OnRydWV9LFxuICBcdFx0XHQnZGVsZXRlJzoge21ldGhvZDonREVMRVRFJ31cblxuXHRcdH0pO1xuXHR9XG5cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5hcGknKS5mYWN0b3J5KCdQcm9qZWN0bGFiZWwnLCBQcm9qZWN0bGFiZWwpO1xuXHRmdW5jdGlvbiBQcm9qZWN0bGFiZWwoJHJlc291cmNlLCBhcGliYXNlKSB7XG5cdFx0cmV0dXJuICRyZXNvdXJjZShhcGliYXNlICsgJy9sYWJlbHMnLCB7fSwgXG5cdFx0e1xuXHRcdFx0XG5cdFx0XHQnZ2V0JzogICAge21ldGhvZDonR0VUJ30sXG4gIFx0XHRcdCdzYXZlJzogICB7bWV0aG9kOidQT1NUJ30sXG4gIFx0XHRcdCdxdWVyeSc6ICB7bWV0aG9kOidHRVQnLCBpc0FycmF5OnRydWV9LFxuICBcdFx0XHQnZGVsZXRlJzoge21ldGhvZDonREVMRVRFJ31cblxuXHRcdH0pO1xuXHR9XG5cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5hcGknKS5mYWN0b3J5KCdQcm9qZWN0ZmlsdGVyJywgUHJvamVjdGZpbHRlcik7XG5cdGZ1bmN0aW9uIFByb2plY3RmaWx0ZXIoJHJlc291cmNlLCBhcGliYXNlKSB7XG5cdFx0cmV0dXJuICRyZXNvdXJjZShhcGliYXNlICsgJy9maWx0ZXJzJywge30sIFxuXHRcdHtcblx0XHRcdFxuXHRcdFx0J2dldCc6ICAgIHttZXRob2Q6J0dFVCd9LFxuICBcdFx0XHQnc2F2ZSc6ICAge21ldGhvZDonUE9TVCd9LFxuICBcdFx0XHQncXVlcnknOiAge21ldGhvZDonR0VUJywgaXNBcnJheTp0cnVlfSxcbiAgXHRcdFx0J2RlbGV0ZSc6IHttZXRob2Q6J0RFTEVURSd9XG5cblx0XHR9KTtcblx0fVxuXG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAuYXBpJykuZmFjdG9yeSgnQWxsdGFza3MnLCBBbGx0YXNrcyk7XG5cdGZ1bmN0aW9uIEFsbHRhc2tzKCRyZXNvdXJjZSwgYXBpYmFzZSkge1xuXG5cdFx0dmFyIGRhdGVKc29uID0gZnVuY3Rpb24gKCBBbGx0YXNrcyApIHtcblx0XHRcdEFsbHRhc2tzID0gYW5ndWxhci5mcm9tSnNvbihBbGx0YXNrcyk7XG5cdFx0XHRBbGx0YXNrcy5kYXRlTnVtID0gbmV3IERhdGUgKEFsbHRhc2tzLmRhdGVOdW0pO1xuXHRcdFx0cmV0dXJuIEFsbHRhc2tzO1x0XG5cdFx0fTtcblxuXHRcdHJldHVybiAkcmVzb3VyY2UoYXBpYmFzZSArICcvdGFzay86aWQnLCB7aWQ6J0BpZCd9LCBcblx0XHR7XG5cdFx0XHRcblx0XHRcdCdnZXQnOiAgICB7bWV0aG9kOidHRVQnLCB0cmFuc2Zvcm1SZXNwb25zZTogZGF0ZUpzb24gfSxcbiAgXHRcdFx0J3NhdmUnOiAgIHttZXRob2Q6J1BPU1QnfSxcbiAgXHRcdFx0J3VwZGF0ZSc6IHttZXRob2Q6J1BVVCcgfSxcbiAgXHRcdFx0J3F1ZXJ5JzogIHttZXRob2Q6J0dFVCcsIGlzQXJyYXk6dHJ1ZX0sXG4gIFx0XHRcdCdyZW1vdmUnOiB7bWV0aG9kOidERUxFVEUnfSxcbiAgXHRcdFx0J2RlbGV0ZSc6IHttZXRob2Q6J0RFTEVURSd9XG5cblx0XHR9KTtcblx0fVxuXG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAuYXBpJykuc2VydmljZSgnaXNJZCcsIGlzSWQpO1xuXHRmdW5jdGlvbiBpc0lkICgpIHtcblxuXHRcdHZhciBpc0lkcyA9IFtdO1xuXG5cdFx0dmFyIGFkZElkRGF0YSA9IGZ1bmN0aW9uIChuZXdJRCkge1xuXHRcdFx0aXNJZHMucHVzaChuZXdJRCk7XG5cdFx0fTtcblxuXHRcdHZhciBnZXRJZERhdGEgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRyZXR1cm4gaXNJZHM7XG5cdFx0fTtcblxuXHRcdHJldHVybiB7XG5cdFx0XHRhZGRJZERhdGE6IGFkZElkRGF0YSxcblx0XHRcdGdldElkRGF0YTogZ2V0SWREYXRhXG5cblx0XHR9O1xuXG5cdH1cblxufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5nbG9iYWwnLFtdKVxuXG5cdFx0LmZpbHRlcigncGFnaW5hdGlvbicsIGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0cmV0dXJuIGZ1bmN0aW9uICggaW5wdXQsIHN0YXJ0ICkge1xuXG5cdFx0XHRcdHN0YXJ0ID0gK3N0YXJ0O1xuXHRcdFx0XHRyZXR1cm4gaW5wdXQuc2xpY2Uoc3RhcnQpO1xuXG5cdFx0XHR9O1xuXHRcdH0pO1xuXG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAuY29udGVudCcsIFtdKVxuXHQuY29udHJvbGxlcignQ29udGVudGNvbnRyb2xsZXInLCBDb250ZW50Y29udHJvbGxlcilcblx0LmRpcmVjdGl2ZSgndG9nZ2xlRWxtJywgdG9nZ2xlRWxtKTtcblxuXHRmdW5jdGlvbiBDb250ZW50Y29udHJvbGxlciAoICRzY29wZSApIHt9XG5cblx0ZnVuY3Rpb24gdG9nZ2xlRWxtICgpIHtcblxuXHRcdHZhciBkaXJlY3RpdmUgPSB7XG5cdFx0XHRsaW5rOiBsaW5rLFxuXHRcdFx0cmVzdHJpY3Q6ICdBJ1xuXHRcdH1cblxuXHRcdHJldHVybiBkaXJlY3RpdmU7XG5cblx0XHRmdW5jdGlvbiBsaW5rKHNjb3BlLCBlbGVtLCBhdHRycykge1xuXG5cdFx0XHRlbGVtLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24oKSB7XG5cblx0ICAgICAgICAgICAgJCgnLndyYXBwZXInKS50b2dnbGVDbGFzcygncGFuZWxBbmltYXRlcycpO1xuXHQgICAgICAgICAgICBlbGVtLmZpbmQoJ3NwYW4nKS5odG1sKCQoJy5jbG9zZUJ0biBzcGFuJykudGV4dCgpID09ICdPcGVuJyA/ICdDbG9zZScgOiAnT3BlbicpO1xuXG5cdCAgICAgICAgfSk7XG5cblx0XHR9XG5cblx0fVxuXG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAubG9naW4nLFtdKVxuXHQuY29udHJvbGxlcignTG9naW5Db250cm9sbGVyJywgTG9naW5Db250cm9sbGVyKTtcblxuXHRmdW5jdGlvbiBMb2dpbkNvbnRyb2xsZXIgKCAkc3RhdGUsIExvZ2luICkge1xuXG5cdFx0dmFyIExvZ2luQ29udHJvbGxlciA9IHRoaXM7XG5cdFx0TG9naW5Db250cm9sbGVyLnN1Ym1pdHRlZCA9IGZhbHNlO1xuXG5cdFx0TG9naW5Db250cm9sbGVyLnN1Ym1pdExvZ2luID0gZnVuY3Rpb24oKSB7XG5cblx0XHRcdExvZ2luQ29udHJvbGxlci51c2VybG9naW4gPSB7fTtcblx0XHRcdExvZ2luQ29udHJvbGxlci51c2VybG9naW4gPSB7XG5cdFx0XHRcdGVtYWlsOiBMb2dpbkNvbnRyb2xsZXIuZW1haWwsXG5cdFx0XHRcdHBhc3M6IExvZ2luQ29udHJvbGxlci5wYXNzXG5cdFx0XHR9O1xuXHRcdFx0XG5cdFx0XHR2YXIgbG9naW5SZXN1bHQgPSBbXTtcbiBcdFx0XHRsb2dpblJlc3VsdCA9IExvZ2luLmdldChMb2dpbkNvbnRyb2xsZXIudXNlcmxvZ2luLCBmdW5jdGlvbigpe1xuIFx0XHRcdFx0KHR5cGVvZihMb2dpbkNvbnRyb2xsZXIudXNlcmxvZ2luLmVtYWlsKSA9PSBcInVuZGVmaW5lZFwiKSA/IGlzTm90VmFsaWQoKSA6IGlzVmFsaWQoKTtcblx0XHRcdH0pO1xuXHRcdFx0XHRcblx0XHRcdHZhciBpc1ZhbGlkID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdCRzdGF0ZS5nbygnYXBwJyk7XG5cdFx0XHR9O1xuXG5cdFx0XHR2YXIgaXNOb3RWYWxpZCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHQkKCcuZXJyb3JMb2dpbicpLmNzcyh7J2Rpc3BsYXknOidibG9jayd9KTtcblx0XHRcdH07XG5cblxuXHRcdFx0JCgnaW5wdXQnKS52YWwoJycpO1xuXG5cdFx0fTtcblx0XHRcblxuXHR9XG5cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5tYWluJyxbXSlcblx0Ly8uY29uZmlnKGNvbmZpZylcblx0LmNvbnRyb2xsZXIoJ01haW5Db250cm9sbGVyJywgTWFpbkNvbnRyb2xsZXIpO1xuXG4vKlxuXHRmdW5jdGlvbiBjb25maWcgKCAkc3RhdGVQcm92aWRlciwgJHVybFJvdXRlclByb3ZpZGVyICkge1xuXG5cdFx0JHN0YXRlUHJvdmlkZXJcblx0XHRcdC5zdGF0ZSgnYXBwLmFsbCcsIHtcblx0XHRcdFx0dXJsOicvYWxsVGFza3MnLFxuXHRcdFx0XHRhYnN0cmFjdDogZmFsc2UsXG5cdFx0XHRcdHZpZXdzOiB7XG5cdFx0XHRcdFx0J3V0aWxpdGllc0BhcHAnOiB7XG5cdFx0XHRcdFx0XHR0ZW1wbGF0ZVVybDogJ2h0bWwvdXRpbGl0aWVzL3V0aWxpdGllcy5pbmRleC5odG1sJyxcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXI6ICdVdGlsaXRpZXNDb250cm9sbGVyJyxcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXJBczogJ1V0aWxpdGllcydcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdCdtYWluQGFwcCc6IHtcblx0XHRcdFx0XHRcdHRlbXBsYXRlVXJsOiAnaHRtbC9tYWluL21haW4uaW5kZXguaHRtbCcsXG5cdFx0XHRcdFx0XHRjb250cm9sbGVyOiAnTWFpbkNvbnRyb2xsZXInXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHR9XG4qL1xuXHRmdW5jdGlvbiBNYWluQ29udHJvbGxlcigpIHt9XG5cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5tZW51JyxbXSlcblx0LmNvbnRyb2xsZXIoJ01lbnVDb250cm9sbGVyJywgTWVudUNvbnRyb2xsZXIpXG5cdC5kaXJlY3RpdmUoJ2VsbVBhbmVsJywgZWxtUGFuZWwpO1xuXG5cdGZ1bmN0aW9uIE1lbnVDb250cm9sbGVyKCBNZW51bGlzdCwgUHJvamVjdGxpc3QsIFByb2plY3RsYWJlbCwgUHJvamVjdGZpbHRlciwgJHN0YXRlUGFyYW1zICkge1xuXG5cdFx0dmFyIE1lbnVDb250cm9sbGVyID0gdGhpcztcblxuXHRcdE1lbnVDb250cm9sbGVyLm1lbnVMaXN0ID0gTWVudWxpc3QucXVlcnkoKTtcblx0XHRNZW51Q29udHJvbGxlci5wcm9qZWN0TGlzdCA9IFByb2plY3RsaXN0LnF1ZXJ5KCk7XG5cdFx0TWVudUNvbnRyb2xsZXIucHJvamVjdExhYmVsID0gUHJvamVjdGxhYmVsLnF1ZXJ5KCk7XG5cdFx0TWVudUNvbnRyb2xsZXIucHJvamVjdEZpbHRlciA9IFByb2plY3RmaWx0ZXIucXVlcnkoKTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gZWxtUGFuZWwoKSB7XG5cblx0XHR2YXIgZGlyZWN0aXZlID0ge1xuXHRcdFx0bGluazogbGluayxcblx0XHRcdHJlc3RyaWN0OiAnQSdcblx0XHR9O1xuXG5cdFx0cmV0dXJuIGRpcmVjdGl2ZTtcblxuXHRcdGZ1bmN0aW9uIGxpbmsgIChzY29wZSwgZWxlbSwgYXR0cnMpIHtcblxuXHRcdFx0ZWxlbS5vbignY2xpY2snLCBmdW5jdGlvbigpe1xuXHRcdFx0XHR2YXIgJHRleHRUYXJnZXQgPSAkKCcuY29udGVudCAuY2xvc2VCdG4nKS5maW5kKCdzcGFuJyk7XG5cdFx0XHRcdCQoJy53cmFwcGVyJykudG9nZ2xlQ2xhc3MoJ3BhbmVsQW5pbWF0ZXMnKTtcblx0XHRcdFx0JHRleHRUYXJnZXQuaHRtbCggJHRleHRUYXJnZXQudGV4dCgpID09ICdDbG9zZScgPyAnT3BlbicgOiAnQ2xvc2UnKTtcblx0XHRcdH0pO1xuXHRcdH1cblx0fVxuXG59KSgpOyIsIihmdW5jdGlvbigpe1xuXG5cdCd1c2Ugc3RyaWN0JztcblxuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLnV0aWxpdHknLFtdKVxuXHQuY29udHJvbGxlcignVXRpbGl0aWVzQ29udHJvbGxlcicsIFV0aWxpdGllc0NvbnRyb2xsZXIpO1xuXG5cdGZ1bmN0aW9uIFV0aWxpdGllc0NvbnRyb2xsZXIoKSB7XG5cdFx0XG5cdFx0dmFyIFV0aWxpdGllc0NvbnRyb2xsZXIgPSB0aGlzO1xuXHRcdFV0aWxpdGllc0NvbnRyb2xsZXIudGltZSA9IG5ldyBEYXRlKCk7XG5cdFx0XG5cdH0gXG5cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcblx0XG5cdCd1c2Ugc3RyaWN0JztcblxuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLmFyY2hpdmUnLFtdKVxuXHQuY29uZmlnKGNvbmZpZylcblx0LmNvbnRyb2xsZXIoJ2NvbnRyb2xsZXJBcmNoaXZlJywgY29udHJvbGxlckFyY2hpdmUpO1xuXG5cdGZ1bmN0aW9uIGNvbmZpZyAoICRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIgKSB7XG5cdFx0XG5cdFx0JHN0YXRlUHJvdmlkZXJcblx0XHRcdC5zdGF0ZSgnYXBwLmFyY2hpdmUnLCB7XG5cdFx0XHRcdHVybDogJy9hcmNoaXZlJyxcblx0XHRcdFx0dmlld3M6IHtcblx0XHRcdFx0XHQndXRpbGl0aWVzQGFwcCc6IHtcblx0XHRcdFx0XHR0ZW1wbGF0ZVVybDogJ2h0bWwvdXRpbGl0aWVzL3V0aWxpdGllcy5pbmRleC5odG1sJyxcblx0XHRcdFx0XHRjb250cm9sbGVyOiAnVXRpbGl0aWVzQ29udHJvbGxlcicsXG5cdFx0XHRcdFx0Y29udHJvbGxlckFzOiAndXRpbGl0aWVzJ1xuXHRcdFx0XHR9LFxuXHRcdFx0XHQnbWFpbkBhcHAnOiB7XG5cdFx0XHRcdFx0dGVtcGxhdGVVcmw6ICdodG1sL21haW4vbWFpbi5hcmNoaXZlZC9hcmNoaXZlZC5pbmRleC5odG1sJyxcblx0XHRcdFx0XHRjb250cm9sbGVyOiAnY29udHJvbGxlckFyY2hpdmUnLFxuXHRcdFx0XHRcdGNvbnRyb2xsZXJBczogJ2FyY2hpdmVkJ1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuXHRmdW5jdGlvbiBjb250cm9sbGVyQXJjaGl2ZSgpIHt9XG5cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5hbGx0b2RvJywgW1xuXHRcdCdhcHAuYWxsdG9kby5jcmVhdGUnLFxuXHRcdCdhcHAuYWxsdG9kby5lZGl0J1xuXHRdKVxuXHQuY29uZmlnKGNvbmZpZylcblx0LmNvbnRyb2xsZXIoJ0FsbHRhc2tDb250cm9sbGVyJywgQWxsdGFza0NvbnRyb2xsZXIpO1xuXG5cdGZ1bmN0aW9uIGNvbmZpZyAoICRzdGF0ZVByb3ZpZGVyICkge1xuXG5cdFx0JHN0YXRlUHJvdmlkZXJcblx0XHRcdC5zdGF0ZSgnYXBwLmFsbCcsIHtcblx0XHRcdFx0dXJsOicvYWxsdGFzay86aWQnLFxuXHRcdFx0XHR2aWV3czoge1xuXHRcdFx0XHRcdCd1dGlsaXRpZXNAYXBwJzoge1xuXHRcdFx0XHRcdFx0dGVtcGxhdGVVcmw6ICdodG1sL3V0aWxpdGllcy91dGlsaXRpZXMuaW5kZXguaHRtbCcsXG5cdFx0XHRcdFx0XHRjb250cm9sbGVyOiAnVXRpbGl0aWVzQ29udHJvbGxlcicsXG5cdFx0XHRcdFx0XHRjb250cm9sbGVyQXM6ICd1dGlsaXRpZXMnXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHQnbWFpbkBhcHAnOiB7XG5cdFx0XHRcdFx0XHRwYXJhbXM6WydpZCddLFxuXHRcdFx0XHRcdFx0dGVtcGxhdGVVcmw6ICdodG1sL21haW4vbWFpbi5hbGwvYWxsLmluZGV4Lmh0bWwnLFxuXHRcdFx0XHRcdFx0Y29udHJvbGxlcjogJ0FsbHRhc2tDb250cm9sbGVyJyxcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXJBczogJ3RvZG8nXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0fVxuXG5cdGZ1bmN0aW9uIEFsbHRhc2tDb250cm9sbGVyICggQWxsdGFza3MsICRzdGF0ZSwgaXNJZCApIHtcblxuXHRcdHZhciBBbGx0YXNrQ29udHJvbGxlciA9IHRoaXM7XG5cdFx0XHRBbGx0YXNrQ29udHJvbGxlci5udW1iZXJDdXJyZW50ID0gMDtcblx0XHRcblx0XHRBbGx0YXNrQ29udHJvbGxlci5wYWdlU2l6ZSA9IDM7XG5cdFx0QWxsdGFza0NvbnRyb2xsZXIuYWxsVGFza3MgPSBBbGx0YXNrcy5xdWVyeSgpO1xuXG5cdFx0QWxsdGFza0NvbnRyb2xsZXIubnVtYmVyT2ZQYWdlcyA9ICBmdW5jdGlvbiAoKSB7XG5cdFx0XHRyZXR1cm4gTWF0aC5jZWlsKEFsbHRhc2tDb250cm9sbGVyLmFsbFRhc2tzLmxlbmd0aCAvIEFsbHRhc2tDb250cm9sbGVyLnBhZ2VTaXplKTtcblx0XHR9O1x0XHRcblx0XHRBbGx0YXNrQ29udHJvbGxlci5yZW1vdmVUYXNrID0gZnVuY3Rpb24gKHRhc2spIHtcblx0XHRcdEFsbHRhc2tzLmRlbGV0ZSh7fSwgeydpZCc6IHRhc2suaWR9LCBmdW5jdGlvbiAoKSB7XG5cdFx0XHQgICAgQWxsdGFza0NvbnRyb2xsZXIuYWxsVGFza3MgPSBBbGx0YXNrcy5xdWVyeSgpO1xuXHRcdFx0fSk7XG5cdFx0fTtcblx0XHRBbGx0YXNrQ29udHJvbGxlci5lZGl0VGFzayA9IGZ1bmN0aW9uICh0YXNrKSB7XG5cdFx0XHRpc0lkLmFkZElkRGF0YSh0YXNrLmlkKTtcblx0XHRcdCRzdGF0ZS5nbygnYXBwLmVkaXQnKTtcblx0XHR9O1xuXHRcdFxuXHR9XG5cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5uZXh0JyxbXSlcblx0LmNvbmZpZyhjb25maWcpXG5cdC5jb250cm9sbGVyKCdjb250cm9sbGVyTmV4dERheXMnLCBjb250cm9sbGVyTmV4dERheXMpO1xuXG5cdGZ1bmN0aW9uIGNvbmZpZyAoICRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIgKSB7XG5cblx0XHQkc3RhdGVQcm92aWRlclxuXHRcdFx0LnN0YXRlKCdhcHAubmV4dCcsIHtcblx0XHRcdFx0dXJsOicvbmV4dC86aWQnLFxuXHRcdFx0XHR2aWV3czoge1xuXHRcdFx0XHRcdCd1dGlsaXRpZXNAYXBwJzoge1xuXHRcdFx0XHRcdFx0dGVtcGxhdGVVcmw6ICdodG1sL3V0aWxpdGllcy91dGlsaXRpZXMuaW5kZXguaHRtbCcsXG5cdFx0XHRcdFx0XHRjb250cm9sbGVyOiAnVXRpbGl0aWVzQ29udHJvbGxlcicsXG5cdFx0XHRcdFx0XHRjb250cm9sbGVyQXM6ICd1dGlsaXRpZXMnXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHQnbWFpbkBhcHAnOiB7XG5cdFx0XHRcdFx0XHR0ZW1wbGF0ZVVybDogJ2h0bWwvbWFpbi9tYWluLnRhc2tTZXZlbi9zZXZlbi5pbmRleC5odG1sJyxcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXI6ICdjb250cm9sbGVyTmV4dERheXMnLFxuXHRcdFx0XHRcdFx0Y29udHJvbGxlckFzOiAnbmV4dFNldmVuJ1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdH1cblxuXHRmdW5jdGlvbiBjb250cm9sbGVyTmV4dERheXMgKCBBbGx0YXNrcywgJHN0YXRlICkge1xuXG5cdFx0dmFyIGNvbnRyb2xsZXJOZXh0RGF5cyA9IHRoaXM7XG5cblx0XHRjb250cm9sbGVyTmV4dERheXMudG9kYXlEYXRlID0gbW9tZW50KCkuZm9ybWF0KCdMJyk7XG5cdFx0Y29udHJvbGxlck5leHREYXlzLndlZWtEYXRlID0gbW9tZW50KCkud2Vla2RheSg3KS5mb3JtYXQoJ0wnKTtcblxuXHRcdGNvbnNvbGUubG9nKCBjb250cm9sbGVyTmV4dERheXMudG9kYXlEYXRlICk7XG5cdFx0Y29uc29sZS5sb2coIGNvbnRyb2xsZXJOZXh0RGF5cy53ZWVrRGF0ZSApO1xuXG5cdFx0Y29udHJvbGxlck5leHREYXlzLm5leHRTZXZlbkV2ZW50cyA9IEFsbHRhc2tzLnF1ZXJ5KHt9LCBmdW5jdGlvbigpIHtcblxuXHRcdFx0dmFyIGFycmF5UG9zID0gW107XG5cblx0XHRcdGFuZ3VsYXIuZm9yRWFjaChjb250cm9sbGVyTmV4dERheXMubmV4dFNldmVuRXZlbnRzLCBmdW5jdGlvbiAodmFsdWUsIGtleSkge1xuXG5cdFx0XHRcdGlmICggbW9tZW50KHZhbHVlLmRhdGVOdW0pLmZvcm1hdCgnTCcpID49IGNvbnRyb2xsZXJOZXh0RGF5cy50b2RheURhdGUgJiYgbW9tZW50KHZhbHVlLmRhdGVOdW0pLmZvcm1hdCgnTCcpIDw9IGNvbnRyb2xsZXJOZXh0RGF5cy53ZWVrRGF0ZSApIHtcblx0XHRcdFx0XHRhcnJheVBvcy5wdXNoKHZhbHVlKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRcblx0XHRcdH0pO1xuXG5cdFx0XHRjb250cm9sbGVyTmV4dERheXMubmV4dFNldmVuRXZlbnRzID0gYXJyYXlQb3M7XG5cblx0XHR9KTtcblx0fVxuXG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAudG9kYXknLFtdKVxuXHQuY29uZmlnKGNvbmZpZylcblx0LmNvbnRyb2xsZXIoJ1RvZGF5Q29udHJvbGxlcicsIFRvZGF5Q29udHJvbGxlcik7XG5cdC8vLmZpbHRlcignZmlsdGVyVG9kYXlFdmVudHMnLCBmaWx0ZXJUb2RheUV2ZW50cyk7XG5cblx0ZnVuY3Rpb24gY29uZmlnICggJHN0YXRlUHJvdmlkZXIsICR1cmxSb3V0ZXJQcm92aWRlciApIHtcblxuXHRcdCRzdGF0ZVByb3ZpZGVyXG5cdFx0XHQuc3RhdGUoJ2FwcC50b2RheScsIHtcblx0XHRcdFx0dXJsOicvdG9kYXknLFxuXHRcdFx0XHR2aWV3czoge1xuXHRcdFx0XHRcdCd1dGlsaXRpZXNAYXBwJzoge1xuXHRcdFx0XHRcdFx0dGVtcGxhdGVVcmw6ICdodG1sL3V0aWxpdGllcy91dGlsaXRpZXMuaW5kZXguaHRtbCcsXG5cdFx0XHRcdFx0XHRjb250cm9sbGVyOiAnVXRpbGl0aWVzQ29udHJvbGxlcicsXG5cdFx0XHRcdFx0XHRjb250cm9sbGVyQXM6ICd1dGlsaXRpZXMnXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHQnbWFpbkBhcHAnOiB7XG5cdFx0XHRcdFx0XHR0ZW1wbGF0ZVVybDogJ2h0bWwvbWFpbi9tYWluLnRvZGF5L3RvZGF5LmluZGV4Lmh0bWwnLFxuXHRcdFx0XHRcdFx0Y29udHJvbGxlcjogJ1RvZGF5Q29udHJvbGxlcicsXG5cdFx0XHRcdFx0XHRjb250cm9sbGVyQXM6ICd0b2RheSdcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHR9XG5cblx0ZnVuY3Rpb24gVG9kYXlDb250cm9sbGVyKCBBbGx0YXNrcywgJHN0YXRlICkge1xuXG5cdFx0dmFyIFRvZGF5Q29udHJvbGxlciA9IHRoaXM7XG5cblx0XHRUb2RheUNvbnRyb2xsZXIudG9kYXlEYXRlID0gbW9tZW50KCkuZm9ybWF0KCdMJyk7XG5cblx0XHRUb2RheUNvbnRyb2xsZXIudG9kb1Rhc2tzID0gQWxsdGFza3MucXVlcnkoe30sIGZ1bmN0aW9uKCkge1xuXG5cdFx0XHR2YXIgYXJyYXlQb3MgPSBbXTtcblx0XHRcdFx0XG5cdFx0XHRhbmd1bGFyLmZvckVhY2goVG9kYXlDb250cm9sbGVyLnRvZG9UYXNrcywgZnVuY3Rpb24odmFsdWUsIGtleSl7XG5cblx0XHRcdFx0aWYgKCBUb2RheUNvbnRyb2xsZXIudG9kYXlEYXRlID09IG1vbWVudCh2YWx1ZS5kYXRlTnVtKS5mb3JtYXQoJ0wnKSApIHtcblx0XHRcdFx0XHRhcnJheVBvcy5wdXNoKHZhbHVlKTtcblx0XHRcdFx0fVxuXG5cdFx0XHR9KTtcblxuXHRcdFx0VG9kYXlDb250cm9sbGVyLnRvZG9UYXNrcyA9IGFycmF5UG9zO1xuXG5cdFx0fSk7XG5cdH1cblxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuXG5cdCd1c2Ugc3RyaWN0JztcblxuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLmFsbHRvZG8uY3JlYXRlJyxbXG5cdFx0J2FwcC5hbGx0b2RvJ1xuXHRdKVxuXHQuY29uZmlnKGNvbmZpZylcblx0LmNvbnRyb2xsZXIoJ0NyZWF0ZXRvZG9Db250cm9sbGVyJywgQ3JlYXRldG9kb0NvbnRyb2xsZXIpO1xuXG5cdGZ1bmN0aW9uIGNvbmZpZyAoICRzdGF0ZVByb3ZpZGVyICkge1xuXG5cdFx0JHN0YXRlUHJvdmlkZXJcblx0XHRcdC5zdGF0ZSgnYXBwLmNyZWF0ZScsIHtcblxuXHRcdFx0XHR1cmw6ICcvYWxsdGFzay9jcmVhdGUnLFxuXHRcdFx0XHR2aWV3czoge1xuXHRcdFx0XHRcdCdvdmVybGF5QCc6IHtcblx0XHRcdFx0XHRcdHRlbXBsYXRlVXJsOiAnL2h0bWwvbWFpbi9tYWluLmFsbC9jcmVhdGUuYWxsL2NyZWF0ZS5hbGwuaHRtbCcsXG5cdFx0XHRcdFx0XHRjb250cm9sbGVyOiAnQ3JlYXRldG9kb0NvbnRyb2xsZXInLFxuXHRcdFx0XHRcdFx0Y29udHJvbGxlckFzOiAnY3JlYXRlVG9kbydcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdCdtYWluQGFwcCc6IHtcblx0XHRcdFx0XHRcdHRlbXBsYXRlVXJsOiAnaHRtbC9tYWluL21haW4uYWxsL2FsbC5pbmRleC5odG1sJyxcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXI6ICdBbGx0YXNrQ29udHJvbGxlcicsXG5cdFx0XHRcdFx0XHRjb250cm9sbGVyQXM6ICd0b2RvJ1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHR9KTtcblx0fVxuXG5cdGZ1bmN0aW9uIENyZWF0ZXRvZG9Db250cm9sbGVyICggQWxsdGFza3MsIFByb2plY3RsYWJlbCwgVXNlcikge1xuXG5cdFx0dmFyIENyZWF0ZXRvZG9Db250cm9sbGVyID0gdGhpcztcblxuXHRcdENyZWF0ZXRvZG9Db250cm9sbGVyLnN1Ym1pdHRlZCA9IGZhbHNlO1xuXG5cdFx0Q3JlYXRldG9kb0NvbnRyb2xsZXIucHJpb3JpdHkgPSBQcm9qZWN0bGFiZWwucXVlcnkoKTtcblxuXHRcdENyZWF0ZXRvZG9Db250cm9sbGVyLnVzZXIgPSBVc2VyLnF1ZXJ5KHt9LCBmdW5jdGlvbigpIHtcblxuXHRcdFx0dmFyIHVzZXJEYXRhID0gW107XG5cblx0XHRcdGFuZ3VsYXIuZm9yRWFjaChDcmVhdGV0b2RvQ29udHJvbGxlci51c2VyLCBmdW5jdGlvbih2YWx1ZSwga2V5KSB7XG5cblx0XHRcdFx0dXNlckRhdGEucHVzaChDcmVhdGV0b2RvQ29udHJvbGxlci51c2VyW2tleV0ubmFtZSk7XG5cblx0XHRcdH0pO1xuXG5cdFx0XHRDcmVhdGV0b2RvQ29udHJvbGxlci51c2VyID0gdXNlckRhdGE7XG5cdFx0XHRcblx0XHR9KTtcblxuXHRcdENyZWF0ZXRvZG9Db250cm9sbGVyLmNyZWF0ZVRhc2sgPSBmdW5jdGlvbiAoKSB7XG5cblx0XHRcdGlmIChDcmVhdGV0b2RvQ29udHJvbGxlci5mb3JtQWRkVGFza3MuJHZhbGlkKSB7XG5cblx0XHRcdFx0Q3JlYXRldG9kb0NvbnRyb2xsZXIuZGF0YSA9IHt9O1xuXG5cdFx0XHRcdENyZWF0ZXRvZG9Db250cm9sbGVyLmRhdGEgPSB7XG5cblx0XHRcdFx0XHRwcm9qZWN0OiBDcmVhdGV0b2RvQ29udHJvbGxlci5wcm9qZWN0LFxuXHRcdFx0XHRcdGxhYmVsOiBDcmVhdGV0b2RvQ29udHJvbGxlci5sYWJlbCxcblx0XHRcdFx0XHRuYW1lOiBDcmVhdGV0b2RvQ29udHJvbGxlci5uYW1lLFxuXHRcdFx0XHRcdGRhdGVOdW06IENyZWF0ZXRvZG9Db250cm9sbGVyLmRhdGVOdW0sXG5cdFx0XHRcdFx0aGVhZGVyQ29tbWVudDogQ3JlYXRldG9kb0NvbnRyb2xsZXIuaGVhZGVyQ29tbWVudCxcblx0XHRcdFx0XHRjb21tZW50OiBDcmVhdGV0b2RvQ29udHJvbGxlci5jb21tZW50LFxuXHRcdFx0XHRcdGRvbmU6IENyZWF0ZXRvZG9Db250cm9sbGVyLmRvbmVcblx0XHRcdFx0XHRcblx0XHRcdFx0fTtcblxuXHRcdFx0XHRjb25zb2xlLmxvZyhDcmVhdGV0b2RvQ29udHJvbGxlci5kYXRhLmRvbmUpO1xuXG5cdFx0XHRcdEFsbHRhc2tzLnNhdmUoQ3JlYXRldG9kb0NvbnRyb2xsZXIuZGF0YSk7XG5cdFx0XHRcdCQoJ2Zvcm0nKS5maW5kKCdpbnB1dCcpLnZhbCgnJyk7XG5cdFx0XHRcdCQoJ3AubXNnLWVycm9yJykucmVtb3ZlQ2xhc3MoJ21zZy1lcnJvcicpO1xuXG5cdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdCQoJ2Zvcm0nKS5maW5kKCdwJykuYWRkQ2xhc3MoJ21zZy1lcnJvcicpO1xuXHRcdFx0XHRDcmVhdGV0b2RvQ29udHJvbGxlci5zdWJtaXR0ZWQgPSB0cnVlO1xuXG5cdFx0XHR9XG5cdFx0fTtcblx0XHRcblx0XHRDcmVhdGV0b2RvQ29udHJvbGxlci5yZXNldFZhbCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0JCgnZm9ybScpLmZpbmQoJ2lucHV0JykudmFsKCcnKTtcblx0XHR9O1xuXG5cdH1cblxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAuYWxsdG9kby5lZGl0JyxbXG5cdFx0J2FwcC5hbGx0b2RvJ1xuXHRdKVxuXHQuY29uZmlnKGNvbmZpZylcblx0LmNvbnRyb2xsZXIoJ0VkaXR0b2RvQ29udHJvbGxlcicsIEVkaXR0b2RvQ29udHJvbGxlciApO1xuXG5cdGZ1bmN0aW9uIGNvbmZpZyAoICRzdGF0ZVByb3ZpZGVyICkge1xuXG5cdFx0JHN0YXRlUHJvdmlkZXJcblx0XHRcdC5zdGF0ZSgnYXBwLmVkaXQnLCB7XG5cblx0XHRcdFx0dXJsOiAnL2FsbHRhc2svZWRpdCcsXG5cdFx0XHRcdHZpZXdzOiB7XG5cblx0XHRcdFx0XHQnb3ZlcmxheUAnOiB7XG5cdFx0XHRcdFx0XHR0ZW1wbGF0ZVVybDogJy9odG1sL21haW4vbWFpbi5hbGwvZWRpdC5hbGwvZWRpdC5hbGwuaHRtbCcsXG5cdFx0XHRcdFx0XHRjb250cm9sbGVyOiAnRWRpdHRvZG9Db250cm9sbGVyJyxcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXJBczogJ2VkaXRUb2RvJ1xuXHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHQnbWFpbkBhcHAnOiB7XG5cdFx0XHRcdFx0XHR0ZW1wbGF0ZVVybDogJ2h0bWwvbWFpbi9tYWluLmFsbC9hbGwuaW5kZXguaHRtbCcsXG5cdFx0XHRcdFx0XHRjb250cm9sbGVyOiAnQWxsdGFza0NvbnRyb2xsZXInLFxuXHRcdFx0XHRcdFx0Y29udHJvbGxlckFzOiAndG9kbydcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdH1cblxuXHRmdW5jdGlvbiBFZGl0dG9kb0NvbnRyb2xsZXIgKCBpc0lkLCBBbGx0YXNrcywgJHN0YXRlICkge1xuXG5cdFx0dmFyIEVkaXR0b2RvQ29udHJvbGxlciA9IHRoaXM7XG5cdFx0dmFyIGVkaXRJZCA9IGlzSWQuZ2V0SWREYXRhKCk7XG5cblx0XHRFZGl0dG9kb0NvbnRyb2xsZXIuaWRFZGl0ID0gZWRpdElkWzBdO1xuXHRcdEVkaXR0b2RvQ29udHJvbGxlci50YXNrID0gQWxsdGFza3MuZ2V0KHt9LHsnaWQnOiBlZGl0SWRbMF19KTtcblxuXHRcdEVkaXR0b2RvQ29udHJvbGxlci5lZGl0VGFzayA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XG5cdFx0XHRFZGl0dG9kb0NvbnRyb2xsZXIubmV3VGFzayA9IHtcblxuXHRcdFx0XHRpZDogZWRpdElkWzBdLFxuXHRcdFx0XHRwcm9qZWN0OiBFZGl0dG9kb0NvbnRyb2xsZXIudGFzay5wcm9qZWN0LFxuXHRcdFx0XHRsYWJlbDogRWRpdHRvZG9Db250cm9sbGVyLnRhc2subGFiZWwsXG5cdFx0XHRcdG5hbWU6IEVkaXR0b2RvQ29udHJvbGxlci50YXNrLm5hbWUsXG5cdFx0XHRcdGRhdGVOdW06IEVkaXR0b2RvQ29udHJvbGxlci50YXNrLmRhdGVOdW0sXG5cdFx0XHRcdGhlYWRlckNvbW1lbnQ6IEVkaXR0b2RvQ29udHJvbGxlci50YXNrLmhlYWRlckNvbW1lbnQsXG5cdFx0XHRcdGNvbW1lbnQ6IEVkaXR0b2RvQ29udHJvbGxlci50YXNrLmNvbW1lbnQsXG5cdFx0XHRcdGRvbmU6IEVkaXR0b2RvQ29udHJvbGxlci50YXNrLmRvbmVcblxuXHRcdFx0fTtcblxuXHRcdFx0RWRpdHRvZG9Db250cm9sbGVyLm5ld1Rhc2suZGF0ZU51bSA9IG5ldyBEYXRlIChFZGl0dG9kb0NvbnRyb2xsZXIudGFzay5kYXRlTnVtKTtcblx0XHRcdEFsbHRhc2tzLnVwZGF0ZShFZGl0dG9kb0NvbnRyb2xsZXIubmV3VGFzayk7XG5cdFx0XHQkc3RhdGUuZ28oJ2FwcC5hbGwnKTtcblxuXHRcdH07XG5cblx0XHRFZGl0dG9kb0NvbnRyb2xsZXIuY2FuY2VsRWRpdCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0JHN0YXRlLmdvKCdhcHAuYWxsJyk7XHRcdFx0XG5cdFx0fTtcblx0XHRcblx0fVxuXG59KSgpOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==